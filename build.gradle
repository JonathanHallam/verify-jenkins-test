apply from: 'buildSrc/publish.gradle'

ext {
    opensaml_version = '3.3.0'
}

def dependencyVersions = [
        ida_saml_extensions:"$opensaml_version-1.2a-41"
]

subprojects {
    apply plugin: 'java'
    repositories {
        maven { url 'https://artifactory.ida.digital.cabinet-office.gov.uk/artifactory/whitelisted-repos' }
    }


    group = "uk.gov.ida"
    version = "$opensaml_version-${System.env.BUILD_NUMBER ?: 'SNAPSHOT'}"

    configurations {
        all*.exclude group: 'org.mockito', module: 'mockito-all'
        saml
        opensaml
        saml_test
        test_deps
        common_utils
    }

    dependencies {
        saml "uk.gov.ida:ida-saml-extensions:$dependencyVersions.ida_saml_extensions"

        opensaml "org.opensaml:opensaml-core:$opensaml_version",
                'net.shibboleth.utilities:java-support:7.2.0'

        test_deps 'org.mockito:mockito-core:1.9.5',
                'junit:junit:4.11',
                'org.assertj:assertj-core:1.6.0',
                "org.opensaml:opensaml-security-api:$opensaml_version"

        saml_test "org.opensaml:opensaml-saml-impl:$opensaml_version",
                "org.opensaml:opensaml-saml-api:$opensaml_version"

        common_utils 'uk.gov.ida:common-utils:2.0.0-317',
                'com.google.guava:guava:18.0'
    }
}
