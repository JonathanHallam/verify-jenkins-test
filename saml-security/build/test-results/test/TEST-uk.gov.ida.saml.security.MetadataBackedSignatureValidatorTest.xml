<?xml version="1.0" encoding="UTF-8"?>
<testsuite name="uk.gov.ida.saml.security.MetadataBackedSignatureValidatorTest" tests="18" skipped="0" failures="0" errors="0" timestamp="2018-04-03T13:58:09" hostname="gds8080.local" time="0.307">
  <properties/>
  <testcase name="shouldNotValidateSignatureTooManyTransforms" classname="uk.gov.ida.saml.security.MetadataBackedSignatureValidatorTest" time="0.036"/>
  <testcase name="shouldNotValidateSignatureReferenceURINotParentID" classname="uk.gov.ida.saml.security.MetadataBackedSignatureValidatorTest" time="0.01"/>
  <testcase name="shouldNotValidateSignatureNoTransforms" classname="uk.gov.ida.saml.security.MetadataBackedSignatureValidatorTest" time="0.01"/>
  <testcase name="shouldNotValidateSignatureNotImmediateChild" classname="uk.gov.ida.saml.security.MetadataBackedSignatureValidatorTest" time="0.008"/>
  <testcase name="shouldFailValidationIfCertificateDoesNotChainWithATrustedRoot" classname="uk.gov.ida.saml.security.MetadataBackedSignatureValidatorTest" time="0.101"/>
  <testcase name="shouldNotValidateSignatureBadReferenceURI" classname="uk.gov.ida.saml.security.MetadataBackedSignatureValidatorTest" time="0.01"/>
  <testcase name="shouldNotValidateBadSignatureAlgorithm" classname="uk.gov.ida.saml.security.MetadataBackedSignatureValidatorTest" time="0.008"/>
  <testcase name="shouldNotAcceptUnsignedAssertions" classname="uk.gov.ida.saml.security.MetadataBackedSignatureValidatorTest" time="0.01"/>
  <testcase name="shouldAcceptSignedAssertions" classname="uk.gov.ida.saml.security.MetadataBackedSignatureValidatorTest" time="0.014"/>
  <testcase name="shouldNotValidateSignatureContainingObject" classname="uk.gov.ida.saml.security.MetadataBackedSignatureValidatorTest" time="0.006"/>
  <testcase name="shouldValidateSignatureUsingTrustedCredentials" classname="uk.gov.ida.saml.security.MetadataBackedSignatureValidatorTest" time="0.014"/>
  <testcase name="shouldNotValidateSignatureTooManyReferences" classname="uk.gov.ida.saml.security.MetadataBackedSignatureValidatorTest" time="0.006"/>
  <testcase name="shouldNotValidateSignatureNoParentID" classname="uk.gov.ida.saml.security.MetadataBackedSignatureValidatorTest" time="0.009"/>
  <testcase name="shouldNotValidateSignatureNoEnvelopeTransform" classname="uk.gov.ida.saml.security.MetadataBackedSignatureValidatorTest" time="0.008"/>
  <testcase name="shouldFailValidationIfKeyInfoNotPresentInMetadata" classname="uk.gov.ida.saml.security.MetadataBackedSignatureValidatorTest" time="0.023"/>
  <testcase name="shouldNotValidateMissingSignature" classname="uk.gov.ida.saml.security.MetadataBackedSignatureValidatorTest" time="0.006"/>
  <testcase name="shouldNotAcceptMissignedAssertions" classname="uk.gov.ida.saml.security.MetadataBackedSignatureValidatorTest" time="0.011"/>
  <testcase name="shouldNotValidateSignatureInvalidEnvelopeTransform" classname="uk.gov.ida.saml.security.MetadataBackedSignatureValidatorTest" time="0.01"/>
  <system-out><![CDATA[14:58:09.352 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Starting to unmarshall Apache XML-Security-based SignatureImpl element
14:58:09.352 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Constructing Apache XMLSignature object
14:58:09.352 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Signature", "")
14:58:09.352 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:SignedInfo", "")
14:58:09.352 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:SignatureMethod", "")
14:58:09.352 [Test worker] DEBUG org.apache.xml.security.algorithms.SignatureAlgorithm - Create URI "http://www.w3.org/2000/09/xmldsig#rsa-sha1" class "class org.apache.xml.security.algorithms.implementations.SignatureBaseRSA$SignatureRSASHA1"
14:58:09.352 [Test worker] DEBUG org.apache.xml.security.algorithms.JCEMapper - Request for URI http://www.w3.org/2000/09/xmldsig#rsa-sha1
14:58:09.352 [Test worker] DEBUG org.apache.xml.security.algorithms.implementations.SignatureBaseRSA - Created SignatureRSA using SHA1withRSA
14:58:09.352 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Adding canonicalization and signing algorithms, and HMAC output length to Signature
14:58:09.352 [Test worker] DEBUG org.opensaml.core.xml.io.AbstractXMLObjectUnmarshaller - Ignoring unknown attribute Format
14:58:09.352 [Test worker] DEBUG org.opensaml.core.xml.io.AbstractXMLObjectUnmarshaller - Ignoring unknown attribute SPNameQualifier
14:58:09.362 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Beginning refresh of metadata from 'metadata'
14:58:09.362 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Processing new metadata from 'metadata'
14:58:09.362 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Unmarshalling metadata from 'metadata'
14:58:09.364 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Starting to unmarshall Apache XML-Security-based SignatureImpl element
14:58:09.364 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Constructing Apache XMLSignature object
14:58:09.364 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Signature", "")
14:58:09.364 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:SignedInfo", "")
14:58:09.364 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:SignatureMethod", "")
14:58:09.364 [Test worker] DEBUG org.apache.xml.security.algorithms.SignatureAlgorithm - Create URI "http://www.w3.org/2001/04/xmldsig-more#rsa-sha256" class "class org.apache.xml.security.algorithms.implementations.SignatureBaseRSA$SignatureRSASHA256"
14:58:09.364 [Test worker] DEBUG org.apache.xml.security.algorithms.JCEMapper - Request for URI http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.364 [Test worker] DEBUG org.apache.xml.security.algorithms.implementations.SignatureBaseRSA - Created SignatureRSA using SHA256withRSA
14:58:09.364 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:KeyInfo", "")
14:58:09.364 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Adding canonicalization and signing algorithms, and HMAC output length to Signature
14:58:09.364 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Adding KeyInfo to Signature
14:58:09.381 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Preprocessing metadata from 'metadata'
14:58:09.381 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Releasing cached DOM for metadata from 'metadata'
14:58:09.382 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Post-processing metadata from 'metadata'
14:58:09.382 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Computing expiration time for metadata from 'metadata'
14:58:09.382 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Expiration of metadata from 'metadata' will occur at 2018-04-03T13:59:49.362Z
14:58:09.382 [Test worker] INFO org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: New metadata successfully loaded for 'metadata'
14:58:09.382 [Test worker] INFO org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Next refresh cycle for metadata provider 'metadata' will occur on '2018-04-03T14:03:09.382Z' ('2018-04-03T15:03:09.382+01:00' local time)
14:58:09.384 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Reference", "")
14:58:09.384 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Transforms", "")
14:58:09.384 [Test worker] ERROR org.opensaml.saml.security.impl.SAMLSignatureProfileValidator - Invalid number of Transforms was present: 3
14:58:09.387 [Test worker] DEBUG org.opensaml.core.xml.io.AbstractXMLObjectUnmarshaller - Ignoring unknown attribute ID
14:58:09.387 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Starting to unmarshall Apache XML-Security-based SignatureImpl element
14:58:09.387 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Constructing Apache XMLSignature object
14:58:09.387 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Signature", "")
14:58:09.387 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:SignedInfo", "")
14:58:09.387 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:SignatureMethod", "")
14:58:09.387 [Test worker] DEBUG org.apache.xml.security.algorithms.SignatureAlgorithm - Create URI "http://www.w3.org/2000/09/xmldsig#rsa-sha1" class "class org.apache.xml.security.algorithms.implementations.SignatureBaseRSA$SignatureRSASHA1"
14:58:09.387 [Test worker] DEBUG org.apache.xml.security.algorithms.JCEMapper - Request for URI http://www.w3.org/2000/09/xmldsig#rsa-sha1
14:58:09.387 [Test worker] DEBUG org.apache.xml.security.algorithms.implementations.SignatureBaseRSA - Created SignatureRSA using SHA1withRSA
14:58:09.387 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Adding canonicalization and signing algorithms, and HMAC output length to Signature
14:58:09.387 [Test worker] DEBUG org.opensaml.core.xml.io.AbstractXMLObjectUnmarshaller - Ignoring unknown attribute Format
14:58:09.387 [Test worker] DEBUG org.opensaml.core.xml.io.AbstractXMLObjectUnmarshaller - Ignoring unknown attribute SPNameQualifier
14:58:09.389 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Beginning refresh of metadata from 'metadata'
14:58:09.389 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Processing new metadata from 'metadata'
14:58:09.389 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Unmarshalling metadata from 'metadata'
14:58:09.390 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Starting to unmarshall Apache XML-Security-based SignatureImpl element
14:58:09.390 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Constructing Apache XMLSignature object
14:58:09.390 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Signature", "")
14:58:09.390 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:SignedInfo", "")
14:58:09.390 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:SignatureMethod", "")
14:58:09.390 [Test worker] DEBUG org.apache.xml.security.algorithms.SignatureAlgorithm - Create URI "http://www.w3.org/2001/04/xmldsig-more#rsa-sha256" class "class org.apache.xml.security.algorithms.implementations.SignatureBaseRSA$SignatureRSASHA256"
14:58:09.390 [Test worker] DEBUG org.apache.xml.security.algorithms.JCEMapper - Request for URI http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.390 [Test worker] DEBUG org.apache.xml.security.algorithms.implementations.SignatureBaseRSA - Created SignatureRSA using SHA256withRSA
14:58:09.390 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:KeyInfo", "")
14:58:09.390 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Adding canonicalization and signing algorithms, and HMAC output length to Signature
14:58:09.390 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Adding KeyInfo to Signature
14:58:09.394 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Preprocessing metadata from 'metadata'
14:58:09.394 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Releasing cached DOM for metadata from 'metadata'
14:58:09.395 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Post-processing metadata from 'metadata'
14:58:09.395 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Computing expiration time for metadata from 'metadata'
14:58:09.395 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Expiration of metadata from 'metadata' will occur at 2018-04-03T13:59:49.389Z
14:58:09.395 [Test worker] INFO org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: New metadata successfully loaded for 'metadata'
14:58:09.395 [Test worker] INFO org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Next refresh cycle for metadata provider 'metadata' will occur on '2018-04-03T14:03:09.395Z' ('2018-04-03T15:03:09.395+01:00' local time)
14:58:09.395 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Reference", "")
14:58:09.395 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Transforms", "")
14:58:09.395 [Test worker] ERROR org.opensaml.saml.security.impl.SAMLSignatureProfileValidator - Reference URI '#_af01d14f-14db-46b9-b3f7-d9d67bff7e97' did not point to SignableSAMLObject with ID '_af01d14f-14db-46b9-b3f7-d9d67bff7e96'
14:58:09.398 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Starting to unmarshall Apache XML-Security-based SignatureImpl element
14:58:09.398 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Constructing Apache XMLSignature object
14:58:09.398 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Signature", "")
14:58:09.398 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:SignedInfo", "")
14:58:09.398 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:SignatureMethod", "")
14:58:09.398 [Test worker] DEBUG org.apache.xml.security.algorithms.SignatureAlgorithm - Create URI "http://www.w3.org/2000/09/xmldsig#rsa-sha1" class "class org.apache.xml.security.algorithms.implementations.SignatureBaseRSA$SignatureRSASHA1"
14:58:09.398 [Test worker] DEBUG org.apache.xml.security.algorithms.JCEMapper - Request for URI http://www.w3.org/2000/09/xmldsig#rsa-sha1
14:58:09.398 [Test worker] DEBUG org.apache.xml.security.algorithms.implementations.SignatureBaseRSA - Created SignatureRSA using SHA1withRSA
14:58:09.398 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Adding canonicalization and signing algorithms, and HMAC output length to Signature
14:58:09.398 [Test worker] DEBUG org.opensaml.core.xml.io.AbstractXMLObjectUnmarshaller - Ignoring unknown attribute Format
14:58:09.398 [Test worker] DEBUG org.opensaml.core.xml.io.AbstractXMLObjectUnmarshaller - Ignoring unknown attribute SPNameQualifier
14:58:09.400 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Beginning refresh of metadata from 'metadata'
14:58:09.400 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Processing new metadata from 'metadata'
14:58:09.400 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Unmarshalling metadata from 'metadata'
14:58:09.401 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Starting to unmarshall Apache XML-Security-based SignatureImpl element
14:58:09.401 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Constructing Apache XMLSignature object
14:58:09.401 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Signature", "")
14:58:09.401 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:SignedInfo", "")
14:58:09.401 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:SignatureMethod", "")
14:58:09.401 [Test worker] DEBUG org.apache.xml.security.algorithms.SignatureAlgorithm - Create URI "http://www.w3.org/2001/04/xmldsig-more#rsa-sha256" class "class org.apache.xml.security.algorithms.implementations.SignatureBaseRSA$SignatureRSASHA256"
14:58:09.401 [Test worker] DEBUG org.apache.xml.security.algorithms.JCEMapper - Request for URI http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.401 [Test worker] DEBUG org.apache.xml.security.algorithms.implementations.SignatureBaseRSA - Created SignatureRSA using SHA256withRSA
14:58:09.401 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:KeyInfo", "")
14:58:09.401 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Adding canonicalization and signing algorithms, and HMAC output length to Signature
14:58:09.401 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Adding KeyInfo to Signature
14:58:09.404 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Preprocessing metadata from 'metadata'
14:58:09.404 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Releasing cached DOM for metadata from 'metadata'
14:58:09.404 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Post-processing metadata from 'metadata'
14:58:09.404 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Computing expiration time for metadata from 'metadata'
14:58:09.405 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Expiration of metadata from 'metadata' will occur at 2018-04-03T13:59:49.400Z
14:58:09.405 [Test worker] INFO org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: New metadata successfully loaded for 'metadata'
14:58:09.405 [Test worker] INFO org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Next refresh cycle for metadata provider 'metadata' will occur on '2018-04-03T14:03:09.405Z' ('2018-04-03T15:03:09.405+01:00' local time)
14:58:09.405 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Reference", "")
14:58:09.405 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Transforms", "")
14:58:09.405 [Test worker] ERROR org.opensaml.saml.security.impl.SAMLSignatureProfileValidator - Apache XML Security exception obtaining Reference
org.apache.xml.security.transforms.TransformationException: Cannot find Transform in Transforms
	at org.apache.xml.security.transforms.Transforms.<init>(Transforms.java:143)
	at org.apache.xml.security.signature.Reference.<init>(Reference.java:239)
	at org.apache.xml.security.signature.Manifest.item(Manifest.java:229)
	at org.opensaml.saml.security.impl.SAMLSignatureProfileValidator.validateReference(SAMLSignatureProfileValidator.java:116)
	at org.opensaml.saml.security.impl.SAMLSignatureProfileValidator.validateSignatureImpl(SAMLSignatureProfileValidator.java:88)
	at org.opensaml.saml.security.impl.SAMLSignatureProfileValidator.validate(SAMLSignatureProfileValidator.java:64)
	at uk.gov.ida.saml.security.SignatureValidator.validate(SignatureValidator.java:29)
	at uk.gov.ida.saml.security.MetadataBackedSignatureValidatorTest.validateAuthnRequestFile(MetadataBackedSignatureValidatorTest.java:267)
	at uk.gov.ida.saml.security.MetadataBackedSignatureValidatorTest.shouldNotValidateSignatureNoTransforms(MetadataBackedSignatureValidatorTest.java:228)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.ExpectException.evaluate(ExpectException.java:19)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.mockito.internal.runners.JUnit45AndHigherRunnerImpl.run(JUnit45AndHigherRunnerImpl.java:37)
	at org.mockito.runners.MockitoJUnitRunner.run(MockitoJUnitRunner.java:62)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.runTestClass(JUnitTestClassExecuter.java:114)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.execute(JUnitTestClassExecuter.java:57)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassProcessor.processTestClass(JUnitTestClassProcessor.java:66)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:51)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)
	at com.sun.proxy.$Proxy1.processTestClass(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:109)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:146)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:128)
	at org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:404)
	at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)
	at org.gradle.internal.concurrent.StoppableExecutorImpl$1.run(StoppableExecutorImpl.java:46)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)
	at java.lang.Thread.run(Thread.java:748)
14:58:09.408 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Starting to unmarshall Apache XML-Security-based SignatureImpl element
14:58:09.408 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Constructing Apache XMLSignature object
14:58:09.408 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Signature", "")
14:58:09.408 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:SignedInfo", "")
14:58:09.408 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:SignatureMethod", "")
14:58:09.408 [Test worker] DEBUG org.apache.xml.security.algorithms.SignatureAlgorithm - Create URI "http://www.w3.org/2000/09/xmldsig#rsa-sha1" class "class org.apache.xml.security.algorithms.implementations.SignatureBaseRSA$SignatureRSASHA1"
14:58:09.408 [Test worker] DEBUG org.apache.xml.security.algorithms.JCEMapper - Request for URI http://www.w3.org/2000/09/xmldsig#rsa-sha1
14:58:09.408 [Test worker] DEBUG org.apache.xml.security.algorithms.implementations.SignatureBaseRSA - Created SignatureRSA using SHA1withRSA
14:58:09.408 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Adding canonicalization and signing algorithms, and HMAC output length to Signature
14:58:09.408 [Test worker] DEBUG org.opensaml.core.xml.io.AbstractXMLObjectUnmarshaller - Ignoring unknown child element Wrapper
14:58:09.408 [Test worker] DEBUG org.opensaml.core.xml.io.AbstractXMLObjectUnmarshaller - Ignoring unknown attribute Format
14:58:09.408 [Test worker] DEBUG org.opensaml.core.xml.io.AbstractXMLObjectUnmarshaller - Ignoring unknown attribute SPNameQualifier
14:58:09.410 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Beginning refresh of metadata from 'metadata'
14:58:09.410 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Processing new metadata from 'metadata'
14:58:09.410 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Unmarshalling metadata from 'metadata'
14:58:09.411 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Starting to unmarshall Apache XML-Security-based SignatureImpl element
14:58:09.411 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Constructing Apache XMLSignature object
14:58:09.411 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Signature", "")
14:58:09.411 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:SignedInfo", "")
14:58:09.411 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:SignatureMethod", "")
14:58:09.411 [Test worker] DEBUG org.apache.xml.security.algorithms.SignatureAlgorithm - Create URI "http://www.w3.org/2001/04/xmldsig-more#rsa-sha256" class "class org.apache.xml.security.algorithms.implementations.SignatureBaseRSA$SignatureRSASHA256"
14:58:09.411 [Test worker] DEBUG org.apache.xml.security.algorithms.JCEMapper - Request for URI http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.411 [Test worker] DEBUG org.apache.xml.security.algorithms.implementations.SignatureBaseRSA - Created SignatureRSA using SHA256withRSA
14:58:09.411 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:KeyInfo", "")
14:58:09.411 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Adding canonicalization and signing algorithms, and HMAC output length to Signature
14:58:09.411 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Adding KeyInfo to Signature
14:58:09.414 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Preprocessing metadata from 'metadata'
14:58:09.414 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Releasing cached DOM for metadata from 'metadata'
14:58:09.414 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Post-processing metadata from 'metadata'
14:58:09.414 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Computing expiration time for metadata from 'metadata'
14:58:09.414 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Expiration of metadata from 'metadata' will occur at 2018-04-03T13:59:49.410Z
14:58:09.414 [Test worker] INFO org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: New metadata successfully loaded for 'metadata'
14:58:09.414 [Test worker] INFO org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Next refresh cycle for metadata provider 'metadata' will occur on '2018-04-03T14:03:09.414Z' ('2018-04-03T15:03:09.414+01:00' local time)
14:58:09.490 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Beginning refresh of metadata from 'metadata'
14:58:09.490 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Processing new metadata from 'metadata'
14:58:09.490 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Unmarshalling metadata from 'metadata'
14:58:09.491 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Starting to unmarshall Apache XML-Security-based SignatureImpl element
14:58:09.491 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Constructing Apache XMLSignature object
14:58:09.491 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Signature", "")
14:58:09.491 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:SignedInfo", "")
14:58:09.491 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:SignatureMethod", "")
14:58:09.491 [Test worker] DEBUG org.apache.xml.security.algorithms.SignatureAlgorithm - Create URI "http://www.w3.org/2001/04/xmldsig-more#rsa-sha256" class "class org.apache.xml.security.algorithms.implementations.SignatureBaseRSA$SignatureRSASHA256"
14:58:09.491 [Test worker] DEBUG org.apache.xml.security.algorithms.JCEMapper - Request for URI http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.491 [Test worker] DEBUG org.apache.xml.security.algorithms.implementations.SignatureBaseRSA - Created SignatureRSA using SHA256withRSA
14:58:09.491 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:KeyInfo", "")
14:58:09.491 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Adding canonicalization and signing algorithms, and HMAC output length to Signature
14:58:09.491 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Adding KeyInfo to Signature
14:58:09.495 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Preprocessing metadata from 'metadata'
14:58:09.495 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Releasing cached DOM for metadata from 'metadata'
14:58:09.496 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Post-processing metadata from 'metadata'
14:58:09.496 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Computing expiration time for metadata from 'metadata'
14:58:09.496 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Expiration of metadata from 'metadata' will occur at 2018-04-03T13:59:49.490Z
14:58:09.496 [Test worker] INFO org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: New metadata successfully loaded for 'metadata'
14:58:09.496 [Test worker] INFO org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Next refresh cycle for metadata provider 'metadata' will occur on '2018-04-03T14:03:09.496Z' ('2018-04-03T15:03:09.496+01:00' local time)
14:58:09.499 [Test worker] DEBUG org.opensaml.saml.common.SAMLObjectSupport - Examining signed object for content references with exclusive canonicalization transform
14:58:09.499 [Test worker] DEBUG org.opensaml.saml.common.SAMLObjectSupport - Saw exclusive transform, declaring non-visible namespaces on signed object
14:58:09.500 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureMarshaller - Starting to marshall {http://www.w3.org/2000/09/xmldsig#}Signature
14:58:09.500 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureMarshaller - Creating XMLSignature object
14:58:09.500 [Test worker] DEBUG org.apache.xml.security.algorithms.SignatureAlgorithm - Create URI "http://www.w3.org/2001/04/xmldsig-more#rsa-sha256" class "class org.apache.xml.security.algorithms.implementations.SignatureBaseRSA$SignatureRSASHA256"
14:58:09.500 [Test worker] DEBUG org.apache.xml.security.algorithms.JCEMapper - Request for URI http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.500 [Test worker] DEBUG org.apache.xml.security.algorithms.implementations.SignatureBaseRSA - Created SignatureRSA using SHA256withRSA
14:58:09.500 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureMarshaller - Adding content to XMLSignature.
14:58:09.500 [Test worker] DEBUG org.apache.xml.security.transforms.Transforms - Transforms.addTransform(http://www.w3.org/2000/09/xmldsig#enveloped-signature)
14:58:09.500 [Test worker] DEBUG org.apache.xml.security.transforms.Transform - Create URI "http://www.w3.org/2000/09/xmldsig#enveloped-signature" class "class org.apache.xml.security.transforms.implementations.TransformEnvelopedSignature"
14:58:09.500 [Test worker] DEBUG org.apache.xml.security.transforms.Transform - The NodeList is null
14:58:09.500 [Test worker] DEBUG org.apache.xml.security.transforms.Transforms - Transforms.addTransform(http://www.w3.org/2000/09/xmldsig#enveloped-signature)
14:58:09.500 [Test worker] DEBUG org.apache.xml.security.transforms.Transforms - Transforms.addTransform(http://www.w3.org/2001/10/xml-exc-c14n#)
14:58:09.500 [Test worker] DEBUG org.apache.xml.security.transforms.Transform - Create URI "http://www.w3.org/2001/10/xml-exc-c14n#" class "class org.apache.xml.security.transforms.implementations.TransformC14NExclusive"
14:58:09.500 [Test worker] DEBUG org.apache.xml.security.transforms.Transform - The NodeList is null
14:58:09.500 [Test worker] DEBUG org.apache.xml.security.transforms.Transforms - Transforms.addTransform(http://www.w3.org/2001/10/xml-exc-c14n#)
14:58:09.500 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Transform", "null")
14:58:09.500 [Test worker] DEBUG org.opensaml.saml.common.SAMLObjectContentReference - Adding list of inclusive namespaces for signature exclusive canonicalization transform
14:58:09.500 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureMarshaller - Creating Signature DOM element
14:58:09.501 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.Signer - Using a signer of implemenation: org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignerProviderImpl
14:58:09.501 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignerProviderImpl - Computing signature over XMLSignature object
14:58:09.501 [Test worker] DEBUG org.apache.xml.security.algorithms.JCEMapper - Request for URI http://www.w3.org/2001/04/xmlenc#sha256
14:58:09.501 [Test worker] DEBUG org.apache.xml.security.utils.resolver.ResourceResolver - I was asked to create a ResourceResolver and got 0
14:58:09.501 [Test worker] DEBUG org.apache.xml.security.utils.resolver.ResourceResolver - check resolvability by class org.apache.xml.security.utils.resolver.ResourceResolver
14:58:09.501 [Test worker] DEBUG org.apache.xml.security.utils.resolver.implementations.ResolverFragment - State I can resolve reference: "#some-assertion-id"
14:58:09.501 [Test worker] DEBUG org.apache.xml.security.utils.resolver.implementations.ResolverFragment - Try to catch an Element with ID some-assertion-id and Element was [saml2:Assertion: null]
14:58:09.501 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Transform", "null")
14:58:09.501 [Test worker] DEBUG org.apache.xml.security.transforms.Transforms - Perform the (0)th http://www.w3.org/2000/09/xmldsig#enveloped-signature transform
14:58:09.501 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Transform", "null")
14:58:09.501 [Test worker] DEBUG org.apache.xml.security.transforms.Transforms - Perform the (1)th http://www.w3.org/2001/10/xml-exc-c14n# transform
14:58:09.501 [Test worker] DEBUG org.apache.xml.security.utils.DigesterOutputStream - Pre-digested input:
14:58:09.501 [Test worker] DEBUG org.apache.xml.security.utils.DigesterOutputStream - <saml2:Assertion xmlns:saml2="urn:oasis:names:tc:SAML:2.0:assertion" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" ID="some-assertion-id" IssueInstant="2018-04-03T13:58:09.499Z" Version="2.0" xsi:type="saml2:AssertionType"><saml2:Issuer>a-test-entity</saml2:Issuer><saml2:Subject xsi:type="saml2:SubjectType"><saml2:NameID Format="urn:oasis:names:tc:SAML:2.0:nameid-format:persistent"></saml2:NameID><saml2:SubjectConfirmation Method="urn:oasis:names:tc:SAML:2.0:cm:bearer" xsi:type="saml2:SubjectConfirmationType"><saml2:SubjectConfirmationData InResponseTo="default-request-id" NotOnOrAfter="2018-04-03T14:13:09.499Z" Recipient="https://signin.service.gov.uk" xsi:type="saml2:SubjectConfirmationDataType"></saml2:SubjectConfirmationData></saml2:SubjectConfirmation></saml2:Subject><saml2:Conditions xsi:type="saml2:ConditionsType"><saml2:AudienceRestriction xsi:type="saml2:AudienceRestrictionType"><saml2:Audience>https://signin.service.gov.uk</saml2:Audience></saml2:AudienceRestriction></saml2:Conditions></saml2:Assertion>
14:58:09.501 [Test worker] DEBUG org.apache.xml.security.utils.SignerOutputStream - Canonicalized SignedInfo:
14:58:09.501 [Test worker] DEBUG org.apache.xml.security.utils.SignerOutputStream - <ds:SignedInfo xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
<ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"></ds:CanonicalizationMethod>
<ds:SignatureMethod Algorithm="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256"></ds:SignatureMethod>
<ds:Reference URI="#some-assertion-id">
<ds:Transforms>
<ds:Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"></ds:Transform>
<ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"></ds:Transform>
</ds:Transforms>
<ds:DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256"></ds:DigestMethod>
<ds:DigestValue>v/6+CexuNB4i4jj4U1htPTR1jZ/FCT5B6cGxYFDZbh0=</ds:DigestValue>
</ds:Reference>
</ds:SignedInfo>
14:58:09.506 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Transform", "null")
14:58:09.506 [Test worker] DEBUG org.opensaml.saml.security.impl.SAMLSignatureProfileValidator - Saw Enveloped signature transform
14:58:09.506 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Transform", "null")
14:58:09.506 [Test worker] DEBUG org.opensaml.saml.security.impl.SAMLSignatureProfileValidator - Saw Exclusive C14N signature transform
14:58:09.507 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine - Performing signature algorithm whitelist/blacklist validation using params from CriteriaSet
14:58:09.507 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.SignatureAlgorithmValidator - Validating SignedInfo/SignatureMethod/@Algorithm against whitelist/blacklist: http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.507 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.SignatureAlgorithmValidator - Validating algorithm URI against whitelist and blacklist: algorithm: http://www.w3.org/2001/04/xmldsig-more#rsa-sha256, whitelist: [http://www.w3.org/2001/04/xmldsig-more#rsa-sha512, http://www.w3.org/2000/09/xmldsig#sha1, http://www.w3.org/2001/04/xmlenc#sha512, http://www.w3.org/2001/04/xmldsig-more#rsa-sha256, http://www.w3.org/2001/04/xmlenc#sha256, http://www.w3.org/2000/09/xmldsig#rsa-sha1], blacklist: []
14:58:09.507 [Test worker] DEBUG org.opensaml.xmlsec.algorithm.AlgorithmSupport - Saw non-null algorithm blacklist: []
14:58:09.507 [Test worker] DEBUG org.opensaml.xmlsec.algorithm.AlgorithmSupport - Algorithm passed blacklist validation: http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.507 [Test worker] DEBUG org.opensaml.xmlsec.algorithm.AlgorithmSupport - Saw non-null algorithm whitelist: [http://www.w3.org/2001/04/xmldsig-more#rsa-sha512, http://www.w3.org/2000/09/xmldsig#sha1, http://www.w3.org/2001/04/xmlenc#sha512, http://www.w3.org/2001/04/xmldsig-more#rsa-sha256, http://www.w3.org/2001/04/xmlenc#sha256, http://www.w3.org/2000/09/xmldsig#rsa-sha1]
14:58:09.507 [Test worker] DEBUG org.opensaml.xmlsec.algorithm.AlgorithmSupport - Algorithm passed whitelist validation: http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.507 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.SignatureAlgorithmValidator - Validating SignedInfo/Reference/DigestMethod/@Algorithm against whitelist/blacklist: http://www.w3.org/2001/04/xmlenc#sha256
14:58:09.507 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.SignatureAlgorithmValidator - Validating algorithm URI against whitelist and blacklist: algorithm: http://www.w3.org/2001/04/xmlenc#sha256, whitelist: [http://www.w3.org/2001/04/xmldsig-more#rsa-sha512, http://www.w3.org/2000/09/xmldsig#sha1, http://www.w3.org/2001/04/xmlenc#sha512, http://www.w3.org/2001/04/xmldsig-more#rsa-sha256, http://www.w3.org/2001/04/xmlenc#sha256, http://www.w3.org/2000/09/xmldsig#rsa-sha1], blacklist: []
14:58:09.507 [Test worker] DEBUG org.opensaml.xmlsec.algorithm.AlgorithmSupport - Saw non-null algorithm blacklist: []
14:58:09.507 [Test worker] DEBUG org.opensaml.xmlsec.algorithm.AlgorithmSupport - Algorithm passed blacklist validation: http://www.w3.org/2001/04/xmlenc#sha256
14:58:09.507 [Test worker] DEBUG org.opensaml.xmlsec.algorithm.AlgorithmSupport - Saw non-null algorithm whitelist: [http://www.w3.org/2001/04/xmldsig-more#rsa-sha512, http://www.w3.org/2000/09/xmldsig#sha1, http://www.w3.org/2001/04/xmlenc#sha512, http://www.w3.org/2001/04/xmldsig-more#rsa-sha256, http://www.w3.org/2001/04/xmlenc#sha256, http://www.w3.org/2000/09/xmldsig#rsa-sha1]
14:58:09.507 [Test worker] DEBUG org.opensaml.xmlsec.algorithm.AlgorithmSupport - Algorithm passed whitelist validation: http://www.w3.org/2001/04/xmlenc#sha256
14:58:09.508 [Test worker] DEBUG org.opensaml.saml.security.impl.MetadataCredentialResolver - Resolving credentials from metadata using entityID: https://signin.service.gov.uk, role: {urn:oasis:names:tc:SAML:2.0:metadata}SPSSODescriptor, protocol: null, usage: SIGNING
14:58:09.508 [Test worker] DEBUG org.opensaml.saml.security.impl.MetadataCredentialResolver - Retrieving role descriptor metadata for entity 'https://signin.service.gov.uk' in role '{urn:oasis:names:tc:SAML:2.0:metadata}SPSSODescriptor' for protocol 'null'
14:58:09.508 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractBatchMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Resolved 1 candidates via EntityIdCriterion: EntityIdCriterion [id=https://signin.service.gov.uk]
14:58:09.508 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Attempting to filter candidate EntityDescriptors via resolved Predicates
14:58:09.509 [Test worker] DEBUG net.shibboleth.utilities.java.support.resolver.CriterionPredicateRegistry - Registry did not locate Predicate implementation registered for Criterion class org.opensaml.core.criterion.EntityIdCriterion
14:58:09.509 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: After predicate filtering 1 EntityDescriptors remain
14:58:09.509 [Test worker] DEBUG org.opensaml.saml.security.impl.MetadataCredentialResolver - Found no cached credentials in KeyDescriptor object metadata, resolving from KeyInfo
14:58:09.511 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Found 1 key names: [signing_one]
14:58:09.511 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Processing KeyInfo child with QName: {http://www.w3.org/2000/09/xmldsig#}KeyName
14:58:09.511 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.RSAKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}KeyName, skipping
14:58:09.511 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.DSAKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}KeyName, skipping
14:58:09.511 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.DEREncodedKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}KeyName, skipping
14:58:09.511 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}KeyName, skipping
14:58:09.511 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - KeyName signing_one did not independently produce a credential based on any registered providers
14:58:09.511 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Processing KeyInfo child with QName: {http://www.w3.org/2000/09/xmldsig#}X509Data
14:58:09.511 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.RSAKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}X509Data, skipping
14:58:09.511 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.DSAKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}X509Data, skipping
14:58:09.511 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.DEREncodedKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}X509Data, skipping
14:58:09.511 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Processing KeyInfo child {http://www.w3.org/2000/09/xmldsig#}X509Data with provider org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider
14:58:09.511 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider - Attempting to extract credential from an X509Data
14:58:09.513 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider - Found 1 X509Certificates
14:58:09.513 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider - Found 0 X509CRLs
14:58:09.513 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider - Single certificate was present, treating as end-entity certificate
14:58:09.513 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Credentials successfully extracted from child {http://www.w3.org/2000/09/xmldsig#}X509Data by provider org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider
14:58:09.513 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - A total of 1 credentials were resolved
14:58:09.513 [Test worker] DEBUG org.opensaml.security.credential.criteria.impl.EvaluableCredentialCriteriaRegistry - Registry could not locate evaluable criteria for criteria class org.opensaml.xmlsec.keyinfo.KeyInfoCriterion
14:58:09.514 [Test worker] DEBUG org.opensaml.saml.security.impl.MetadataCredentialResolver - Found no cached credentials in KeyDescriptor object metadata, resolving from KeyInfo
14:58:09.514 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Found 1 key names: [signing_two]
14:58:09.514 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Processing KeyInfo child with QName: {http://www.w3.org/2000/09/xmldsig#}KeyName
14:58:09.514 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.RSAKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}KeyName, skipping
14:58:09.514 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.DSAKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}KeyName, skipping
14:58:09.514 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.DEREncodedKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}KeyName, skipping
14:58:09.514 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}KeyName, skipping
14:58:09.514 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - KeyName signing_two did not independently produce a credential based on any registered providers
14:58:09.514 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Processing KeyInfo child with QName: {http://www.w3.org/2000/09/xmldsig#}X509Data
14:58:09.514 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.RSAKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}X509Data, skipping
14:58:09.514 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.DSAKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}X509Data, skipping
14:58:09.514 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.DEREncodedKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}X509Data, skipping
14:58:09.514 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Processing KeyInfo child {http://www.w3.org/2000/09/xmldsig#}X509Data with provider org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider
14:58:09.514 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider - Attempting to extract credential from an X509Data
14:58:09.514 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider - Found 1 X509Certificates
14:58:09.514 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider - Found 0 X509CRLs
14:58:09.514 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider - Single certificate was present, treating as end-entity certificate
14:58:09.514 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Credentials successfully extracted from child {http://www.w3.org/2000/09/xmldsig#}X509Data by provider org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider
14:58:09.514 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - A total of 1 credentials were resolved
14:58:09.514 [Test worker] DEBUG org.opensaml.security.credential.criteria.impl.EvaluableCredentialCriteriaRegistry - Registry could not locate evaluable criteria for criteria class org.opensaml.xmlsec.keyinfo.KeyInfoCriterion
14:58:09.514 [Test worker] DEBUG org.opensaml.security.credential.criteria.impl.EvaluableCredentialCriteriaRegistry - Registry located evaluable criteria class org.opensaml.security.credential.criteria.impl.EvaluableKeyAlgorithmCredentialCriterion for criteria class org.opensaml.security.criteria.KeyAlgorithmCriterion
14:58:09.514 [Test worker] DEBUG org.opensaml.security.credential.criteria.impl.EvaluableCredentialCriteriaRegistry - Registry could not locate evaluable criteria for criteria class org.opensaml.saml.criterion.EntityRoleCriterion
14:58:09.514 [Test worker] DEBUG org.opensaml.security.credential.criteria.impl.EvaluableCredentialCriteriaRegistry - Registry located evaluable criteria class org.opensaml.security.credential.criteria.impl.EvaluableEntityIDCredentialCriterion for criteria class org.opensaml.core.criterion.EntityIdCriterion
14:58:09.514 [Test worker] DEBUG org.opensaml.security.credential.criteria.impl.EvaluableCredentialCriteriaRegistry - Registry located evaluable criteria class org.opensaml.security.credential.criteria.impl.EvaluableUsageCredentialCriterion for criteria class org.opensaml.security.criteria.UsageCriterion
14:58:09.514 [Test worker] DEBUG org.opensaml.security.credential.criteria.impl.EvaluableCredentialCriteriaRegistry - Registry could not locate evaluable criteria for criteria class org.opensaml.xmlsec.signature.support.SignatureValidationParametersCriterion
14:58:09.514 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine - Attempting to verify signature and establish trust using KeyInfo-derived credentials
14:58:09.514 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine - Signature contained no KeyInfo element, could not resolve verification credentials
14:58:09.514 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine - Failed to verify signature and/or establish trust using any KeyInfo-derived credentials
14:58:09.514 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.ExplicitKeySignatureTrustEngine - Attempting to verify signature using trusted credentials
14:58:09.515 [Test worker] INFO uk.gov.ida.saml.security.CertificateChainEvaluableCriterion - null
14:58:09.515 [Test worker] INFO uk.gov.ida.saml.security.CertificateChainEvaluableCriterion - null
14:58:09.515 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.ExplicitKeySignatureTrustEngine - Failed to verify signature using either KeyInfo-derived or directly trusted credentials
14:58:09.519 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Starting to unmarshall Apache XML-Security-based SignatureImpl element
14:58:09.519 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Constructing Apache XMLSignature object
14:58:09.519 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Signature", "")
14:58:09.519 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:SignedInfo", "")
14:58:09.519 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:SignatureMethod", "")
14:58:09.519 [Test worker] DEBUG org.apache.xml.security.algorithms.SignatureAlgorithm - Create URI "http://www.w3.org/2000/09/xmldsig#rsa-sha1" class "class org.apache.xml.security.algorithms.implementations.SignatureBaseRSA$SignatureRSASHA1"
14:58:09.519 [Test worker] DEBUG org.apache.xml.security.algorithms.JCEMapper - Request for URI http://www.w3.org/2000/09/xmldsig#rsa-sha1
14:58:09.519 [Test worker] DEBUG org.apache.xml.security.algorithms.implementations.SignatureBaseRSA - Created SignatureRSA using SHA1withRSA
14:58:09.519 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Adding canonicalization and signing algorithms, and HMAC output length to Signature
14:58:09.519 [Test worker] DEBUG org.opensaml.core.xml.io.AbstractXMLObjectUnmarshaller - Ignoring unknown attribute Format
14:58:09.519 [Test worker] DEBUG org.opensaml.core.xml.io.AbstractXMLObjectUnmarshaller - Ignoring unknown attribute SPNameQualifier
14:58:09.521 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Beginning refresh of metadata from 'metadata'
14:58:09.521 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Processing new metadata from 'metadata'
14:58:09.521 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Unmarshalling metadata from 'metadata'
14:58:09.522 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Starting to unmarshall Apache XML-Security-based SignatureImpl element
14:58:09.522 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Constructing Apache XMLSignature object
14:58:09.522 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Signature", "")
14:58:09.522 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:SignedInfo", "")
14:58:09.522 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:SignatureMethod", "")
14:58:09.522 [Test worker] DEBUG org.apache.xml.security.algorithms.SignatureAlgorithm - Create URI "http://www.w3.org/2001/04/xmldsig-more#rsa-sha256" class "class org.apache.xml.security.algorithms.implementations.SignatureBaseRSA$SignatureRSASHA256"
14:58:09.522 [Test worker] DEBUG org.apache.xml.security.algorithms.JCEMapper - Request for URI http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.522 [Test worker] DEBUG org.apache.xml.security.algorithms.implementations.SignatureBaseRSA - Created SignatureRSA using SHA256withRSA
14:58:09.522 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:KeyInfo", "")
14:58:09.522 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Adding canonicalization and signing algorithms, and HMAC output length to Signature
14:58:09.522 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Adding KeyInfo to Signature
14:58:09.524 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Preprocessing metadata from 'metadata'
14:58:09.525 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Releasing cached DOM for metadata from 'metadata'
14:58:09.525 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Post-processing metadata from 'metadata'
14:58:09.525 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Computing expiration time for metadata from 'metadata'
14:58:09.525 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Expiration of metadata from 'metadata' will occur at 2018-04-03T13:59:49.521Z
14:58:09.525 [Test worker] INFO org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: New metadata successfully loaded for 'metadata'
14:58:09.525 [Test worker] INFO org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Next refresh cycle for metadata provider 'metadata' will occur on '2018-04-03T14:03:09.525Z' ('2018-04-03T15:03:09.525+01:00' local time)
14:58:09.525 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Reference", "")
14:58:09.525 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Transforms", "")
14:58:09.525 [Test worker] ERROR org.opensaml.saml.security.impl.SAMLSignatureProfileValidator - Reference URI '#_af01d14f-14db-46b9-b3f7-d9d67bff7e97' did not point to SignableSAMLObject with ID '_af01d14f-14db-46b9-b3f7-d9d67bff7e96'
14:58:09.528 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Starting to unmarshall Apache XML-Security-based SignatureImpl element
14:58:09.528 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Constructing Apache XMLSignature object
14:58:09.528 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Signature", "")
14:58:09.528 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:SignedInfo", "")
14:58:09.528 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:SignatureMethod", "")
14:58:09.528 [Test worker] DEBUG org.apache.xml.security.algorithms.SignatureAlgorithm - Create URI "http://www.w3.org/2001/04/xmldsig-more#rsa-md5" class "class org.apache.xml.security.algorithms.implementations.SignatureBaseRSA$SignatureRSAMD5"
14:58:09.528 [Test worker] DEBUG org.apache.xml.security.algorithms.JCEMapper - Request for URI http://www.w3.org/2001/04/xmldsig-more#rsa-md5
14:58:09.528 [Test worker] DEBUG org.apache.xml.security.algorithms.implementations.SignatureBaseRSA - Created SignatureRSA using MD5withRSA
14:58:09.528 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Adding canonicalization and signing algorithms, and HMAC output length to Signature
14:58:09.528 [Test worker] DEBUG org.opensaml.core.xml.io.AbstractXMLObjectUnmarshaller - Ignoring unknown attribute Format
14:58:09.528 [Test worker] DEBUG org.opensaml.core.xml.io.AbstractXMLObjectUnmarshaller - Ignoring unknown attribute SPNameQualifier
14:58:09.530 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Beginning refresh of metadata from 'metadata'
14:58:09.530 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Processing new metadata from 'metadata'
14:58:09.530 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Unmarshalling metadata from 'metadata'
14:58:09.530 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Starting to unmarshall Apache XML-Security-based SignatureImpl element
14:58:09.530 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Constructing Apache XMLSignature object
14:58:09.530 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Signature", "")
14:58:09.530 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:SignedInfo", "")
14:58:09.530 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:SignatureMethod", "")
14:58:09.530 [Test worker] DEBUG org.apache.xml.security.algorithms.SignatureAlgorithm - Create URI "http://www.w3.org/2001/04/xmldsig-more#rsa-sha256" class "class org.apache.xml.security.algorithms.implementations.SignatureBaseRSA$SignatureRSASHA256"
14:58:09.530 [Test worker] DEBUG org.apache.xml.security.algorithms.JCEMapper - Request for URI http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.530 [Test worker] DEBUG org.apache.xml.security.algorithms.implementations.SignatureBaseRSA - Created SignatureRSA using SHA256withRSA
14:58:09.530 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:KeyInfo", "")
14:58:09.530 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Adding canonicalization and signing algorithms, and HMAC output length to Signature
14:58:09.530 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Adding KeyInfo to Signature
14:58:09.533 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Preprocessing metadata from 'metadata'
14:58:09.533 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Releasing cached DOM for metadata from 'metadata'
14:58:09.533 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Post-processing metadata from 'metadata'
14:58:09.533 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Computing expiration time for metadata from 'metadata'
14:58:09.533 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Expiration of metadata from 'metadata' will occur at 2018-04-03T13:59:49.529Z
14:58:09.533 [Test worker] INFO org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: New metadata successfully loaded for 'metadata'
14:58:09.533 [Test worker] INFO org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Next refresh cycle for metadata provider 'metadata' will occur on '2018-04-03T14:03:09.533Z' ('2018-04-03T15:03:09.533+01:00' local time)
14:58:09.533 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Reference", "")
14:58:09.533 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Transforms", "")
14:58:09.533 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Transform", "")
14:58:09.533 [Test worker] DEBUG org.opensaml.saml.security.impl.SAMLSignatureProfileValidator - Saw Enveloped signature transform
14:58:09.533 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Transform", "")
14:58:09.533 [Test worker] DEBUG org.opensaml.saml.security.impl.SAMLSignatureProfileValidator - Saw Exclusive C14N signature transform
14:58:09.534 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine - Performing signature algorithm whitelist/blacklist validation using params from CriteriaSet
14:58:09.534 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.SignatureAlgorithmValidator - Validating SignedInfo/SignatureMethod/@Algorithm against whitelist/blacklist: http://www.w3.org/2001/04/xmldsig-more#rsa-md5
14:58:09.534 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.SignatureAlgorithmValidator - Validating algorithm URI against whitelist and blacklist: algorithm: http://www.w3.org/2001/04/xmldsig-more#rsa-md5, whitelist: [http://www.w3.org/2001/04/xmldsig-more#rsa-sha512, http://www.w3.org/2000/09/xmldsig#sha1, http://www.w3.org/2001/04/xmlenc#sha512, http://www.w3.org/2001/04/xmldsig-more#rsa-sha256, http://www.w3.org/2001/04/xmlenc#sha256, http://www.w3.org/2000/09/xmldsig#rsa-sha1], blacklist: []
14:58:09.534 [Test worker] DEBUG org.opensaml.xmlsec.algorithm.AlgorithmSupport - Saw non-null algorithm blacklist: []
14:58:09.534 [Test worker] DEBUG org.opensaml.xmlsec.algorithm.AlgorithmSupport - Algorithm passed blacklist validation: http://www.w3.org/2001/04/xmldsig-more#rsa-md5
14:58:09.534 [Test worker] DEBUG org.opensaml.xmlsec.algorithm.AlgorithmSupport - Saw non-null algorithm whitelist: [http://www.w3.org/2001/04/xmldsig-more#rsa-sha512, http://www.w3.org/2000/09/xmldsig#sha1, http://www.w3.org/2001/04/xmlenc#sha512, http://www.w3.org/2001/04/xmldsig-more#rsa-sha256, http://www.w3.org/2001/04/xmlenc#sha256, http://www.w3.org/2000/09/xmldsig#rsa-sha1]
14:58:09.534 [Test worker] WARN org.opensaml.xmlsec.algorithm.AlgorithmSupport - Algorithm failed whitelist validation: http://www.w3.org/2001/04/xmldsig-more#rsa-md5
14:58:09.534 [Test worker] WARN org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine - XML signature failed algorithm whitelist/blacklist validation
14:58:09.535 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Beginning refresh of metadata from 'metadata'
14:58:09.535 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Processing new metadata from 'metadata'
14:58:09.535 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Unmarshalling metadata from 'metadata'
14:58:09.536 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Starting to unmarshall Apache XML-Security-based SignatureImpl element
14:58:09.536 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Constructing Apache XMLSignature object
14:58:09.536 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Signature", "")
14:58:09.536 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:SignedInfo", "")
14:58:09.536 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:SignatureMethod", "")
14:58:09.536 [Test worker] DEBUG org.apache.xml.security.algorithms.SignatureAlgorithm - Create URI "http://www.w3.org/2001/04/xmldsig-more#rsa-sha256" class "class org.apache.xml.security.algorithms.implementations.SignatureBaseRSA$SignatureRSASHA256"
14:58:09.536 [Test worker] DEBUG org.apache.xml.security.algorithms.JCEMapper - Request for URI http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.536 [Test worker] DEBUG org.apache.xml.security.algorithms.implementations.SignatureBaseRSA - Created SignatureRSA using SHA256withRSA
14:58:09.536 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:KeyInfo", "")
14:58:09.536 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Adding canonicalization and signing algorithms, and HMAC output length to Signature
14:58:09.536 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Adding KeyInfo to Signature
14:58:09.538 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Preprocessing metadata from 'metadata'
14:58:09.538 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Releasing cached DOM for metadata from 'metadata'
14:58:09.539 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Post-processing metadata from 'metadata'
14:58:09.539 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Computing expiration time for metadata from 'metadata'
14:58:09.539 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Expiration of metadata from 'metadata' will occur at 2018-04-03T13:59:49.535Z
14:58:09.539 [Test worker] INFO org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: New metadata successfully loaded for 'metadata'
14:58:09.539 [Test worker] INFO org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Next refresh cycle for metadata provider 'metadata' will occur on '2018-04-03T14:03:09.539Z' ('2018-04-03T15:03:09.539+01:00' local time)
14:58:09.539 [Test worker] DEBUG org.opensaml.saml.common.SAMLObjectSupport - Examining signed object for content references with exclusive canonicalization transform
14:58:09.539 [Test worker] DEBUG org.opensaml.saml.common.SAMLObjectSupport - Saw exclusive transform, declaring non-visible namespaces on signed object
14:58:09.540 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureMarshaller - Starting to marshall {http://www.w3.org/2000/09/xmldsig#}Signature
14:58:09.540 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureMarshaller - Creating XMLSignature object
14:58:09.540 [Test worker] DEBUG org.apache.xml.security.algorithms.SignatureAlgorithm - Create URI "http://www.w3.org/2001/04/xmldsig-more#rsa-sha256" class "class org.apache.xml.security.algorithms.implementations.SignatureBaseRSA$SignatureRSASHA256"
14:58:09.540 [Test worker] DEBUG org.apache.xml.security.algorithms.JCEMapper - Request for URI http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.540 [Test worker] DEBUG org.apache.xml.security.algorithms.implementations.SignatureBaseRSA - Created SignatureRSA using SHA256withRSA
14:58:09.540 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureMarshaller - Adding content to XMLSignature.
14:58:09.540 [Test worker] DEBUG org.apache.xml.security.transforms.Transforms - Transforms.addTransform(http://www.w3.org/2000/09/xmldsig#enveloped-signature)
14:58:09.540 [Test worker] DEBUG org.apache.xml.security.transforms.Transform - Create URI "http://www.w3.org/2000/09/xmldsig#enveloped-signature" class "class org.apache.xml.security.transforms.implementations.TransformEnvelopedSignature"
14:58:09.540 [Test worker] DEBUG org.apache.xml.security.transforms.Transform - The NodeList is null
14:58:09.540 [Test worker] DEBUG org.apache.xml.security.transforms.Transforms - Transforms.addTransform(http://www.w3.org/2000/09/xmldsig#enveloped-signature)
14:58:09.540 [Test worker] DEBUG org.apache.xml.security.transforms.Transforms - Transforms.addTransform(http://www.w3.org/2001/10/xml-exc-c14n#)
14:58:09.540 [Test worker] DEBUG org.apache.xml.security.transforms.Transform - Create URI "http://www.w3.org/2001/10/xml-exc-c14n#" class "class org.apache.xml.security.transforms.implementations.TransformC14NExclusive"
14:58:09.540 [Test worker] DEBUG org.apache.xml.security.transforms.Transform - The NodeList is null
14:58:09.540 [Test worker] DEBUG org.apache.xml.security.transforms.Transforms - Transforms.addTransform(http://www.w3.org/2001/10/xml-exc-c14n#)
14:58:09.540 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Transform", "null")
14:58:09.540 [Test worker] DEBUG org.opensaml.saml.common.SAMLObjectContentReference - Adding list of inclusive namespaces for signature exclusive canonicalization transform
14:58:09.540 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureMarshaller - Creating Signature DOM element
14:58:09.541 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Transform", "null")
14:58:09.541 [Test worker] DEBUG org.opensaml.saml.security.impl.SAMLSignatureProfileValidator - Saw Enveloped signature transform
14:58:09.541 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Transform", "null")
14:58:09.541 [Test worker] DEBUG org.opensaml.saml.security.impl.SAMLSignatureProfileValidator - Saw Exclusive C14N signature transform
14:58:09.541 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine - Performing signature algorithm whitelist/blacklist validation using params from CriteriaSet
14:58:09.541 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.SignatureAlgorithmValidator - Validating SignedInfo/SignatureMethod/@Algorithm against whitelist/blacklist: http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.541 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.SignatureAlgorithmValidator - Validating algorithm URI against whitelist and blacklist: algorithm: http://www.w3.org/2001/04/xmldsig-more#rsa-sha256, whitelist: [http://www.w3.org/2001/04/xmldsig-more#rsa-sha512, http://www.w3.org/2000/09/xmldsig#sha1, http://www.w3.org/2001/04/xmlenc#sha512, http://www.w3.org/2001/04/xmldsig-more#rsa-sha256, http://www.w3.org/2001/04/xmlenc#sha256, http://www.w3.org/2000/09/xmldsig#rsa-sha1], blacklist: []
14:58:09.541 [Test worker] DEBUG org.opensaml.xmlsec.algorithm.AlgorithmSupport - Saw non-null algorithm blacklist: []
14:58:09.541 [Test worker] DEBUG org.opensaml.xmlsec.algorithm.AlgorithmSupport - Algorithm passed blacklist validation: http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.541 [Test worker] DEBUG org.opensaml.xmlsec.algorithm.AlgorithmSupport - Saw non-null algorithm whitelist: [http://www.w3.org/2001/04/xmldsig-more#rsa-sha512, http://www.w3.org/2000/09/xmldsig#sha1, http://www.w3.org/2001/04/xmlenc#sha512, http://www.w3.org/2001/04/xmldsig-more#rsa-sha256, http://www.w3.org/2001/04/xmlenc#sha256, http://www.w3.org/2000/09/xmldsig#rsa-sha1]
14:58:09.541 [Test worker] DEBUG org.opensaml.xmlsec.algorithm.AlgorithmSupport - Algorithm passed whitelist validation: http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.541 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.SignatureAlgorithmValidator - Validating SignedInfo/Reference/DigestMethod/@Algorithm against whitelist/blacklist: http://www.w3.org/2001/04/xmlenc#sha256
14:58:09.541 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.SignatureAlgorithmValidator - Validating algorithm URI against whitelist and blacklist: algorithm: http://www.w3.org/2001/04/xmlenc#sha256, whitelist: [http://www.w3.org/2001/04/xmldsig-more#rsa-sha512, http://www.w3.org/2000/09/xmldsig#sha1, http://www.w3.org/2001/04/xmlenc#sha512, http://www.w3.org/2001/04/xmldsig-more#rsa-sha256, http://www.w3.org/2001/04/xmlenc#sha256, http://www.w3.org/2000/09/xmldsig#rsa-sha1], blacklist: []
14:58:09.541 [Test worker] DEBUG org.opensaml.xmlsec.algorithm.AlgorithmSupport - Saw non-null algorithm blacklist: []
14:58:09.541 [Test worker] DEBUG org.opensaml.xmlsec.algorithm.AlgorithmSupport - Algorithm passed blacklist validation: http://www.w3.org/2001/04/xmlenc#sha256
14:58:09.541 [Test worker] DEBUG org.opensaml.xmlsec.algorithm.AlgorithmSupport - Saw non-null algorithm whitelist: [http://www.w3.org/2001/04/xmldsig-more#rsa-sha512, http://www.w3.org/2000/09/xmldsig#sha1, http://www.w3.org/2001/04/xmlenc#sha512, http://www.w3.org/2001/04/xmldsig-more#rsa-sha256, http://www.w3.org/2001/04/xmlenc#sha256, http://www.w3.org/2000/09/xmldsig#rsa-sha1]
14:58:09.541 [Test worker] DEBUG org.opensaml.xmlsec.algorithm.AlgorithmSupport - Algorithm passed whitelist validation: http://www.w3.org/2001/04/xmlenc#sha256
14:58:09.541 [Test worker] DEBUG org.opensaml.saml.security.impl.MetadataCredentialResolver - Resolving credentials from metadata using entityID: https://signin.service.gov.uk, role: {urn:oasis:names:tc:SAML:2.0:metadata}SPSSODescriptor, protocol: null, usage: SIGNING
14:58:09.541 [Test worker] DEBUG org.opensaml.saml.security.impl.MetadataCredentialResolver - Retrieving role descriptor metadata for entity 'https://signin.service.gov.uk' in role '{urn:oasis:names:tc:SAML:2.0:metadata}SPSSODescriptor' for protocol 'null'
14:58:09.541 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractBatchMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Resolved 1 candidates via EntityIdCriterion: EntityIdCriterion [id=https://signin.service.gov.uk]
14:58:09.541 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Attempting to filter candidate EntityDescriptors via resolved Predicates
14:58:09.541 [Test worker] DEBUG net.shibboleth.utilities.java.support.resolver.CriterionPredicateRegistry - Registry did not locate Predicate implementation registered for Criterion class org.opensaml.core.criterion.EntityIdCriterion
14:58:09.541 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: After predicate filtering 1 EntityDescriptors remain
14:58:09.541 [Test worker] DEBUG org.opensaml.saml.security.impl.MetadataCredentialResolver - Found no cached credentials in KeyDescriptor object metadata, resolving from KeyInfo
14:58:09.541 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Found 1 key names: [signing_one]
14:58:09.541 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Processing KeyInfo child with QName: {http://www.w3.org/2000/09/xmldsig#}KeyName
14:58:09.541 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.RSAKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}KeyName, skipping
14:58:09.541 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.DSAKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}KeyName, skipping
14:58:09.541 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.DEREncodedKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}KeyName, skipping
14:58:09.541 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}KeyName, skipping
14:58:09.541 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - KeyName signing_one did not independently produce a credential based on any registered providers
14:58:09.541 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Processing KeyInfo child with QName: {http://www.w3.org/2000/09/xmldsig#}X509Data
14:58:09.541 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.RSAKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}X509Data, skipping
14:58:09.541 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.DSAKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}X509Data, skipping
14:58:09.541 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.DEREncodedKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}X509Data, skipping
14:58:09.541 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Processing KeyInfo child {http://www.w3.org/2000/09/xmldsig#}X509Data with provider org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider
14:58:09.541 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider - Attempting to extract credential from an X509Data
14:58:09.541 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider - Found 1 X509Certificates
14:58:09.541 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider - Found 0 X509CRLs
14:58:09.541 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider - Single certificate was present, treating as end-entity certificate
14:58:09.541 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Credentials successfully extracted from child {http://www.w3.org/2000/09/xmldsig#}X509Data by provider org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider
14:58:09.542 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - A total of 1 credentials were resolved
14:58:09.542 [Test worker] DEBUG org.opensaml.security.credential.criteria.impl.EvaluableCredentialCriteriaRegistry - Registry could not locate evaluable criteria for criteria class org.opensaml.xmlsec.keyinfo.KeyInfoCriterion
14:58:09.542 [Test worker] DEBUG org.opensaml.saml.security.impl.MetadataCredentialResolver - Found no cached credentials in KeyDescriptor object metadata, resolving from KeyInfo
14:58:09.542 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Found 1 key names: [signing_two]
14:58:09.542 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Processing KeyInfo child with QName: {http://www.w3.org/2000/09/xmldsig#}KeyName
14:58:09.542 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.RSAKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}KeyName, skipping
14:58:09.542 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.DSAKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}KeyName, skipping
14:58:09.542 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.DEREncodedKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}KeyName, skipping
14:58:09.542 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}KeyName, skipping
14:58:09.542 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - KeyName signing_two did not independently produce a credential based on any registered providers
14:58:09.542 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Processing KeyInfo child with QName: {http://www.w3.org/2000/09/xmldsig#}X509Data
14:58:09.542 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.RSAKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}X509Data, skipping
14:58:09.542 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.DSAKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}X509Data, skipping
14:58:09.542 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.DEREncodedKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}X509Data, skipping
14:58:09.542 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Processing KeyInfo child {http://www.w3.org/2000/09/xmldsig#}X509Data with provider org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider
14:58:09.542 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider - Attempting to extract credential from an X509Data
14:58:09.542 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider - Found 1 X509Certificates
14:58:09.542 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider - Found 0 X509CRLs
14:58:09.542 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider - Single certificate was present, treating as end-entity certificate
14:58:09.542 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Credentials successfully extracted from child {http://www.w3.org/2000/09/xmldsig#}X509Data by provider org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider
14:58:09.542 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - A total of 1 credentials were resolved
14:58:09.542 [Test worker] DEBUG org.opensaml.security.credential.criteria.impl.EvaluableCredentialCriteriaRegistry - Registry could not locate evaluable criteria for criteria class org.opensaml.xmlsec.keyinfo.KeyInfoCriterion
14:58:09.542 [Test worker] DEBUG org.opensaml.security.credential.criteria.impl.EvaluableCredentialCriteriaRegistry - Registry located evaluable criteria class org.opensaml.security.credential.criteria.impl.EvaluableKeyAlgorithmCredentialCriterion for criteria class org.opensaml.security.criteria.KeyAlgorithmCriterion
14:58:09.542 [Test worker] DEBUG org.opensaml.security.credential.criteria.impl.EvaluableCredentialCriteriaRegistry - Registry could not locate evaluable criteria for criteria class org.opensaml.xmlsec.signature.support.SignatureValidationParametersCriterion
14:58:09.542 [Test worker] DEBUG org.opensaml.security.credential.criteria.impl.EvaluableCredentialCriteriaRegistry - Registry could not locate evaluable criteria for criteria class org.opensaml.saml.criterion.EntityRoleCriterion
14:58:09.542 [Test worker] DEBUG org.opensaml.security.credential.criteria.impl.EvaluableCredentialCriteriaRegistry - Registry located evaluable criteria class org.opensaml.security.credential.criteria.impl.EvaluableEntityIDCredentialCriterion for criteria class org.opensaml.core.criterion.EntityIdCriterion
14:58:09.542 [Test worker] DEBUG org.opensaml.security.credential.criteria.impl.EvaluableCredentialCriteriaRegistry - Registry located evaluable criteria class org.opensaml.security.credential.criteria.impl.EvaluableUsageCredentialCriterion for criteria class org.opensaml.security.criteria.UsageCriterion
14:58:09.542 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine - Attempting to verify signature and establish trust using KeyInfo-derived credentials
14:58:09.542 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine - Signature contained no KeyInfo element, could not resolve verification credentials
14:58:09.542 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine - Failed to verify signature and/or establish trust using any KeyInfo-derived credentials
14:58:09.542 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.ExplicitKeySignatureTrustEngine - Attempting to verify signature using trusted credentials
14:58:09.542 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.SignatureValidationProvider - Using a validation provider of implementation: org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl
14:58:09.542 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl - Attempting to validate signature using key from supplied credential
14:58:09.542 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl - Accessing XMLSignature object
14:58:09.542 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl - Validating signature with signature algorithm URI: http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.542 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl - Validation credential key algorithm 'RSA', key instance class 'sun.security.rsa.RSAPublicKeyImpl'
14:58:09.542 [Test worker] DEBUG org.apache.xml.security.signature.XMLSignature - signatureMethodURI = http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.542 [Test worker] DEBUG org.apache.xml.security.signature.XMLSignature - jceSigAlgorithm    = SHA256withRSA
14:58:09.542 [Test worker] DEBUG org.apache.xml.security.signature.XMLSignature - jceSigProvider     = SunRsaSign
14:58:09.542 [Test worker] DEBUG org.apache.xml.security.signature.XMLSignature - PublicKey = Sun RSA public key, 2048 bits
  modulus: 28467384286610047790193967127304893209875662073359073774942581887283294160411802792536000169074125867401657852845534832793769124538137509051085458992249703565905800716923469070088999833187597827249635751958059531826825548351550672656743291446712694950734859083390405057337382681249786253663803850894222495451772846819106909725348681532555575251254532621460955520037451236754600370663610020100071967450597633410807407856885679555171801752996449368937848292397495047606491311420123124369147269540780582967348884118030902273439053917167556571322555439984456875509620738152097423039916831980190525678318992037010963562067
  public exponent: 65537
14:58:09.543 [Test worker] DEBUG org.apache.xml.security.utils.SignerOutputStream - Canonicalized SignedInfo:
14:58:09.543 [Test worker] DEBUG org.apache.xml.security.utils.SignerOutputStream - <ds:SignedInfo xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
<ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"></ds:CanonicalizationMethod>
<ds:SignatureMethod Algorithm="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256"></ds:SignatureMethod>
<ds:Reference URI="#some-assertion-id">
<ds:Transforms>
<ds:Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"></ds:Transform>
<ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"></ds:Transform>
</ds:Transforms>
<ds:DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256"></ds:DigestMethod>
<ds:DigestValue></ds:DigestValue>
</ds:Reference>
</ds:SignedInfo>
14:58:09.543 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine - Signature validation using candidate validation credential failed
org.opensaml.xmlsec.signature.support.SignatureException: Unable to evaluate key against signature
	at org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl.validate(ApacheSantuarioSignatureValidationProviderImpl.java:75)
	at org.opensaml.xmlsec.signature.support.SignatureValidator.validate(SignatureValidator.java:54)
	at org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine.verifySignature(BaseSignatureTrustEngine.java:242)
	at org.opensaml.xmlsec.signature.support.impl.ExplicitKeySignatureTrustEngine.doValidate(ExplicitKeySignatureTrustEngine.java:119)
	at org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine.validate(BaseSignatureTrustEngine.java:105)
	at org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine.validate(BaseSignatureTrustEngine.java:62)
	at uk.gov.ida.saml.security.SignatureValidator.validate(SignatureValidator.java:48)
	at uk.gov.ida.saml.security.MetadataBackedSignatureValidatorTest.shouldNotAcceptUnsignedAssertions(MetadataBackedSignatureValidatorTest.java:154)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.mockito.internal.runners.JUnit45AndHigherRunnerImpl.run(JUnit45AndHigherRunnerImpl.java:37)
	at org.mockito.runners.MockitoJUnitRunner.run(MockitoJUnitRunner.java:62)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.runTestClass(JUnitTestClassExecuter.java:114)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.execute(JUnitTestClassExecuter.java:57)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassProcessor.processTestClass(JUnitTestClassProcessor.java:66)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:51)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)
	at com.sun.proxy.$Proxy1.processTestClass(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:109)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:146)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:128)
	at org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:404)
	at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)
	at org.gradle.internal.concurrent.StoppableExecutorImpl$1.run(StoppableExecutorImpl.java:46)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.apache.xml.security.signature.XMLSignatureException: Signature length not correct: got 0 but was expecting 256
	at org.apache.xml.security.algorithms.implementations.SignatureBaseRSA.engineVerify(SignatureBaseRSA.java:92)
	at org.apache.xml.security.algorithms.SignatureAlgorithm.verify(SignatureAlgorithm.java:301)
	at org.apache.xml.security.signature.XMLSignature.checkSignatureValue(XMLSignature.java:759)
	at org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl.validate(ApacheSantuarioSignatureValidationProviderImpl.java:70)
	... 55 common frames omitted
Caused by: java.security.SignatureException: Signature length not correct: got 0 but was expecting 256
	at sun.security.rsa.RSASignature.engineVerify(RSASignature.java:189)
	at java.security.Signature$Delegate.engineVerify(Signature.java:1223)
	at java.security.Signature.verify(Signature.java:656)
	at org.apache.xml.security.algorithms.implementations.SignatureBaseRSA.engineVerify(SignatureBaseRSA.java:90)
	... 58 common frames omitted
14:58:09.543 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.SignatureValidationProvider - Using a validation provider of implementation: org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl
14:58:09.543 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl - Attempting to validate signature using key from supplied credential
14:58:09.543 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl - Accessing XMLSignature object
14:58:09.543 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl - Validating signature with signature algorithm URI: http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.543 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl - Validation credential key algorithm 'RSA', key instance class 'sun.security.rsa.RSAPublicKeyImpl'
14:58:09.543 [Test worker] DEBUG org.apache.xml.security.signature.XMLSignature - signatureMethodURI = http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.543 [Test worker] DEBUG org.apache.xml.security.signature.XMLSignature - jceSigAlgorithm    = SHA256withRSA
14:58:09.543 [Test worker] DEBUG org.apache.xml.security.signature.XMLSignature - jceSigProvider     = SunRsaSign
14:58:09.543 [Test worker] DEBUG org.apache.xml.security.signature.XMLSignature - PublicKey = Sun RSA public key, 2048 bits
  modulus: 25998853806074907922736536937144192810524126200249845203941498583957653002742012081024851371701765572997964410773213417627351163207763916839110493186842727422105108695847327425148517951272422220366166787137233228070807559064518855586460848701406111149789270506162893565711430566183449983164245901187970559589037577615433138971451632097660130400984021863805390812022721378617499178820332971373486312850645816708350643062789774826141511451391051956832621350686324922826347973370110492133155768037641842259670336438666133242469461046538870604952985498558023280525040790594650803517622806143906741297205357832508919936977
  public exponent: 65537
14:58:09.544 [Test worker] DEBUG org.apache.xml.security.utils.SignerOutputStream - Canonicalized SignedInfo:
14:58:09.544 [Test worker] DEBUG org.apache.xml.security.utils.SignerOutputStream - <ds:SignedInfo xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
<ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"></ds:CanonicalizationMethod>
<ds:SignatureMethod Algorithm="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256"></ds:SignatureMethod>
<ds:Reference URI="#some-assertion-id">
<ds:Transforms>
<ds:Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"></ds:Transform>
<ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"></ds:Transform>
</ds:Transforms>
<ds:DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256"></ds:DigestMethod>
<ds:DigestValue></ds:DigestValue>
</ds:Reference>
</ds:SignedInfo>
14:58:09.544 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine - Signature validation using candidate validation credential failed
org.opensaml.xmlsec.signature.support.SignatureException: Unable to evaluate key against signature
	at org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl.validate(ApacheSantuarioSignatureValidationProviderImpl.java:75)
	at org.opensaml.xmlsec.signature.support.SignatureValidator.validate(SignatureValidator.java:54)
	at org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine.verifySignature(BaseSignatureTrustEngine.java:242)
	at org.opensaml.xmlsec.signature.support.impl.ExplicitKeySignatureTrustEngine.doValidate(ExplicitKeySignatureTrustEngine.java:119)
	at org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine.validate(BaseSignatureTrustEngine.java:105)
	at org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine.validate(BaseSignatureTrustEngine.java:62)
	at uk.gov.ida.saml.security.SignatureValidator.validate(SignatureValidator.java:48)
	at uk.gov.ida.saml.security.MetadataBackedSignatureValidatorTest.shouldNotAcceptUnsignedAssertions(MetadataBackedSignatureValidatorTest.java:154)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.mockito.internal.runners.JUnit45AndHigherRunnerImpl.run(JUnit45AndHigherRunnerImpl.java:37)
	at org.mockito.runners.MockitoJUnitRunner.run(MockitoJUnitRunner.java:62)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.runTestClass(JUnitTestClassExecuter.java:114)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.execute(JUnitTestClassExecuter.java:57)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassProcessor.processTestClass(JUnitTestClassProcessor.java:66)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:51)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)
	at com.sun.proxy.$Proxy1.processTestClass(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:109)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:146)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:128)
	at org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:404)
	at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)
	at org.gradle.internal.concurrent.StoppableExecutorImpl$1.run(StoppableExecutorImpl.java:46)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.apache.xml.security.signature.XMLSignatureException: Signature length not correct: got 0 but was expecting 256
	at org.apache.xml.security.algorithms.implementations.SignatureBaseRSA.engineVerify(SignatureBaseRSA.java:92)
	at org.apache.xml.security.algorithms.SignatureAlgorithm.verify(SignatureAlgorithm.java:301)
	at org.apache.xml.security.signature.XMLSignature.checkSignatureValue(XMLSignature.java:759)
	at org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl.validate(ApacheSantuarioSignatureValidationProviderImpl.java:70)
	... 55 common frames omitted
Caused by: java.security.SignatureException: Signature length not correct: got 0 but was expecting 256
	at sun.security.rsa.RSASignature.engineVerify(RSASignature.java:189)
	at java.security.Signature$Delegate.engineVerify(Signature.java:1223)
	at java.security.Signature.verify(Signature.java:656)
	at org.apache.xml.security.algorithms.implementations.SignatureBaseRSA.engineVerify(SignatureBaseRSA.java:90)
	... 58 common frames omitted
14:58:09.544 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.ExplicitKeySignatureTrustEngine - Failed to verify signature using either KeyInfo-derived or directly trusted credentials
14:58:09.545 [Test worker] DEBUG org.opensaml.saml.common.SAMLObjectSupport - Examining signed object for content references with exclusive canonicalization transform
14:58:09.546 [Test worker] DEBUG org.opensaml.saml.common.SAMLObjectSupport - Saw exclusive transform, declaring non-visible namespaces on signed object
14:58:09.546 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureMarshaller - Starting to marshall {http://www.w3.org/2000/09/xmldsig#}Signature
14:58:09.546 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureMarshaller - Creating XMLSignature object
14:58:09.546 [Test worker] DEBUG org.apache.xml.security.algorithms.SignatureAlgorithm - Create URI "http://www.w3.org/2001/04/xmldsig-more#rsa-sha256" class "class org.apache.xml.security.algorithms.implementations.SignatureBaseRSA$SignatureRSASHA256"
14:58:09.546 [Test worker] DEBUG org.apache.xml.security.algorithms.JCEMapper - Request for URI http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.546 [Test worker] DEBUG org.apache.xml.security.algorithms.implementations.SignatureBaseRSA - Created SignatureRSA using SHA256withRSA
14:58:09.546 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureMarshaller - Adding content to XMLSignature.
14:58:09.546 [Test worker] DEBUG org.apache.xml.security.transforms.Transforms - Transforms.addTransform(http://www.w3.org/2000/09/xmldsig#enveloped-signature)
14:58:09.546 [Test worker] DEBUG org.apache.xml.security.transforms.Transform - Create URI "http://www.w3.org/2000/09/xmldsig#enveloped-signature" class "class org.apache.xml.security.transforms.implementations.TransformEnvelopedSignature"
14:58:09.546 [Test worker] DEBUG org.apache.xml.security.transforms.Transform - The NodeList is null
14:58:09.546 [Test worker] DEBUG org.apache.xml.security.transforms.Transforms - Transforms.addTransform(http://www.w3.org/2000/09/xmldsig#enveloped-signature)
14:58:09.546 [Test worker] DEBUG org.apache.xml.security.transforms.Transforms - Transforms.addTransform(http://www.w3.org/2001/10/xml-exc-c14n#)
14:58:09.546 [Test worker] DEBUG org.apache.xml.security.transforms.Transform - Create URI "http://www.w3.org/2001/10/xml-exc-c14n#" class "class org.apache.xml.security.transforms.implementations.TransformC14NExclusive"
14:58:09.546 [Test worker] DEBUG org.apache.xml.security.transforms.Transform - The NodeList is null
14:58:09.546 [Test worker] DEBUG org.apache.xml.security.transforms.Transforms - Transforms.addTransform(http://www.w3.org/2001/10/xml-exc-c14n#)
14:58:09.546 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Transform", "null")
14:58:09.546 [Test worker] DEBUG org.opensaml.saml.common.SAMLObjectContentReference - Adding list of inclusive namespaces for signature exclusive canonicalization transform
14:58:09.546 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureMarshaller - Creating Signature DOM element
14:58:09.546 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.Signer - Using a signer of implemenation: org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignerProviderImpl
14:58:09.546 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignerProviderImpl - Computing signature over XMLSignature object
14:58:09.546 [Test worker] DEBUG org.apache.xml.security.algorithms.JCEMapper - Request for URI http://www.w3.org/2001/04/xmlenc#sha256
14:58:09.547 [Test worker] DEBUG org.apache.xml.security.utils.resolver.ResourceResolver - I was asked to create a ResourceResolver and got 0
14:58:09.547 [Test worker] DEBUG org.apache.xml.security.utils.resolver.ResourceResolver - check resolvability by class org.apache.xml.security.utils.resolver.ResourceResolver
14:58:09.547 [Test worker] DEBUG org.apache.xml.security.utils.resolver.implementations.ResolverFragment - State I can resolve reference: "#some-assertion-id"
14:58:09.547 [Test worker] DEBUG org.apache.xml.security.utils.resolver.implementations.ResolverFragment - Try to catch an Element with ID some-assertion-id and Element was [saml2:Assertion: null]
14:58:09.547 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Transform", "null")
14:58:09.547 [Test worker] DEBUG org.apache.xml.security.transforms.Transforms - Perform the (0)th http://www.w3.org/2000/09/xmldsig#enveloped-signature transform
14:58:09.547 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Transform", "null")
14:58:09.547 [Test worker] DEBUG org.apache.xml.security.transforms.Transforms - Perform the (1)th http://www.w3.org/2001/10/xml-exc-c14n# transform
14:58:09.547 [Test worker] DEBUG org.apache.xml.security.utils.DigesterOutputStream - Pre-digested input:
14:58:09.547 [Test worker] DEBUG org.apache.xml.security.utils.DigesterOutputStream - <saml2:Assertion xmlns:saml2="urn:oasis:names:tc:SAML:2.0:assertion" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" ID="some-assertion-id" IssueInstant="2018-04-03T13:58:09.545Z" Version="2.0" xsi:type="saml2:AssertionType"><saml2:Issuer>a-test-entity</saml2:Issuer><saml2:Subject xsi:type="saml2:SubjectType"><saml2:NameID Format="urn:oasis:names:tc:SAML:2.0:nameid-format:persistent"></saml2:NameID><saml2:SubjectConfirmation Method="urn:oasis:names:tc:SAML:2.0:cm:bearer" xsi:type="saml2:SubjectConfirmationType"><saml2:SubjectConfirmationData InResponseTo="default-request-id" NotOnOrAfter="2018-04-03T14:13:09.545Z" Recipient="https://signin.service.gov.uk" xsi:type="saml2:SubjectConfirmationDataType"></saml2:SubjectConfirmationData></saml2:SubjectConfirmation></saml2:Subject><saml2:Conditions xsi:type="saml2:ConditionsType"><saml2:AudienceRestriction xsi:type="saml2:AudienceRestrictionType"><saml2:Audience>https://signin.service.gov.uk</saml2:Audience></saml2:AudienceRestriction></saml2:Conditions></saml2:Assertion>
14:58:09.547 [Test worker] DEBUG org.apache.xml.security.utils.SignerOutputStream - Canonicalized SignedInfo:
14:58:09.547 [Test worker] DEBUG org.apache.xml.security.utils.SignerOutputStream - <ds:SignedInfo xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
<ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"></ds:CanonicalizationMethod>
<ds:SignatureMethod Algorithm="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256"></ds:SignatureMethod>
<ds:Reference URI="#some-assertion-id">
<ds:Transforms>
<ds:Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"></ds:Transform>
<ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"></ds:Transform>
</ds:Transforms>
<ds:DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256"></ds:DigestMethod>
<ds:DigestValue>lXaVSdL5M3k337D+gd7bhsPQmj+nyHAWp4J9bl+ab8o=</ds:DigestValue>
</ds:Reference>
</ds:SignedInfo>
14:58:09.552 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Beginning refresh of metadata from 'metadata'
14:58:09.552 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Processing new metadata from 'metadata'
14:58:09.552 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Unmarshalling metadata from 'metadata'
14:58:09.553 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Starting to unmarshall Apache XML-Security-based SignatureImpl element
14:58:09.553 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Constructing Apache XMLSignature object
14:58:09.553 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Signature", "")
14:58:09.553 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:SignedInfo", "")
14:58:09.553 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:SignatureMethod", "")
14:58:09.553 [Test worker] DEBUG org.apache.xml.security.algorithms.SignatureAlgorithm - Create URI "http://www.w3.org/2001/04/xmldsig-more#rsa-sha256" class "class org.apache.xml.security.algorithms.implementations.SignatureBaseRSA$SignatureRSASHA256"
14:58:09.553 [Test worker] DEBUG org.apache.xml.security.algorithms.JCEMapper - Request for URI http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.553 [Test worker] DEBUG org.apache.xml.security.algorithms.implementations.SignatureBaseRSA - Created SignatureRSA using SHA256withRSA
14:58:09.553 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:KeyInfo", "")
14:58:09.553 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Adding canonicalization and signing algorithms, and HMAC output length to Signature
14:58:09.553 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Adding KeyInfo to Signature
14:58:09.555 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Preprocessing metadata from 'metadata'
14:58:09.555 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Releasing cached DOM for metadata from 'metadata'
14:58:09.555 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Post-processing metadata from 'metadata'
14:58:09.555 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Computing expiration time for metadata from 'metadata'
14:58:09.555 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Expiration of metadata from 'metadata' will occur at 2018-04-03T13:59:49.552Z
14:58:09.555 [Test worker] INFO org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: New metadata successfully loaded for 'metadata'
14:58:09.555 [Test worker] INFO org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Next refresh cycle for metadata provider 'metadata' will occur on '2018-04-03T14:03:09.555Z' ('2018-04-03T15:03:09.555+01:00' local time)
14:58:09.555 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Transform", "null")
14:58:09.555 [Test worker] DEBUG org.opensaml.saml.security.impl.SAMLSignatureProfileValidator - Saw Enveloped signature transform
14:58:09.555 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Transform", "null")
14:58:09.555 [Test worker] DEBUG org.opensaml.saml.security.impl.SAMLSignatureProfileValidator - Saw Exclusive C14N signature transform
14:58:09.556 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine - Performing signature algorithm whitelist/blacklist validation using params from CriteriaSet
14:58:09.556 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.SignatureAlgorithmValidator - Validating SignedInfo/SignatureMethod/@Algorithm against whitelist/blacklist: http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.556 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.SignatureAlgorithmValidator - Validating algorithm URI against whitelist and blacklist: algorithm: http://www.w3.org/2001/04/xmldsig-more#rsa-sha256, whitelist: [http://www.w3.org/2001/04/xmldsig-more#rsa-sha512, http://www.w3.org/2000/09/xmldsig#sha1, http://www.w3.org/2001/04/xmlenc#sha512, http://www.w3.org/2001/04/xmldsig-more#rsa-sha256, http://www.w3.org/2001/04/xmlenc#sha256, http://www.w3.org/2000/09/xmldsig#rsa-sha1], blacklist: []
14:58:09.556 [Test worker] DEBUG org.opensaml.xmlsec.algorithm.AlgorithmSupport - Saw non-null algorithm blacklist: []
14:58:09.556 [Test worker] DEBUG org.opensaml.xmlsec.algorithm.AlgorithmSupport - Algorithm passed blacklist validation: http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.556 [Test worker] DEBUG org.opensaml.xmlsec.algorithm.AlgorithmSupport - Saw non-null algorithm whitelist: [http://www.w3.org/2001/04/xmldsig-more#rsa-sha512, http://www.w3.org/2000/09/xmldsig#sha1, http://www.w3.org/2001/04/xmlenc#sha512, http://www.w3.org/2001/04/xmldsig-more#rsa-sha256, http://www.w3.org/2001/04/xmlenc#sha256, http://www.w3.org/2000/09/xmldsig#rsa-sha1]
14:58:09.556 [Test worker] DEBUG org.opensaml.xmlsec.algorithm.AlgorithmSupport - Algorithm passed whitelist validation: http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.556 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.SignatureAlgorithmValidator - Validating SignedInfo/Reference/DigestMethod/@Algorithm against whitelist/blacklist: http://www.w3.org/2001/04/xmlenc#sha256
14:58:09.556 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.SignatureAlgorithmValidator - Validating algorithm URI against whitelist and blacklist: algorithm: http://www.w3.org/2001/04/xmlenc#sha256, whitelist: [http://www.w3.org/2001/04/xmldsig-more#rsa-sha512, http://www.w3.org/2000/09/xmldsig#sha1, http://www.w3.org/2001/04/xmlenc#sha512, http://www.w3.org/2001/04/xmldsig-more#rsa-sha256, http://www.w3.org/2001/04/xmlenc#sha256, http://www.w3.org/2000/09/xmldsig#rsa-sha1], blacklist: []
14:58:09.556 [Test worker] DEBUG org.opensaml.xmlsec.algorithm.AlgorithmSupport - Saw non-null algorithm blacklist: []
14:58:09.556 [Test worker] DEBUG org.opensaml.xmlsec.algorithm.AlgorithmSupport - Algorithm passed blacklist validation: http://www.w3.org/2001/04/xmlenc#sha256
14:58:09.556 [Test worker] DEBUG org.opensaml.xmlsec.algorithm.AlgorithmSupport - Saw non-null algorithm whitelist: [http://www.w3.org/2001/04/xmldsig-more#rsa-sha512, http://www.w3.org/2000/09/xmldsig#sha1, http://www.w3.org/2001/04/xmlenc#sha512, http://www.w3.org/2001/04/xmldsig-more#rsa-sha256, http://www.w3.org/2001/04/xmlenc#sha256, http://www.w3.org/2000/09/xmldsig#rsa-sha1]
14:58:09.556 [Test worker] DEBUG org.opensaml.xmlsec.algorithm.AlgorithmSupport - Algorithm passed whitelist validation: http://www.w3.org/2001/04/xmlenc#sha256
14:58:09.556 [Test worker] DEBUG org.opensaml.saml.security.impl.MetadataCredentialResolver - Resolving credentials from metadata using entityID: https://signin.service.gov.uk, role: {urn:oasis:names:tc:SAML:2.0:metadata}SPSSODescriptor, protocol: null, usage: SIGNING
14:58:09.556 [Test worker] DEBUG org.opensaml.saml.security.impl.MetadataCredentialResolver - Retrieving role descriptor metadata for entity 'https://signin.service.gov.uk' in role '{urn:oasis:names:tc:SAML:2.0:metadata}SPSSODescriptor' for protocol 'null'
14:58:09.556 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractBatchMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Resolved 1 candidates via EntityIdCriterion: EntityIdCriterion [id=https://signin.service.gov.uk]
14:58:09.556 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Attempting to filter candidate EntityDescriptors via resolved Predicates
14:58:09.556 [Test worker] DEBUG net.shibboleth.utilities.java.support.resolver.CriterionPredicateRegistry - Registry did not locate Predicate implementation registered for Criterion class org.opensaml.core.criterion.EntityIdCriterion
14:58:09.556 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: After predicate filtering 1 EntityDescriptors remain
14:58:09.556 [Test worker] DEBUG org.opensaml.saml.security.impl.MetadataCredentialResolver - Found no cached credentials in KeyDescriptor object metadata, resolving from KeyInfo
14:58:09.556 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Found 1 key names: [signing_one]
14:58:09.556 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Processing KeyInfo child with QName: {http://www.w3.org/2000/09/xmldsig#}KeyName
14:58:09.556 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.RSAKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}KeyName, skipping
14:58:09.556 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.DSAKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}KeyName, skipping
14:58:09.556 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.DEREncodedKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}KeyName, skipping
14:58:09.556 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}KeyName, skipping
14:58:09.556 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - KeyName signing_one did not independently produce a credential based on any registered providers
14:58:09.556 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Processing KeyInfo child with QName: {http://www.w3.org/2000/09/xmldsig#}X509Data
14:58:09.556 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.RSAKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}X509Data, skipping
14:58:09.556 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.DSAKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}X509Data, skipping
14:58:09.556 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.DEREncodedKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}X509Data, skipping
14:58:09.556 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Processing KeyInfo child {http://www.w3.org/2000/09/xmldsig#}X509Data with provider org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider
14:58:09.556 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider - Attempting to extract credential from an X509Data
14:58:09.556 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider - Found 1 X509Certificates
14:58:09.556 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider - Found 0 X509CRLs
14:58:09.556 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider - Single certificate was present, treating as end-entity certificate
14:58:09.556 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Credentials successfully extracted from child {http://www.w3.org/2000/09/xmldsig#}X509Data by provider org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider
14:58:09.556 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - A total of 1 credentials were resolved
14:58:09.556 [Test worker] DEBUG org.opensaml.security.credential.criteria.impl.EvaluableCredentialCriteriaRegistry - Registry could not locate evaluable criteria for criteria class org.opensaml.xmlsec.keyinfo.KeyInfoCriterion
14:58:09.556 [Test worker] DEBUG org.opensaml.saml.security.impl.MetadataCredentialResolver - Found no cached credentials in KeyDescriptor object metadata, resolving from KeyInfo
14:58:09.556 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Found 1 key names: [signing_two]
14:58:09.556 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Processing KeyInfo child with QName: {http://www.w3.org/2000/09/xmldsig#}KeyName
14:58:09.556 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.RSAKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}KeyName, skipping
14:58:09.556 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.DSAKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}KeyName, skipping
14:58:09.556 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.DEREncodedKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}KeyName, skipping
14:58:09.556 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}KeyName, skipping
14:58:09.556 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - KeyName signing_two did not independently produce a credential based on any registered providers
14:58:09.556 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Processing KeyInfo child with QName: {http://www.w3.org/2000/09/xmldsig#}X509Data
14:58:09.556 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.RSAKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}X509Data, skipping
14:58:09.556 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.DSAKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}X509Data, skipping
14:58:09.556 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.DEREncodedKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}X509Data, skipping
14:58:09.557 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Processing KeyInfo child {http://www.w3.org/2000/09/xmldsig#}X509Data with provider org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider
14:58:09.557 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider - Attempting to extract credential from an X509Data
14:58:09.557 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider - Found 1 X509Certificates
14:58:09.557 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider - Found 0 X509CRLs
14:58:09.557 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider - Single certificate was present, treating as end-entity certificate
14:58:09.557 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Credentials successfully extracted from child {http://www.w3.org/2000/09/xmldsig#}X509Data by provider org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider
14:58:09.557 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - A total of 1 credentials were resolved
14:58:09.557 [Test worker] DEBUG org.opensaml.security.credential.criteria.impl.EvaluableCredentialCriteriaRegistry - Registry could not locate evaluable criteria for criteria class org.opensaml.xmlsec.keyinfo.KeyInfoCriterion
14:58:09.557 [Test worker] DEBUG org.opensaml.security.credential.criteria.impl.EvaluableCredentialCriteriaRegistry - Registry located evaluable criteria class org.opensaml.security.credential.criteria.impl.EvaluableKeyAlgorithmCredentialCriterion for criteria class org.opensaml.security.criteria.KeyAlgorithmCriterion
14:58:09.557 [Test worker] DEBUG org.opensaml.security.credential.criteria.impl.EvaluableCredentialCriteriaRegistry - Registry could not locate evaluable criteria for criteria class org.opensaml.saml.criterion.EntityRoleCriterion
14:58:09.557 [Test worker] DEBUG org.opensaml.security.credential.criteria.impl.EvaluableCredentialCriteriaRegistry - Registry could not locate evaluable criteria for criteria class org.opensaml.xmlsec.signature.support.SignatureValidationParametersCriterion
14:58:09.557 [Test worker] DEBUG org.opensaml.security.credential.criteria.impl.EvaluableCredentialCriteriaRegistry - Registry located evaluable criteria class org.opensaml.security.credential.criteria.impl.EvaluableEntityIDCredentialCriterion for criteria class org.opensaml.core.criterion.EntityIdCriterion
14:58:09.557 [Test worker] DEBUG org.opensaml.security.credential.criteria.impl.EvaluableCredentialCriteriaRegistry - Registry located evaluable criteria class org.opensaml.security.credential.criteria.impl.EvaluableUsageCredentialCriterion for criteria class org.opensaml.security.criteria.UsageCriterion
14:58:09.557 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine - Attempting to verify signature and establish trust using KeyInfo-derived credentials
14:58:09.557 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine - Signature contained no KeyInfo element, could not resolve verification credentials
14:58:09.557 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine - Failed to verify signature and/or establish trust using any KeyInfo-derived credentials
14:58:09.557 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.ExplicitKeySignatureTrustEngine - Attempting to verify signature using trusted credentials
14:58:09.557 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.SignatureValidationProvider - Using a validation provider of implementation: org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl
14:58:09.557 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl - Attempting to validate signature using key from supplied credential
14:58:09.557 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl - Accessing XMLSignature object
14:58:09.557 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl - Validating signature with signature algorithm URI: http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.557 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl - Validation credential key algorithm 'RSA', key instance class 'sun.security.rsa.RSAPublicKeyImpl'
14:58:09.557 [Test worker] DEBUG org.apache.xml.security.signature.XMLSignature - signatureMethodURI = http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.557 [Test worker] DEBUG org.apache.xml.security.signature.XMLSignature - jceSigAlgorithm    = SHA256withRSA
14:58:09.557 [Test worker] DEBUG org.apache.xml.security.signature.XMLSignature - jceSigProvider     = SunRsaSign
14:58:09.557 [Test worker] DEBUG org.apache.xml.security.signature.XMLSignature - PublicKey = Sun RSA public key, 2048 bits
  modulus: 28467384286610047790193967127304893209875662073359073774942581887283294160411802792536000169074125867401657852845534832793769124538137509051085458992249703565905800716923469070088999833187597827249635751958059531826825548351550672656743291446712694950734859083390405057337382681249786253663803850894222495451772846819106909725348681532555575251254532621460955520037451236754600370663610020100071967450597633410807407856885679555171801752996449368937848292397495047606491311420123124369147269540780582967348884118030902273439053917167556571322555439984456875509620738152097423039916831980190525678318992037010963562067
  public exponent: 65537
14:58:09.557 [Test worker] DEBUG org.apache.xml.security.utils.SignerOutputStream - Canonicalized SignedInfo:
14:58:09.557 [Test worker] DEBUG org.apache.xml.security.utils.SignerOutputStream - <ds:SignedInfo xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
<ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"></ds:CanonicalizationMethod>
<ds:SignatureMethod Algorithm="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256"></ds:SignatureMethod>
<ds:Reference URI="#some-assertion-id">
<ds:Transforms>
<ds:Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"></ds:Transform>
<ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"></ds:Transform>
</ds:Transforms>
<ds:DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256"></ds:DigestMethod>
<ds:DigestValue>lXaVSdL5M3k337D+gd7bhsPQmj+nyHAWp4J9bl+ab8o=</ds:DigestValue>
</ds:Reference>
</ds:SignedInfo>
14:58:09.558 [Test worker] WARN org.apache.xml.security.signature.XMLSignature - Signature verification failed.
14:58:09.558 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl - Signature cryptographic validation not successful
14:58:09.558 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine - Signature validation using candidate validation credential failed
org.opensaml.xmlsec.signature.support.SignatureException: Signature cryptographic validation not successful
	at org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl.validate(ApacheSantuarioSignatureValidationProviderImpl.java:79)
	at org.opensaml.xmlsec.signature.support.SignatureValidator.validate(SignatureValidator.java:54)
	at org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine.verifySignature(BaseSignatureTrustEngine.java:242)
	at org.opensaml.xmlsec.signature.support.impl.ExplicitKeySignatureTrustEngine.doValidate(ExplicitKeySignatureTrustEngine.java:119)
	at org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine.validate(BaseSignatureTrustEngine.java:105)
	at org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine.validate(BaseSignatureTrustEngine.java:62)
	at uk.gov.ida.saml.security.SignatureValidator.validate(SignatureValidator.java:48)
	at uk.gov.ida.saml.security.MetadataBackedSignatureValidatorTest.shouldAcceptSignedAssertions(MetadataBackedSignatureValidatorTest.java:149)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.mockito.internal.runners.JUnit45AndHigherRunnerImpl.run(JUnit45AndHigherRunnerImpl.java:37)
	at org.mockito.runners.MockitoJUnitRunner.run(MockitoJUnitRunner.java:62)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.runTestClass(JUnitTestClassExecuter.java:114)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.execute(JUnitTestClassExecuter.java:57)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassProcessor.processTestClass(JUnitTestClassProcessor.java:66)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:51)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)
	at com.sun.proxy.$Proxy1.processTestClass(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:109)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:146)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:128)
	at org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:404)
	at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)
	at org.gradle.internal.concurrent.StoppableExecutorImpl$1.run(StoppableExecutorImpl.java:46)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)
	at java.lang.Thread.run(Thread.java:748)
14:58:09.558 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.SignatureValidationProvider - Using a validation provider of implementation: org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl
14:58:09.558 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl - Attempting to validate signature using key from supplied credential
14:58:09.558 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl - Accessing XMLSignature object
14:58:09.558 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl - Validating signature with signature algorithm URI: http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.558 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl - Validation credential key algorithm 'RSA', key instance class 'sun.security.rsa.RSAPublicKeyImpl'
14:58:09.558 [Test worker] DEBUG org.apache.xml.security.signature.XMLSignature - signatureMethodURI = http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.558 [Test worker] DEBUG org.apache.xml.security.signature.XMLSignature - jceSigAlgorithm    = SHA256withRSA
14:58:09.558 [Test worker] DEBUG org.apache.xml.security.signature.XMLSignature - jceSigProvider     = SunRsaSign
14:58:09.558 [Test worker] DEBUG org.apache.xml.security.signature.XMLSignature - PublicKey = Sun RSA public key, 2048 bits
  modulus: 25998853806074907922736536937144192810524126200249845203941498583957653002742012081024851371701765572997964410773213417627351163207763916839110493186842727422105108695847327425148517951272422220366166787137233228070807559064518855586460848701406111149789270506162893565711430566183449983164245901187970559589037577615433138971451632097660130400984021863805390812022721378617499178820332971373486312850645816708350643062789774826141511451391051956832621350686324922826347973370110492133155768037641842259670336438666133242469461046538870604952985498558023280525040790594650803517622806143906741297205357832508919936977
  public exponent: 65537
14:58:09.558 [Test worker] DEBUG org.apache.xml.security.utils.SignerOutputStream - Canonicalized SignedInfo:
14:58:09.558 [Test worker] DEBUG org.apache.xml.security.utils.SignerOutputStream - <ds:SignedInfo xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
<ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"></ds:CanonicalizationMethod>
<ds:SignatureMethod Algorithm="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256"></ds:SignatureMethod>
<ds:Reference URI="#some-assertion-id">
<ds:Transforms>
<ds:Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"></ds:Transform>
<ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"></ds:Transform>
</ds:Transforms>
<ds:DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256"></ds:DigestMethod>
<ds:DigestValue>lXaVSdL5M3k337D+gd7bhsPQmj+nyHAWp4J9bl+ab8o=</ds:DigestValue>
</ds:Reference>
</ds:SignedInfo>
14:58:09.559 [Test worker] DEBUG org.apache.xml.security.signature.Manifest - verify 1 References
14:58:09.559 [Test worker] DEBUG org.apache.xml.security.signature.Manifest - I am not requested to follow nested Manifests
14:58:09.559 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Reference", "null")
14:58:09.559 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Transforms", "null")
14:58:09.559 [Test worker] DEBUG org.apache.xml.security.algorithms.JCEMapper - Request for URI http://www.w3.org/2001/04/xmlenc#sha256
14:58:09.559 [Test worker] DEBUG org.apache.xml.security.utils.resolver.ResourceResolver - I was asked to create a ResourceResolver and got 0
14:58:09.559 [Test worker] DEBUG org.apache.xml.security.utils.resolver.ResourceResolver - check resolvability by class org.apache.xml.security.utils.resolver.ResourceResolver
14:58:09.559 [Test worker] DEBUG org.apache.xml.security.utils.resolver.implementations.ResolverFragment - State I can resolve reference: "#some-assertion-id"
14:58:09.559 [Test worker] DEBUG org.apache.xml.security.utils.resolver.implementations.ResolverFragment - Try to catch an Element with ID some-assertion-id and Element was [saml2:Assertion: null]
14:58:09.559 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Transform", "null")
14:58:09.559 [Test worker] DEBUG org.apache.xml.security.transforms.Transforms - Perform the (0)th http://www.w3.org/2000/09/xmldsig#enveloped-signature transform
14:58:09.559 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Transform", "null")
14:58:09.559 [Test worker] DEBUG org.apache.xml.security.transforms.Transforms - Perform the (1)th http://www.w3.org/2001/10/xml-exc-c14n# transform
14:58:09.559 [Test worker] DEBUG org.apache.xml.security.utils.DigesterOutputStream - Pre-digested input:
14:58:09.559 [Test worker] DEBUG org.apache.xml.security.utils.DigesterOutputStream - <saml2:Assertion xmlns:saml2="urn:oasis:names:tc:SAML:2.0:assertion" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" ID="some-assertion-id" IssueInstant="2018-04-03T13:58:09.545Z" Version="2.0" xsi:type="saml2:AssertionType"><saml2:Issuer>a-test-entity</saml2:Issuer><saml2:Subject xsi:type="saml2:SubjectType"><saml2:NameID Format="urn:oasis:names:tc:SAML:2.0:nameid-format:persistent"></saml2:NameID><saml2:SubjectConfirmation Method="urn:oasis:names:tc:SAML:2.0:cm:bearer" xsi:type="saml2:SubjectConfirmationType"><saml2:SubjectConfirmationData InResponseTo="default-request-id" NotOnOrAfter="2018-04-03T14:13:09.545Z" Recipient="https://signin.service.gov.uk" xsi:type="saml2:SubjectConfirmationDataType"></saml2:SubjectConfirmationData></saml2:SubjectConfirmation></saml2:Subject><saml2:Conditions xsi:type="saml2:ConditionsType"><saml2:AudienceRestriction xsi:type="saml2:AudienceRestrictionType"><saml2:Audience>https://signin.service.gov.uk</saml2:Audience></saml2:AudienceRestriction></saml2:Conditions></saml2:Assertion>
14:58:09.559 [Test worker] DEBUG org.apache.xml.security.signature.Reference - Verification successful for URI "#some-assertion-id"
14:58:09.559 [Test worker] DEBUG org.apache.xml.security.signature.Manifest - The Reference has Type 
14:58:09.559 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl - Signature validated with key from supplied credential
14:58:09.559 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine - Signature validation using candidate credential was successful
14:58:09.559 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.ExplicitKeySignatureTrustEngine - Successfully verified signature using resolved trusted credential
14:58:09.562 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Starting to unmarshall Apache XML-Security-based SignatureImpl element
14:58:09.562 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Constructing Apache XMLSignature object
14:58:09.562 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Signature", "")
14:58:09.562 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:SignedInfo", "")
14:58:09.562 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:SignatureMethod", "")
14:58:09.562 [Test worker] DEBUG org.apache.xml.security.algorithms.SignatureAlgorithm - Create URI "http://www.w3.org/2000/09/xmldsig#rsa-sha1" class "class org.apache.xml.security.algorithms.implementations.SignatureBaseRSA$SignatureRSASHA1"
14:58:09.562 [Test worker] DEBUG org.apache.xml.security.algorithms.JCEMapper - Request for URI http://www.w3.org/2000/09/xmldsig#rsa-sha1
14:58:09.562 [Test worker] DEBUG org.apache.xml.security.algorithms.implementations.SignatureBaseRSA - Created SignatureRSA using SHA1withRSA
14:58:09.562 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Adding canonicalization and signing algorithms, and HMAC output length to Signature
14:58:09.562 [Test worker] DEBUG org.opensaml.core.xml.io.AbstractXMLObjectUnmarshaller - Ignoring unknown attribute Format
14:58:09.562 [Test worker] DEBUG org.opensaml.core.xml.io.AbstractXMLObjectUnmarshaller - Ignoring unknown attribute SPNameQualifier
14:58:09.563 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Beginning refresh of metadata from 'metadata'
14:58:09.563 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Processing new metadata from 'metadata'
14:58:09.563 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Unmarshalling metadata from 'metadata'
14:58:09.564 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Starting to unmarshall Apache XML-Security-based SignatureImpl element
14:58:09.564 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Constructing Apache XMLSignature object
14:58:09.564 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Signature", "")
14:58:09.564 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:SignedInfo", "")
14:58:09.564 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:SignatureMethod", "")
14:58:09.564 [Test worker] DEBUG org.apache.xml.security.algorithms.SignatureAlgorithm - Create URI "http://www.w3.org/2001/04/xmldsig-more#rsa-sha256" class "class org.apache.xml.security.algorithms.implementations.SignatureBaseRSA$SignatureRSASHA256"
14:58:09.564 [Test worker] DEBUG org.apache.xml.security.algorithms.JCEMapper - Request for URI http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.564 [Test worker] DEBUG org.apache.xml.security.algorithms.implementations.SignatureBaseRSA - Created SignatureRSA using SHA256withRSA
14:58:09.564 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:KeyInfo", "")
14:58:09.564 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Adding canonicalization and signing algorithms, and HMAC output length to Signature
14:58:09.564 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Adding KeyInfo to Signature
14:58:09.566 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Preprocessing metadata from 'metadata'
14:58:09.566 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Releasing cached DOM for metadata from 'metadata'
14:58:09.566 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Post-processing metadata from 'metadata'
14:58:09.566 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Computing expiration time for metadata from 'metadata'
14:58:09.566 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Expiration of metadata from 'metadata' will occur at 2018-04-03T13:59:49.563Z
14:58:09.566 [Test worker] INFO org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: New metadata successfully loaded for 'metadata'
14:58:09.566 [Test worker] INFO org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Next refresh cycle for metadata provider 'metadata' will occur on '2018-04-03T14:03:09.566Z' ('2018-04-03T15:03:09.566+01:00' local time)
14:58:09.566 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Reference", "")
14:58:09.566 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Transforms", "")
14:58:09.566 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Transform", "")
14:58:09.566 [Test worker] DEBUG org.opensaml.saml.security.impl.SAMLSignatureProfileValidator - Saw Enveloped signature transform
14:58:09.566 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Transform", "")
14:58:09.566 [Test worker] DEBUG org.opensaml.saml.security.impl.SAMLSignatureProfileValidator - Saw Exclusive C14N signature transform
14:58:09.566 [Test worker] ERROR org.opensaml.saml.security.impl.SAMLSignatureProfileValidator - Signature contained 1 ds:Object child element(s)
14:58:09.568 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Beginning refresh of metadata from 'metadata'
14:58:09.568 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Processing new metadata from 'metadata'
14:58:09.568 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Unmarshalling metadata from 'metadata'
14:58:09.569 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Starting to unmarshall Apache XML-Security-based SignatureImpl element
14:58:09.569 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Constructing Apache XMLSignature object
14:58:09.569 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Signature", "")
14:58:09.569 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:SignedInfo", "")
14:58:09.569 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:SignatureMethod", "")
14:58:09.569 [Test worker] DEBUG org.apache.xml.security.algorithms.SignatureAlgorithm - Create URI "http://www.w3.org/2001/04/xmldsig-more#rsa-sha256" class "class org.apache.xml.security.algorithms.implementations.SignatureBaseRSA$SignatureRSASHA256"
14:58:09.569 [Test worker] DEBUG org.apache.xml.security.algorithms.JCEMapper - Request for URI http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.569 [Test worker] DEBUG org.apache.xml.security.algorithms.implementations.SignatureBaseRSA - Created SignatureRSA using SHA256withRSA
14:58:09.569 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:KeyInfo", "")
14:58:09.569 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Adding canonicalization and signing algorithms, and HMAC output length to Signature
14:58:09.569 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Adding KeyInfo to Signature
14:58:09.571 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Preprocessing metadata from 'metadata'
14:58:09.571 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Releasing cached DOM for metadata from 'metadata'
14:58:09.571 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Post-processing metadata from 'metadata'
14:58:09.571 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Computing expiration time for metadata from 'metadata'
14:58:09.571 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Expiration of metadata from 'metadata' will occur at 2018-04-03T13:59:49.568Z
14:58:09.571 [Test worker] INFO org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: New metadata successfully loaded for 'metadata'
14:58:09.572 [Test worker] INFO org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Next refresh cycle for metadata provider 'metadata' will occur on '2018-04-03T14:03:09.571Z' ('2018-04-03T15:03:09.571+01:00' local time)
14:58:09.572 [Test worker] DEBUG org.opensaml.saml.common.SAMLObjectSupport - Examining signed object for content references with exclusive canonicalization transform
14:58:09.572 [Test worker] DEBUG org.opensaml.saml.common.SAMLObjectSupport - Saw exclusive transform, declaring non-visible namespaces on signed object
14:58:09.573 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureMarshaller - Starting to marshall {http://www.w3.org/2000/09/xmldsig#}Signature
14:58:09.573 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureMarshaller - Creating XMLSignature object
14:58:09.573 [Test worker] DEBUG org.apache.xml.security.algorithms.SignatureAlgorithm - Create URI "http://www.w3.org/2001/04/xmldsig-more#rsa-sha256" class "class org.apache.xml.security.algorithms.implementations.SignatureBaseRSA$SignatureRSASHA256"
14:58:09.573 [Test worker] DEBUG org.apache.xml.security.algorithms.JCEMapper - Request for URI http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.573 [Test worker] DEBUG org.apache.xml.security.algorithms.implementations.SignatureBaseRSA - Created SignatureRSA using SHA256withRSA
14:58:09.573 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureMarshaller - Adding content to XMLSignature.
14:58:09.573 [Test worker] DEBUG org.apache.xml.security.transforms.Transforms - Transforms.addTransform(http://www.w3.org/2000/09/xmldsig#enveloped-signature)
14:58:09.573 [Test worker] DEBUG org.apache.xml.security.transforms.Transform - Create URI "http://www.w3.org/2000/09/xmldsig#enveloped-signature" class "class org.apache.xml.security.transforms.implementations.TransformEnvelopedSignature"
14:58:09.573 [Test worker] DEBUG org.apache.xml.security.transforms.Transform - The NodeList is null
14:58:09.573 [Test worker] DEBUG org.apache.xml.security.transforms.Transforms - Transforms.addTransform(http://www.w3.org/2000/09/xmldsig#enveloped-signature)
14:58:09.573 [Test worker] DEBUG org.apache.xml.security.transforms.Transforms - Transforms.addTransform(http://www.w3.org/2001/10/xml-exc-c14n#)
14:58:09.573 [Test worker] DEBUG org.apache.xml.security.transforms.Transform - Create URI "http://www.w3.org/2001/10/xml-exc-c14n#" class "class org.apache.xml.security.transforms.implementations.TransformC14NExclusive"
14:58:09.573 [Test worker] DEBUG org.apache.xml.security.transforms.Transform - The NodeList is null
14:58:09.573 [Test worker] DEBUG org.apache.xml.security.transforms.Transforms - Transforms.addTransform(http://www.w3.org/2001/10/xml-exc-c14n#)
14:58:09.573 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Transform", "null")
14:58:09.573 [Test worker] DEBUG org.opensaml.saml.common.SAMLObjectContentReference - Adding list of inclusive namespaces for signature exclusive canonicalization transform
14:58:09.573 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureMarshaller - Creating Signature DOM element
14:58:09.574 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.Signer - Using a signer of implemenation: org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignerProviderImpl
14:58:09.574 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignerProviderImpl - Computing signature over XMLSignature object
14:58:09.574 [Test worker] DEBUG org.apache.xml.security.algorithms.JCEMapper - Request for URI http://www.w3.org/2001/04/xmlenc#sha256
14:58:09.574 [Test worker] DEBUG org.apache.xml.security.utils.resolver.ResourceResolver - I was asked to create a ResourceResolver and got 0
14:58:09.574 [Test worker] DEBUG org.apache.xml.security.utils.resolver.ResourceResolver - check resolvability by class org.apache.xml.security.utils.resolver.ResourceResolver
14:58:09.574 [Test worker] DEBUG org.apache.xml.security.utils.resolver.implementations.ResolverFragment - State I can resolve reference: "#some-assertion-id"
14:58:09.574 [Test worker] DEBUG org.apache.xml.security.utils.resolver.implementations.ResolverFragment - Try to catch an Element with ID some-assertion-id and Element was [saml2:Assertion: null]
14:58:09.574 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Transform", "null")
14:58:09.574 [Test worker] DEBUG org.apache.xml.security.transforms.Transforms - Perform the (0)th http://www.w3.org/2000/09/xmldsig#enveloped-signature transform
14:58:09.574 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Transform", "null")
14:58:09.574 [Test worker] DEBUG org.apache.xml.security.transforms.Transforms - Perform the (1)th http://www.w3.org/2001/10/xml-exc-c14n# transform
14:58:09.574 [Test worker] DEBUG org.apache.xml.security.utils.DigesterOutputStream - Pre-digested input:
14:58:09.574 [Test worker] DEBUG org.apache.xml.security.utils.DigesterOutputStream - <saml2:Assertion xmlns:saml2="urn:oasis:names:tc:SAML:2.0:assertion" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" ID="some-assertion-id" IssueInstant="2018-04-03T13:58:09.572Z" Version="2.0" xsi:type="saml2:AssertionType"><saml2:Issuer>a-test-entity</saml2:Issuer><saml2:Subject xsi:type="saml2:SubjectType"><saml2:NameID Format="urn:oasis:names:tc:SAML:2.0:nameid-format:persistent"></saml2:NameID><saml2:SubjectConfirmation Method="urn:oasis:names:tc:SAML:2.0:cm:bearer" xsi:type="saml2:SubjectConfirmationType"><saml2:SubjectConfirmationData InResponseTo="default-request-id" NotOnOrAfter="2018-04-03T14:13:09.572Z" Recipient="https://signin.service.gov.uk" xsi:type="saml2:SubjectConfirmationDataType"></saml2:SubjectConfirmationData></saml2:SubjectConfirmation></saml2:Subject><saml2:Conditions xsi:type="saml2:ConditionsType"><saml2:AudienceRestriction xsi:type="saml2:AudienceRestrictionType"><saml2:Audience>https://signin.service.gov.uk</saml2:Audience></saml2:AudienceRestriction></saml2:Conditions></saml2:Assertion>
14:58:09.574 [Test worker] DEBUG org.apache.xml.security.utils.SignerOutputStream - Canonicalized SignedInfo:
14:58:09.574 [Test worker] DEBUG org.apache.xml.security.utils.SignerOutputStream - <ds:SignedInfo xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
<ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"></ds:CanonicalizationMethod>
<ds:SignatureMethod Algorithm="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256"></ds:SignatureMethod>
<ds:Reference URI="#some-assertion-id">
<ds:Transforms>
<ds:Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"></ds:Transform>
<ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"></ds:Transform>
</ds:Transforms>
<ds:DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256"></ds:DigestMethod>
<ds:DigestValue>3vU8ZoguJJm8LOG+ualGKIj6P51npK1Euy4fHq0IrO4=</ds:DigestValue>
</ds:Reference>
</ds:SignedInfo>
14:58:09.578 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Transform", "null")
14:58:09.578 [Test worker] DEBUG org.opensaml.saml.security.impl.SAMLSignatureProfileValidator - Saw Enveloped signature transform
14:58:09.578 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Transform", "null")
14:58:09.578 [Test worker] DEBUG org.opensaml.saml.security.impl.SAMLSignatureProfileValidator - Saw Exclusive C14N signature transform
14:58:09.578 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine - Performing signature algorithm whitelist/blacklist validation using params from CriteriaSet
14:58:09.578 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.SignatureAlgorithmValidator - Validating SignedInfo/SignatureMethod/@Algorithm against whitelist/blacklist: http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.578 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.SignatureAlgorithmValidator - Validating algorithm URI against whitelist and blacklist: algorithm: http://www.w3.org/2001/04/xmldsig-more#rsa-sha256, whitelist: [http://www.w3.org/2001/04/xmldsig-more#rsa-sha512, http://www.w3.org/2000/09/xmldsig#sha1, http://www.w3.org/2001/04/xmlenc#sha512, http://www.w3.org/2001/04/xmldsig-more#rsa-sha256, http://www.w3.org/2001/04/xmlenc#sha256, http://www.w3.org/2000/09/xmldsig#rsa-sha1], blacklist: []
14:58:09.578 [Test worker] DEBUG org.opensaml.xmlsec.algorithm.AlgorithmSupport - Saw non-null algorithm blacklist: []
14:58:09.578 [Test worker] DEBUG org.opensaml.xmlsec.algorithm.AlgorithmSupport - Algorithm passed blacklist validation: http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.578 [Test worker] DEBUG org.opensaml.xmlsec.algorithm.AlgorithmSupport - Saw non-null algorithm whitelist: [http://www.w3.org/2001/04/xmldsig-more#rsa-sha512, http://www.w3.org/2000/09/xmldsig#sha1, http://www.w3.org/2001/04/xmlenc#sha512, http://www.w3.org/2001/04/xmldsig-more#rsa-sha256, http://www.w3.org/2001/04/xmlenc#sha256, http://www.w3.org/2000/09/xmldsig#rsa-sha1]
14:58:09.578 [Test worker] DEBUG org.opensaml.xmlsec.algorithm.AlgorithmSupport - Algorithm passed whitelist validation: http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.578 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.SignatureAlgorithmValidator - Validating SignedInfo/Reference/DigestMethod/@Algorithm against whitelist/blacklist: http://www.w3.org/2001/04/xmlenc#sha256
14:58:09.578 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.SignatureAlgorithmValidator - Validating algorithm URI against whitelist and blacklist: algorithm: http://www.w3.org/2001/04/xmlenc#sha256, whitelist: [http://www.w3.org/2001/04/xmldsig-more#rsa-sha512, http://www.w3.org/2000/09/xmldsig#sha1, http://www.w3.org/2001/04/xmlenc#sha512, http://www.w3.org/2001/04/xmldsig-more#rsa-sha256, http://www.w3.org/2001/04/xmlenc#sha256, http://www.w3.org/2000/09/xmldsig#rsa-sha1], blacklist: []
14:58:09.578 [Test worker] DEBUG org.opensaml.xmlsec.algorithm.AlgorithmSupport - Saw non-null algorithm blacklist: []
14:58:09.578 [Test worker] DEBUG org.opensaml.xmlsec.algorithm.AlgorithmSupport - Algorithm passed blacklist validation: http://www.w3.org/2001/04/xmlenc#sha256
14:58:09.578 [Test worker] DEBUG org.opensaml.xmlsec.algorithm.AlgorithmSupport - Saw non-null algorithm whitelist: [http://www.w3.org/2001/04/xmldsig-more#rsa-sha512, http://www.w3.org/2000/09/xmldsig#sha1, http://www.w3.org/2001/04/xmlenc#sha512, http://www.w3.org/2001/04/xmldsig-more#rsa-sha256, http://www.w3.org/2001/04/xmlenc#sha256, http://www.w3.org/2000/09/xmldsig#rsa-sha1]
14:58:09.578 [Test worker] DEBUG org.opensaml.xmlsec.algorithm.AlgorithmSupport - Algorithm passed whitelist validation: http://www.w3.org/2001/04/xmlenc#sha256
14:58:09.578 [Test worker] DEBUG org.opensaml.saml.security.impl.MetadataCredentialResolver - Resolving credentials from metadata using entityID: https://signin.service.gov.uk, role: {urn:oasis:names:tc:SAML:2.0:metadata}SPSSODescriptor, protocol: null, usage: SIGNING
14:58:09.578 [Test worker] DEBUG org.opensaml.saml.security.impl.MetadataCredentialResolver - Retrieving role descriptor metadata for entity 'https://signin.service.gov.uk' in role '{urn:oasis:names:tc:SAML:2.0:metadata}SPSSODescriptor' for protocol 'null'
14:58:09.578 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractBatchMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Resolved 1 candidates via EntityIdCriterion: EntityIdCriterion [id=https://signin.service.gov.uk]
14:58:09.578 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Attempting to filter candidate EntityDescriptors via resolved Predicates
14:58:09.578 [Test worker] DEBUG net.shibboleth.utilities.java.support.resolver.CriterionPredicateRegistry - Registry did not locate Predicate implementation registered for Criterion class org.opensaml.core.criterion.EntityIdCriterion
14:58:09.578 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: After predicate filtering 1 EntityDescriptors remain
14:58:09.579 [Test worker] DEBUG org.opensaml.saml.security.impl.MetadataCredentialResolver - Found no cached credentials in KeyDescriptor object metadata, resolving from KeyInfo
14:58:09.579 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Found 1 key names: [signing_one]
14:58:09.579 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Processing KeyInfo child with QName: {http://www.w3.org/2000/09/xmldsig#}KeyName
14:58:09.579 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.RSAKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}KeyName, skipping
14:58:09.579 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.DSAKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}KeyName, skipping
14:58:09.579 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.DEREncodedKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}KeyName, skipping
14:58:09.579 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}KeyName, skipping
14:58:09.579 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - KeyName signing_one did not independently produce a credential based on any registered providers
14:58:09.579 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Processing KeyInfo child with QName: {http://www.w3.org/2000/09/xmldsig#}X509Data
14:58:09.579 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.RSAKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}X509Data, skipping
14:58:09.579 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.DSAKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}X509Data, skipping
14:58:09.579 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.DEREncodedKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}X509Data, skipping
14:58:09.579 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Processing KeyInfo child {http://www.w3.org/2000/09/xmldsig#}X509Data with provider org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider
14:58:09.579 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider - Attempting to extract credential from an X509Data
14:58:09.579 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider - Found 1 X509Certificates
14:58:09.579 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider - Found 0 X509CRLs
14:58:09.579 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider - Single certificate was present, treating as end-entity certificate
14:58:09.579 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Credentials successfully extracted from child {http://www.w3.org/2000/09/xmldsig#}X509Data by provider org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider
14:58:09.579 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - A total of 1 credentials were resolved
14:58:09.579 [Test worker] DEBUG org.opensaml.security.credential.criteria.impl.EvaluableCredentialCriteriaRegistry - Registry could not locate evaluable criteria for criteria class org.opensaml.xmlsec.keyinfo.KeyInfoCriterion
14:58:09.579 [Test worker] DEBUG org.opensaml.saml.security.impl.MetadataCredentialResolver - Found no cached credentials in KeyDescriptor object metadata, resolving from KeyInfo
14:58:09.579 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Found 1 key names: [signing_two]
14:58:09.579 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Processing KeyInfo child with QName: {http://www.w3.org/2000/09/xmldsig#}KeyName
14:58:09.579 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.RSAKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}KeyName, skipping
14:58:09.579 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.DSAKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}KeyName, skipping
14:58:09.579 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.DEREncodedKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}KeyName, skipping
14:58:09.579 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}KeyName, skipping
14:58:09.579 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - KeyName signing_two did not independently produce a credential based on any registered providers
14:58:09.579 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Processing KeyInfo child with QName: {http://www.w3.org/2000/09/xmldsig#}X509Data
14:58:09.579 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.RSAKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}X509Data, skipping
14:58:09.579 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.DSAKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}X509Data, skipping
14:58:09.579 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.DEREncodedKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}X509Data, skipping
14:58:09.579 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Processing KeyInfo child {http://www.w3.org/2000/09/xmldsig#}X509Data with provider org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider
14:58:09.579 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider - Attempting to extract credential from an X509Data
14:58:09.579 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider - Found 1 X509Certificates
14:58:09.579 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider - Found 0 X509CRLs
14:58:09.579 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider - Single certificate was present, treating as end-entity certificate
14:58:09.579 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Credentials successfully extracted from child {http://www.w3.org/2000/09/xmldsig#}X509Data by provider org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider
14:58:09.579 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - A total of 1 credentials were resolved
14:58:09.579 [Test worker] DEBUG org.opensaml.security.credential.criteria.impl.EvaluableCredentialCriteriaRegistry - Registry could not locate evaluable criteria for criteria class org.opensaml.xmlsec.keyinfo.KeyInfoCriterion
14:58:09.579 [Test worker] DEBUG org.opensaml.security.credential.criteria.impl.EvaluableCredentialCriteriaRegistry - Registry located evaluable criteria class org.opensaml.security.credential.criteria.impl.EvaluableKeyAlgorithmCredentialCriterion for criteria class org.opensaml.security.criteria.KeyAlgorithmCriterion
14:58:09.579 [Test worker] DEBUG org.opensaml.security.credential.criteria.impl.EvaluableCredentialCriteriaRegistry - Registry could not locate evaluable criteria for criteria class org.opensaml.xmlsec.signature.support.SignatureValidationParametersCriterion
14:58:09.579 [Test worker] DEBUG org.opensaml.security.credential.criteria.impl.EvaluableCredentialCriteriaRegistry - Registry could not locate evaluable criteria for criteria class org.opensaml.saml.criterion.EntityRoleCriterion
14:58:09.579 [Test worker] DEBUG org.opensaml.security.credential.criteria.impl.EvaluableCredentialCriteriaRegistry - Registry located evaluable criteria class org.opensaml.security.credential.criteria.impl.EvaluableEntityIDCredentialCriterion for criteria class org.opensaml.core.criterion.EntityIdCriterion
14:58:09.579 [Test worker] DEBUG org.opensaml.security.credential.criteria.impl.EvaluableCredentialCriteriaRegistry - Registry located evaluable criteria class org.opensaml.security.credential.criteria.impl.EvaluableUsageCredentialCriterion for criteria class org.opensaml.security.criteria.UsageCriterion
14:58:09.579 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine - Attempting to verify signature and establish trust using KeyInfo-derived credentials
14:58:09.579 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine - Signature contained no KeyInfo element, could not resolve verification credentials
14:58:09.579 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine - Failed to verify signature and/or establish trust using any KeyInfo-derived credentials
14:58:09.579 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.ExplicitKeySignatureTrustEngine - Attempting to verify signature using trusted credentials
14:58:09.579 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.SignatureValidationProvider - Using a validation provider of implementation: org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl
14:58:09.579 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl - Attempting to validate signature using key from supplied credential
14:58:09.579 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl - Accessing XMLSignature object
14:58:09.579 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl - Validating signature with signature algorithm URI: http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.579 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl - Validation credential key algorithm 'RSA', key instance class 'sun.security.rsa.RSAPublicKeyImpl'
14:58:09.579 [Test worker] DEBUG org.apache.xml.security.signature.XMLSignature - signatureMethodURI = http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.579 [Test worker] DEBUG org.apache.xml.security.signature.XMLSignature - jceSigAlgorithm    = SHA256withRSA
14:58:09.579 [Test worker] DEBUG org.apache.xml.security.signature.XMLSignature - jceSigProvider     = SunRsaSign
14:58:09.580 [Test worker] DEBUG org.apache.xml.security.signature.XMLSignature - PublicKey = Sun RSA public key, 2048 bits
  modulus: 28467384286610047790193967127304893209875662073359073774942581887283294160411802792536000169074125867401657852845534832793769124538137509051085458992249703565905800716923469070088999833187597827249635751958059531826825548351550672656743291446712694950734859083390405057337382681249786253663803850894222495451772846819106909725348681532555575251254532621460955520037451236754600370663610020100071967450597633410807407856885679555171801752996449368937848292397495047606491311420123124369147269540780582967348884118030902273439053917167556571322555439984456875509620738152097423039916831980190525678318992037010963562067
  public exponent: 65537
14:58:09.580 [Test worker] DEBUG org.apache.xml.security.utils.SignerOutputStream - Canonicalized SignedInfo:
14:58:09.580 [Test worker] DEBUG org.apache.xml.security.utils.SignerOutputStream - <ds:SignedInfo xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
<ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"></ds:CanonicalizationMethod>
<ds:SignatureMethod Algorithm="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256"></ds:SignatureMethod>
<ds:Reference URI="#some-assertion-id">
<ds:Transforms>
<ds:Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"></ds:Transform>
<ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"></ds:Transform>
</ds:Transforms>
<ds:DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256"></ds:DigestMethod>
<ds:DigestValue>3vU8ZoguJJm8LOG+ualGKIj6P51npK1Euy4fHq0IrO4=</ds:DigestValue>
</ds:Reference>
</ds:SignedInfo>
14:58:09.580 [Test worker] WARN org.apache.xml.security.signature.XMLSignature - Signature verification failed.
14:58:09.580 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl - Signature cryptographic validation not successful
14:58:09.580 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine - Signature validation using candidate validation credential failed
org.opensaml.xmlsec.signature.support.SignatureException: Signature cryptographic validation not successful
	at org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl.validate(ApacheSantuarioSignatureValidationProviderImpl.java:79)
	at org.opensaml.xmlsec.signature.support.SignatureValidator.validate(SignatureValidator.java:54)
	at org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine.verifySignature(BaseSignatureTrustEngine.java:242)
	at org.opensaml.xmlsec.signature.support.impl.ExplicitKeySignatureTrustEngine.doValidate(ExplicitKeySignatureTrustEngine.java:119)
	at org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine.validate(BaseSignatureTrustEngine.java:105)
	at org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine.validate(BaseSignatureTrustEngine.java:62)
	at uk.gov.ida.saml.security.SignatureValidator.validate(SignatureValidator.java:48)
	at uk.gov.ida.saml.security.MetadataBackedSignatureValidatorTest.shouldValidateSignatureUsingTrustedCredentials(MetadataBackedSignatureValidatorTest.java:60)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.mockito.internal.runners.JUnit45AndHigherRunnerImpl.run(JUnit45AndHigherRunnerImpl.java:37)
	at org.mockito.runners.MockitoJUnitRunner.run(MockitoJUnitRunner.java:62)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.runTestClass(JUnitTestClassExecuter.java:114)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.execute(JUnitTestClassExecuter.java:57)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassProcessor.processTestClass(JUnitTestClassProcessor.java:66)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:51)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)
	at com.sun.proxy.$Proxy1.processTestClass(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:109)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:146)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:128)
	at org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:404)
	at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)
	at org.gradle.internal.concurrent.StoppableExecutorImpl$1.run(StoppableExecutorImpl.java:46)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)
	at java.lang.Thread.run(Thread.java:748)
14:58:09.580 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.SignatureValidationProvider - Using a validation provider of implementation: org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl
14:58:09.580 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl - Attempting to validate signature using key from supplied credential
14:58:09.580 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl - Accessing XMLSignature object
14:58:09.580 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl - Validating signature with signature algorithm URI: http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.580 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl - Validation credential key algorithm 'RSA', key instance class 'sun.security.rsa.RSAPublicKeyImpl'
14:58:09.580 [Test worker] DEBUG org.apache.xml.security.signature.XMLSignature - signatureMethodURI = http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.580 [Test worker] DEBUG org.apache.xml.security.signature.XMLSignature - jceSigAlgorithm    = SHA256withRSA
14:58:09.580 [Test worker] DEBUG org.apache.xml.security.signature.XMLSignature - jceSigProvider     = SunRsaSign
14:58:09.581 [Test worker] DEBUG org.apache.xml.security.signature.XMLSignature - PublicKey = Sun RSA public key, 2048 bits
  modulus: 25998853806074907922736536937144192810524126200249845203941498583957653002742012081024851371701765572997964410773213417627351163207763916839110493186842727422105108695847327425148517951272422220366166787137233228070807559064518855586460848701406111149789270506162893565711430566183449983164245901187970559589037577615433138971451632097660130400984021863805390812022721378617499178820332971373486312850645816708350643062789774826141511451391051956832621350686324922826347973370110492133155768037641842259670336438666133242469461046538870604952985498558023280525040790594650803517622806143906741297205357832508919936977
  public exponent: 65537
14:58:09.581 [Test worker] DEBUG org.apache.xml.security.utils.SignerOutputStream - Canonicalized SignedInfo:
14:58:09.581 [Test worker] DEBUG org.apache.xml.security.utils.SignerOutputStream - <ds:SignedInfo xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
<ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"></ds:CanonicalizationMethod>
<ds:SignatureMethod Algorithm="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256"></ds:SignatureMethod>
<ds:Reference URI="#some-assertion-id">
<ds:Transforms>
<ds:Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"></ds:Transform>
<ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"></ds:Transform>
</ds:Transforms>
<ds:DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256"></ds:DigestMethod>
<ds:DigestValue>3vU8ZoguJJm8LOG+ualGKIj6P51npK1Euy4fHq0IrO4=</ds:DigestValue>
</ds:Reference>
</ds:SignedInfo>
14:58:09.581 [Test worker] DEBUG org.apache.xml.security.signature.Manifest - verify 1 References
14:58:09.581 [Test worker] DEBUG org.apache.xml.security.signature.Manifest - I am not requested to follow nested Manifests
14:58:09.581 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Reference", "null")
14:58:09.581 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Transforms", "null")
14:58:09.581 [Test worker] DEBUG org.apache.xml.security.algorithms.JCEMapper - Request for URI http://www.w3.org/2001/04/xmlenc#sha256
14:58:09.581 [Test worker] DEBUG org.apache.xml.security.utils.resolver.ResourceResolver - I was asked to create a ResourceResolver and got 0
14:58:09.581 [Test worker] DEBUG org.apache.xml.security.utils.resolver.ResourceResolver - check resolvability by class org.apache.xml.security.utils.resolver.ResourceResolver
14:58:09.581 [Test worker] DEBUG org.apache.xml.security.utils.resolver.implementations.ResolverFragment - State I can resolve reference: "#some-assertion-id"
14:58:09.581 [Test worker] DEBUG org.apache.xml.security.utils.resolver.implementations.ResolverFragment - Try to catch an Element with ID some-assertion-id and Element was [saml2:Assertion: null]
14:58:09.581 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Transform", "null")
14:58:09.581 [Test worker] DEBUG org.apache.xml.security.transforms.Transforms - Perform the (0)th http://www.w3.org/2000/09/xmldsig#enveloped-signature transform
14:58:09.581 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Transform", "null")
14:58:09.581 [Test worker] DEBUG org.apache.xml.security.transforms.Transforms - Perform the (1)th http://www.w3.org/2001/10/xml-exc-c14n# transform
14:58:09.581 [Test worker] DEBUG org.apache.xml.security.utils.DigesterOutputStream - Pre-digested input:
14:58:09.581 [Test worker] DEBUG org.apache.xml.security.utils.DigesterOutputStream - <saml2:Assertion xmlns:saml2="urn:oasis:names:tc:SAML:2.0:assertion" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" ID="some-assertion-id" IssueInstant="2018-04-03T13:58:09.572Z" Version="2.0" xsi:type="saml2:AssertionType"><saml2:Issuer>a-test-entity</saml2:Issuer><saml2:Subject xsi:type="saml2:SubjectType"><saml2:NameID Format="urn:oasis:names:tc:SAML:2.0:nameid-format:persistent"></saml2:NameID><saml2:SubjectConfirmation Method="urn:oasis:names:tc:SAML:2.0:cm:bearer" xsi:type="saml2:SubjectConfirmationType"><saml2:SubjectConfirmationData InResponseTo="default-request-id" NotOnOrAfter="2018-04-03T14:13:09.572Z" Recipient="https://signin.service.gov.uk" xsi:type="saml2:SubjectConfirmationDataType"></saml2:SubjectConfirmationData></saml2:SubjectConfirmation></saml2:Subject><saml2:Conditions xsi:type="saml2:ConditionsType"><saml2:AudienceRestriction xsi:type="saml2:AudienceRestrictionType"><saml2:Audience>https://signin.service.gov.uk</saml2:Audience></saml2:AudienceRestriction></saml2:Conditions></saml2:Assertion>
14:58:09.581 [Test worker] DEBUG org.apache.xml.security.signature.Reference - Verification successful for URI "#some-assertion-id"
14:58:09.581 [Test worker] DEBUG org.apache.xml.security.signature.Manifest - The Reference has Type 
14:58:09.581 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl - Signature validated with key from supplied credential
14:58:09.581 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine - Signature validation using candidate credential was successful
14:58:09.581 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.ExplicitKeySignatureTrustEngine - Successfully verified signature using resolved trusted credential
14:58:09.584 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Starting to unmarshall Apache XML-Security-based SignatureImpl element
14:58:09.584 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Constructing Apache XMLSignature object
14:58:09.584 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Signature", "")
14:58:09.584 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:SignedInfo", "")
14:58:09.584 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:SignatureMethod", "")
14:58:09.584 [Test worker] DEBUG org.apache.xml.security.algorithms.SignatureAlgorithm - Create URI "http://www.w3.org/2000/09/xmldsig#rsa-sha1" class "class org.apache.xml.security.algorithms.implementations.SignatureBaseRSA$SignatureRSASHA1"
14:58:09.584 [Test worker] DEBUG org.apache.xml.security.algorithms.JCEMapper - Request for URI http://www.w3.org/2000/09/xmldsig#rsa-sha1
14:58:09.584 [Test worker] DEBUG org.apache.xml.security.algorithms.implementations.SignatureBaseRSA - Created SignatureRSA using SHA1withRSA
14:58:09.584 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Adding canonicalization and signing algorithms, and HMAC output length to Signature
14:58:09.584 [Test worker] DEBUG org.opensaml.core.xml.io.AbstractXMLObjectUnmarshaller - Ignoring unknown attribute Format
14:58:09.584 [Test worker] DEBUG org.opensaml.core.xml.io.AbstractXMLObjectUnmarshaller - Ignoring unknown attribute SPNameQualifier
14:58:09.585 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Beginning refresh of metadata from 'metadata'
14:58:09.585 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Processing new metadata from 'metadata'
14:58:09.585 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Unmarshalling metadata from 'metadata'
14:58:09.586 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Starting to unmarshall Apache XML-Security-based SignatureImpl element
14:58:09.586 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Constructing Apache XMLSignature object
14:58:09.586 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Signature", "")
14:58:09.586 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:SignedInfo", "")
14:58:09.586 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:SignatureMethod", "")
14:58:09.586 [Test worker] DEBUG org.apache.xml.security.algorithms.SignatureAlgorithm - Create URI "http://www.w3.org/2001/04/xmldsig-more#rsa-sha256" class "class org.apache.xml.security.algorithms.implementations.SignatureBaseRSA$SignatureRSASHA256"
14:58:09.586 [Test worker] DEBUG org.apache.xml.security.algorithms.JCEMapper - Request for URI http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.586 [Test worker] DEBUG org.apache.xml.security.algorithms.implementations.SignatureBaseRSA - Created SignatureRSA using SHA256withRSA
14:58:09.586 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:KeyInfo", "")
14:58:09.586 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Adding canonicalization and signing algorithms, and HMAC output length to Signature
14:58:09.586 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Adding KeyInfo to Signature
14:58:09.587 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Preprocessing metadata from 'metadata'
14:58:09.587 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Releasing cached DOM for metadata from 'metadata'
14:58:09.588 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Post-processing metadata from 'metadata'
14:58:09.588 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Computing expiration time for metadata from 'metadata'
14:58:09.588 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Expiration of metadata from 'metadata' will occur at 2018-04-03T13:59:49.585Z
14:58:09.588 [Test worker] INFO org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: New metadata successfully loaded for 'metadata'
14:58:09.588 [Test worker] INFO org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Next refresh cycle for metadata provider 'metadata' will occur on '2018-04-03T14:03:09.588Z' ('2018-04-03T15:03:09.588+01:00' local time)
14:58:09.588 [Test worker] ERROR org.opensaml.saml.security.impl.SAMLSignatureProfileValidator - Signature SignedInfo had invalid number of References: 2
14:58:09.591 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Starting to unmarshall Apache XML-Security-based SignatureImpl element
14:58:09.591 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Constructing Apache XMLSignature object
14:58:09.591 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Signature", "")
14:58:09.591 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:SignedInfo", "")
14:58:09.591 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:SignatureMethod", "")
14:58:09.591 [Test worker] DEBUG org.apache.xml.security.algorithms.SignatureAlgorithm - Create URI "http://www.w3.org/2000/09/xmldsig#rsa-sha1" class "class org.apache.xml.security.algorithms.implementations.SignatureBaseRSA$SignatureRSASHA1"
14:58:09.591 [Test worker] DEBUG org.apache.xml.security.algorithms.JCEMapper - Request for URI http://www.w3.org/2000/09/xmldsig#rsa-sha1
14:58:09.591 [Test worker] DEBUG org.apache.xml.security.algorithms.implementations.SignatureBaseRSA - Created SignatureRSA using SHA1withRSA
14:58:09.591 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Adding canonicalization and signing algorithms, and HMAC output length to Signature
14:58:09.591 [Test worker] DEBUG org.opensaml.core.xml.io.AbstractXMLObjectUnmarshaller - Ignoring unknown attribute Format
14:58:09.591 [Test worker] DEBUG org.opensaml.core.xml.io.AbstractXMLObjectUnmarshaller - Ignoring unknown attribute SPNameQualifier
14:58:09.593 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Beginning refresh of metadata from 'metadata'
14:58:09.593 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Processing new metadata from 'metadata'
14:58:09.593 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Unmarshalling metadata from 'metadata'
14:58:09.594 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Starting to unmarshall Apache XML-Security-based SignatureImpl element
14:58:09.594 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Constructing Apache XMLSignature object
14:58:09.594 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Signature", "")
14:58:09.594 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:SignedInfo", "")
14:58:09.594 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:SignatureMethod", "")
14:58:09.594 [Test worker] DEBUG org.apache.xml.security.algorithms.SignatureAlgorithm - Create URI "http://www.w3.org/2001/04/xmldsig-more#rsa-sha256" class "class org.apache.xml.security.algorithms.implementations.SignatureBaseRSA$SignatureRSASHA256"
14:58:09.594 [Test worker] DEBUG org.apache.xml.security.algorithms.JCEMapper - Request for URI http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.594 [Test worker] DEBUG org.apache.xml.security.algorithms.implementations.SignatureBaseRSA - Created SignatureRSA using SHA256withRSA
14:58:09.594 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:KeyInfo", "")
14:58:09.594 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Adding canonicalization and signing algorithms, and HMAC output length to Signature
14:58:09.594 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Adding KeyInfo to Signature
14:58:09.596 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Preprocessing metadata from 'metadata'
14:58:09.596 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Releasing cached DOM for metadata from 'metadata'
14:58:09.596 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Post-processing metadata from 'metadata'
14:58:09.596 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Computing expiration time for metadata from 'metadata'
14:58:09.596 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Expiration of metadata from 'metadata' will occur at 2018-04-03T13:59:49.593Z
14:58:09.596 [Test worker] INFO org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: New metadata successfully loaded for 'metadata'
14:58:09.596 [Test worker] INFO org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Next refresh cycle for metadata provider 'metadata' will occur on '2018-04-03T14:03:09.596Z' ('2018-04-03T15:03:09.596+01:00' local time)
14:58:09.597 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Reference", "")
14:58:09.597 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Transforms", "")
14:58:09.597 [Test worker] ERROR org.opensaml.saml.security.impl.SAMLSignatureProfileValidator - SignableSAMLObject did not contain an ID attribute
14:58:09.599 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Starting to unmarshall Apache XML-Security-based SignatureImpl element
14:58:09.599 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Constructing Apache XMLSignature object
14:58:09.599 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Signature", "")
14:58:09.599 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:SignedInfo", "")
14:58:09.599 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:SignatureMethod", "")
14:58:09.599 [Test worker] DEBUG org.apache.xml.security.algorithms.SignatureAlgorithm - Create URI "http://www.w3.org/2000/09/xmldsig#rsa-sha1" class "class org.apache.xml.security.algorithms.implementations.SignatureBaseRSA$SignatureRSASHA1"
14:58:09.599 [Test worker] DEBUG org.apache.xml.security.algorithms.JCEMapper - Request for URI http://www.w3.org/2000/09/xmldsig#rsa-sha1
14:58:09.599 [Test worker] DEBUG org.apache.xml.security.algorithms.implementations.SignatureBaseRSA - Created SignatureRSA using SHA1withRSA
14:58:09.599 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Adding canonicalization and signing algorithms, and HMAC output length to Signature
14:58:09.599 [Test worker] DEBUG org.opensaml.core.xml.io.AbstractXMLObjectUnmarshaller - Ignoring unknown attribute Format
14:58:09.599 [Test worker] DEBUG org.opensaml.core.xml.io.AbstractXMLObjectUnmarshaller - Ignoring unknown attribute SPNameQualifier
14:58:09.601 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Beginning refresh of metadata from 'metadata'
14:58:09.601 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Processing new metadata from 'metadata'
14:58:09.601 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Unmarshalling metadata from 'metadata'
14:58:09.602 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Starting to unmarshall Apache XML-Security-based SignatureImpl element
14:58:09.602 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Constructing Apache XMLSignature object
14:58:09.602 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Signature", "")
14:58:09.602 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:SignedInfo", "")
14:58:09.602 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:SignatureMethod", "")
14:58:09.602 [Test worker] DEBUG org.apache.xml.security.algorithms.SignatureAlgorithm - Create URI "http://www.w3.org/2001/04/xmldsig-more#rsa-sha256" class "class org.apache.xml.security.algorithms.implementations.SignatureBaseRSA$SignatureRSASHA256"
14:58:09.602 [Test worker] DEBUG org.apache.xml.security.algorithms.JCEMapper - Request for URI http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.602 [Test worker] DEBUG org.apache.xml.security.algorithms.implementations.SignatureBaseRSA - Created SignatureRSA using SHA256withRSA
14:58:09.602 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:KeyInfo", "")
14:58:09.602 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Adding canonicalization and signing algorithms, and HMAC output length to Signature
14:58:09.602 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Adding KeyInfo to Signature
14:58:09.604 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Preprocessing metadata from 'metadata'
14:58:09.604 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Releasing cached DOM for metadata from 'metadata'
14:58:09.605 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Post-processing metadata from 'metadata'
14:58:09.605 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Computing expiration time for metadata from 'metadata'
14:58:09.605 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Expiration of metadata from 'metadata' will occur at 2018-04-03T13:59:49.601Z
14:58:09.605 [Test worker] INFO org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: New metadata successfully loaded for 'metadata'
14:58:09.605 [Test worker] INFO org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Next refresh cycle for metadata provider 'metadata' will occur on '2018-04-03T14:03:09.605Z' ('2018-04-03T15:03:09.605+01:00' local time)
14:58:09.605 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Reference", "")
14:58:09.605 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Transforms", "")
14:58:09.605 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Transform", "")
14:58:09.605 [Test worker] DEBUG org.opensaml.saml.security.impl.SAMLSignatureProfileValidator - Saw Exclusive C14N signature transform
14:58:09.605 [Test worker] ERROR org.opensaml.saml.security.impl.SAMLSignatureProfileValidator - Signature was missing the required Enveloped signature transform
14:58:09.607 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Beginning refresh of metadata from 'metadata'
14:58:09.607 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Processing new metadata from 'metadata'
14:58:09.607 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Unmarshalling metadata from 'metadata'
14:58:09.607 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Starting to unmarshall Apache XML-Security-based SignatureImpl element
14:58:09.607 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Constructing Apache XMLSignature object
14:58:09.607 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Signature", "")
14:58:09.607 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:SignedInfo", "")
14:58:09.607 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:SignatureMethod", "")
14:58:09.608 [Test worker] DEBUG org.apache.xml.security.algorithms.SignatureAlgorithm - Create URI "http://www.w3.org/2001/04/xmldsig-more#rsa-sha256" class "class org.apache.xml.security.algorithms.implementations.SignatureBaseRSA$SignatureRSASHA256"
14:58:09.608 [Test worker] DEBUG org.apache.xml.security.algorithms.JCEMapper - Request for URI http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.608 [Test worker] DEBUG org.apache.xml.security.algorithms.implementations.SignatureBaseRSA - Created SignatureRSA using SHA256withRSA
14:58:09.608 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:KeyInfo", "")
14:58:09.608 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Adding canonicalization and signing algorithms, and HMAC output length to Signature
14:58:09.608 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Adding KeyInfo to Signature
14:58:09.610 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Preprocessing metadata from 'metadata'
14:58:09.610 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Releasing cached DOM for metadata from 'metadata'
14:58:09.610 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Post-processing metadata from 'metadata'
14:58:09.610 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Computing expiration time for metadata from 'metadata'
14:58:09.610 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Expiration of metadata from 'metadata' will occur at 2018-04-03T13:59:49.607Z
14:58:09.610 [Test worker] INFO org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: New metadata successfully loaded for 'metadata'
14:58:09.610 [Test worker] INFO org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Next refresh cycle for metadata provider 'metadata' will occur on '2018-04-03T14:03:09.610Z' ('2018-04-03T15:03:09.610+01:00' local time)
14:58:09.616 [Test worker] DEBUG org.opensaml.saml.common.SAMLObjectSupport - Examining signed object for content references with exclusive canonicalization transform
14:58:09.616 [Test worker] DEBUG org.opensaml.saml.common.SAMLObjectSupport - Saw exclusive transform, declaring non-visible namespaces on signed object
14:58:09.617 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureMarshaller - Starting to marshall {http://www.w3.org/2000/09/xmldsig#}Signature
14:58:09.617 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureMarshaller - Creating XMLSignature object
14:58:09.617 [Test worker] DEBUG org.apache.xml.security.algorithms.SignatureAlgorithm - Create URI "http://www.w3.org/2001/04/xmldsig-more#rsa-sha256" class "class org.apache.xml.security.algorithms.implementations.SignatureBaseRSA$SignatureRSASHA256"
14:58:09.617 [Test worker] DEBUG org.apache.xml.security.algorithms.JCEMapper - Request for URI http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.617 [Test worker] DEBUG org.apache.xml.security.algorithms.implementations.SignatureBaseRSA - Created SignatureRSA using SHA256withRSA
14:58:09.617 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureMarshaller - Adding content to XMLSignature.
14:58:09.617 [Test worker] DEBUG org.apache.xml.security.transforms.Transforms - Transforms.addTransform(http://www.w3.org/2000/09/xmldsig#enveloped-signature)
14:58:09.617 [Test worker] DEBUG org.apache.xml.security.transforms.Transform - Create URI "http://www.w3.org/2000/09/xmldsig#enveloped-signature" class "class org.apache.xml.security.transforms.implementations.TransformEnvelopedSignature"
14:58:09.617 [Test worker] DEBUG org.apache.xml.security.transforms.Transform - The NodeList is null
14:58:09.617 [Test worker] DEBUG org.apache.xml.security.transforms.Transforms - Transforms.addTransform(http://www.w3.org/2000/09/xmldsig#enveloped-signature)
14:58:09.617 [Test worker] DEBUG org.apache.xml.security.transforms.Transforms - Transforms.addTransform(http://www.w3.org/2001/10/xml-exc-c14n#)
14:58:09.617 [Test worker] DEBUG org.apache.xml.security.transforms.Transform - Create URI "http://www.w3.org/2001/10/xml-exc-c14n#" class "class org.apache.xml.security.transforms.implementations.TransformC14NExclusive"
14:58:09.617 [Test worker] DEBUG org.apache.xml.security.transforms.Transform - The NodeList is null
14:58:09.617 [Test worker] DEBUG org.apache.xml.security.transforms.Transforms - Transforms.addTransform(http://www.w3.org/2001/10/xml-exc-c14n#)
14:58:09.617 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Transform", "null")
14:58:09.617 [Test worker] DEBUG org.opensaml.saml.common.SAMLObjectContentReference - Adding list of inclusive namespaces for signature exclusive canonicalization transform
14:58:09.617 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureMarshaller - Creating Signature DOM element
14:58:09.618 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.Signer - Using a signer of implemenation: org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignerProviderImpl
14:58:09.618 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignerProviderImpl - Computing signature over XMLSignature object
14:58:09.618 [Test worker] DEBUG org.apache.xml.security.algorithms.JCEMapper - Request for URI http://www.w3.org/2001/04/xmlenc#sha256
14:58:09.618 [Test worker] DEBUG org.apache.xml.security.utils.resolver.ResourceResolver - I was asked to create a ResourceResolver and got 0
14:58:09.618 [Test worker] DEBUG org.apache.xml.security.utils.resolver.ResourceResolver - check resolvability by class org.apache.xml.security.utils.resolver.ResourceResolver
14:58:09.618 [Test worker] DEBUG org.apache.xml.security.utils.resolver.implementations.ResolverFragment - State I can resolve reference: "#some-assertion-id"
14:58:09.618 [Test worker] DEBUG org.apache.xml.security.utils.resolver.implementations.ResolverFragment - Try to catch an Element with ID some-assertion-id and Element was [saml2:Assertion: null]
14:58:09.618 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Transform", "null")
14:58:09.618 [Test worker] DEBUG org.apache.xml.security.transforms.Transforms - Perform the (0)th http://www.w3.org/2000/09/xmldsig#enveloped-signature transform
14:58:09.618 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Transform", "null")
14:58:09.618 [Test worker] DEBUG org.apache.xml.security.transforms.Transforms - Perform the (1)th http://www.w3.org/2001/10/xml-exc-c14n# transform
14:58:09.618 [Test worker] DEBUG org.apache.xml.security.utils.DigesterOutputStream - Pre-digested input:
14:58:09.618 [Test worker] DEBUG org.apache.xml.security.utils.DigesterOutputStream - <saml2:Assertion xmlns:saml2="urn:oasis:names:tc:SAML:2.0:assertion" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" ID="some-assertion-id" IssueInstant="2018-04-03T13:58:09.616Z" Version="2.0" xsi:type="saml2:AssertionType"><saml2:Issuer>a-test-entity</saml2:Issuer><saml2:Subject xsi:type="saml2:SubjectType"><saml2:NameID Format="urn:oasis:names:tc:SAML:2.0:nameid-format:persistent"></saml2:NameID><saml2:SubjectConfirmation Method="urn:oasis:names:tc:SAML:2.0:cm:bearer" xsi:type="saml2:SubjectConfirmationType"><saml2:SubjectConfirmationData InResponseTo="default-request-id" NotOnOrAfter="2018-04-03T14:13:09.616Z" Recipient="https://signin.service.gov.uk" xsi:type="saml2:SubjectConfirmationDataType"></saml2:SubjectConfirmationData></saml2:SubjectConfirmation></saml2:Subject><saml2:Conditions xsi:type="saml2:ConditionsType"><saml2:AudienceRestriction xsi:type="saml2:AudienceRestrictionType"><saml2:Audience>https://signin.service.gov.uk</saml2:Audience></saml2:AudienceRestriction></saml2:Conditions></saml2:Assertion>
14:58:09.619 [Test worker] DEBUG org.apache.xml.security.utils.SignerOutputStream - Canonicalized SignedInfo:
14:58:09.619 [Test worker] DEBUG org.apache.xml.security.utils.SignerOutputStream - <ds:SignedInfo xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
<ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"></ds:CanonicalizationMethod>
<ds:SignatureMethod Algorithm="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256"></ds:SignatureMethod>
<ds:Reference URI="#some-assertion-id">
<ds:Transforms>
<ds:Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"></ds:Transform>
<ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"></ds:Transform>
</ds:Transforms>
<ds:DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256"></ds:DigestMethod>
<ds:DigestValue>nGlEDqmmC82Q0S5qSPL3851rmZK+EJdqHWyabsV77oQ=</ds:DigestValue>
</ds:Reference>
</ds:SignedInfo>
14:58:09.623 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Transform", "null")
14:58:09.623 [Test worker] DEBUG org.opensaml.saml.security.impl.SAMLSignatureProfileValidator - Saw Enveloped signature transform
14:58:09.623 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Transform", "null")
14:58:09.623 [Test worker] DEBUG org.opensaml.saml.security.impl.SAMLSignatureProfileValidator - Saw Exclusive C14N signature transform
14:58:09.623 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine - Performing signature algorithm whitelist/blacklist validation using params from CriteriaSet
14:58:09.624 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.SignatureAlgorithmValidator - Validating SignedInfo/SignatureMethod/@Algorithm against whitelist/blacklist: http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.624 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.SignatureAlgorithmValidator - Validating algorithm URI against whitelist and blacklist: algorithm: http://www.w3.org/2001/04/xmldsig-more#rsa-sha256, whitelist: [http://www.w3.org/2001/04/xmldsig-more#rsa-sha512, http://www.w3.org/2000/09/xmldsig#sha1, http://www.w3.org/2001/04/xmlenc#sha512, http://www.w3.org/2001/04/xmldsig-more#rsa-sha256, http://www.w3.org/2001/04/xmlenc#sha256, http://www.w3.org/2000/09/xmldsig#rsa-sha1], blacklist: []
14:58:09.624 [Test worker] DEBUG org.opensaml.xmlsec.algorithm.AlgorithmSupport - Saw non-null algorithm blacklist: []
14:58:09.624 [Test worker] DEBUG org.opensaml.xmlsec.algorithm.AlgorithmSupport - Algorithm passed blacklist validation: http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.624 [Test worker] DEBUG org.opensaml.xmlsec.algorithm.AlgorithmSupport - Saw non-null algorithm whitelist: [http://www.w3.org/2001/04/xmldsig-more#rsa-sha512, http://www.w3.org/2000/09/xmldsig#sha1, http://www.w3.org/2001/04/xmlenc#sha512, http://www.w3.org/2001/04/xmldsig-more#rsa-sha256, http://www.w3.org/2001/04/xmlenc#sha256, http://www.w3.org/2000/09/xmldsig#rsa-sha1]
14:58:09.624 [Test worker] DEBUG org.opensaml.xmlsec.algorithm.AlgorithmSupport - Algorithm passed whitelist validation: http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.624 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.SignatureAlgorithmValidator - Validating SignedInfo/Reference/DigestMethod/@Algorithm against whitelist/blacklist: http://www.w3.org/2001/04/xmlenc#sha256
14:58:09.624 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.SignatureAlgorithmValidator - Validating algorithm URI against whitelist and blacklist: algorithm: http://www.w3.org/2001/04/xmlenc#sha256, whitelist: [http://www.w3.org/2001/04/xmldsig-more#rsa-sha512, http://www.w3.org/2000/09/xmldsig#sha1, http://www.w3.org/2001/04/xmlenc#sha512, http://www.w3.org/2001/04/xmldsig-more#rsa-sha256, http://www.w3.org/2001/04/xmlenc#sha256, http://www.w3.org/2000/09/xmldsig#rsa-sha1], blacklist: []
14:58:09.624 [Test worker] DEBUG org.opensaml.xmlsec.algorithm.AlgorithmSupport - Saw non-null algorithm blacklist: []
14:58:09.624 [Test worker] DEBUG org.opensaml.xmlsec.algorithm.AlgorithmSupport - Algorithm passed blacklist validation: http://www.w3.org/2001/04/xmlenc#sha256
14:58:09.624 [Test worker] DEBUG org.opensaml.xmlsec.algorithm.AlgorithmSupport - Saw non-null algorithm whitelist: [http://www.w3.org/2001/04/xmldsig-more#rsa-sha512, http://www.w3.org/2000/09/xmldsig#sha1, http://www.w3.org/2001/04/xmlenc#sha512, http://www.w3.org/2001/04/xmldsig-more#rsa-sha256, http://www.w3.org/2001/04/xmlenc#sha256, http://www.w3.org/2000/09/xmldsig#rsa-sha1]
14:58:09.624 [Test worker] DEBUG org.opensaml.xmlsec.algorithm.AlgorithmSupport - Algorithm passed whitelist validation: http://www.w3.org/2001/04/xmlenc#sha256
14:58:09.624 [Test worker] DEBUG org.opensaml.saml.security.impl.MetadataCredentialResolver - Resolving credentials from metadata using entityID: https://signin.service.gov.uk, role: {urn:oasis:names:tc:SAML:2.0:metadata}SPSSODescriptor, protocol: null, usage: SIGNING
14:58:09.624 [Test worker] DEBUG org.opensaml.saml.security.impl.MetadataCredentialResolver - Retrieving role descriptor metadata for entity 'https://signin.service.gov.uk' in role '{urn:oasis:names:tc:SAML:2.0:metadata}SPSSODescriptor' for protocol 'null'
14:58:09.624 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractBatchMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Resolved 1 candidates via EntityIdCriterion: EntityIdCriterion [id=https://signin.service.gov.uk]
14:58:09.624 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Attempting to filter candidate EntityDescriptors via resolved Predicates
14:58:09.624 [Test worker] DEBUG net.shibboleth.utilities.java.support.resolver.CriterionPredicateRegistry - Registry did not locate Predicate implementation registered for Criterion class org.opensaml.core.criterion.EntityIdCriterion
14:58:09.624 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: After predicate filtering 1 EntityDescriptors remain
14:58:09.624 [Test worker] DEBUG org.opensaml.saml.security.impl.MetadataCredentialResolver - Found no cached credentials in KeyDescriptor object metadata, resolving from KeyInfo
14:58:09.624 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Found 1 key names: [signing_one]
14:58:09.624 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Processing KeyInfo child with QName: {http://www.w3.org/2000/09/xmldsig#}KeyName
14:58:09.624 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.RSAKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}KeyName, skipping
14:58:09.624 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.DSAKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}KeyName, skipping
14:58:09.624 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.DEREncodedKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}KeyName, skipping
14:58:09.624 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}KeyName, skipping
14:58:09.624 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - KeyName signing_one did not independently produce a credential based on any registered providers
14:58:09.624 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Processing KeyInfo child with QName: {http://www.w3.org/2000/09/xmldsig#}X509Data
14:58:09.624 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.RSAKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}X509Data, skipping
14:58:09.624 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.DSAKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}X509Data, skipping
14:58:09.624 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.DEREncodedKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}X509Data, skipping
14:58:09.624 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Processing KeyInfo child {http://www.w3.org/2000/09/xmldsig#}X509Data with provider org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider
14:58:09.624 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider - Attempting to extract credential from an X509Data
14:58:09.624 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider - Found 1 X509Certificates
14:58:09.624 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider - Found 0 X509CRLs
14:58:09.624 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider - Single certificate was present, treating as end-entity certificate
14:58:09.624 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Credentials successfully extracted from child {http://www.w3.org/2000/09/xmldsig#}X509Data by provider org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider
14:58:09.624 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - A total of 1 credentials were resolved
14:58:09.624 [Test worker] DEBUG org.opensaml.security.credential.criteria.impl.EvaluableCredentialCriteriaRegistry - Registry could not locate evaluable criteria for criteria class org.opensaml.xmlsec.keyinfo.KeyInfoCriterion
14:58:09.624 [Test worker] DEBUG org.opensaml.saml.security.impl.MetadataCredentialResolver - Found no cached credentials in KeyDescriptor object metadata, resolving from KeyInfo
14:58:09.624 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Found 1 key names: [signing_two]
14:58:09.624 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Processing KeyInfo child with QName: {http://www.w3.org/2000/09/xmldsig#}KeyName
14:58:09.624 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.RSAKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}KeyName, skipping
14:58:09.624 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.DSAKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}KeyName, skipping
14:58:09.624 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.DEREncodedKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}KeyName, skipping
14:58:09.624 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}KeyName, skipping
14:58:09.624 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - KeyName signing_two did not independently produce a credential based on any registered providers
14:58:09.624 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Processing KeyInfo child with QName: {http://www.w3.org/2000/09/xmldsig#}X509Data
14:58:09.624 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.RSAKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}X509Data, skipping
14:58:09.624 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.DSAKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}X509Data, skipping
14:58:09.624 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.DEREncodedKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}X509Data, skipping
14:58:09.624 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Processing KeyInfo child {http://www.w3.org/2000/09/xmldsig#}X509Data with provider org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider
14:58:09.624 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider - Attempting to extract credential from an X509Data
14:58:09.625 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider - Found 1 X509Certificates
14:58:09.625 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider - Found 0 X509CRLs
14:58:09.625 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider - Single certificate was present, treating as end-entity certificate
14:58:09.625 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Credentials successfully extracted from child {http://www.w3.org/2000/09/xmldsig#}X509Data by provider org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider
14:58:09.625 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - A total of 1 credentials were resolved
14:58:09.625 [Test worker] DEBUG org.opensaml.security.credential.criteria.impl.EvaluableCredentialCriteriaRegistry - Registry could not locate evaluable criteria for criteria class org.opensaml.xmlsec.keyinfo.KeyInfoCriterion
14:58:09.625 [Test worker] DEBUG org.opensaml.security.credential.criteria.impl.EvaluableCredentialCriteriaRegistry - Registry located evaluable criteria class org.opensaml.security.credential.criteria.impl.EvaluableKeyAlgorithmCredentialCriterion for criteria class org.opensaml.security.criteria.KeyAlgorithmCriterion
14:58:09.625 [Test worker] DEBUG org.opensaml.security.credential.criteria.impl.EvaluableCredentialCriteriaRegistry - Registry could not locate evaluable criteria for criteria class org.opensaml.saml.criterion.EntityRoleCriterion
14:58:09.625 [Test worker] DEBUG org.opensaml.security.credential.criteria.impl.EvaluableCredentialCriteriaRegistry - Registry could not locate evaluable criteria for criteria class org.opensaml.xmlsec.signature.support.SignatureValidationParametersCriterion
14:58:09.625 [Test worker] DEBUG org.opensaml.security.credential.criteria.impl.EvaluableCredentialCriteriaRegistry - Registry located evaluable criteria class org.opensaml.security.credential.criteria.impl.EvaluableEntityIDCredentialCriterion for criteria class org.opensaml.core.criterion.EntityIdCriterion
14:58:09.625 [Test worker] DEBUG org.opensaml.security.credential.criteria.impl.EvaluableCredentialCriteriaRegistry - Registry located evaluable criteria class org.opensaml.security.credential.criteria.impl.EvaluableUsageCredentialCriterion for criteria class org.opensaml.security.criteria.UsageCriterion
14:58:09.625 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine - Attempting to verify signature and establish trust using KeyInfo-derived credentials
14:58:09.625 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Found 1 key names: [default-key-name]
14:58:09.625 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Processing KeyInfo child with QName: {http://www.w3.org/2000/09/xmldsig#}KeyName
14:58:09.625 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.RSAKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}KeyName, skipping
14:58:09.625 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.DSAKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}KeyName, skipping
14:58:09.625 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.DEREncodedKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}KeyName, skipping
14:58:09.625 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}KeyName, skipping
14:58:09.625 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - KeyName default-key-name did not independently produce a credential based on any registered providers
14:58:09.625 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Processing KeyInfo child with QName: {http://www.w3.org/2000/09/xmldsig#}X509Data
14:58:09.625 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.RSAKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}X509Data, skipping
14:58:09.625 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.DSAKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}X509Data, skipping
14:58:09.625 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.DEREncodedKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}X509Data, skipping
14:58:09.625 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Processing KeyInfo child {http://www.w3.org/2000/09/xmldsig#}X509Data with provider org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider
14:58:09.625 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider - Attempting to extract credential from an X509Data
14:58:09.625 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider - Found 1 X509Certificates
14:58:09.625 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider - Found 0 X509CRLs
14:58:09.625 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider - Single certificate was present, treating as end-entity certificate
14:58:09.625 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Credentials successfully extracted from child {http://www.w3.org/2000/09/xmldsig#}X509Data by provider org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider
14:58:09.625 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - A total of 1 credentials were resolved
14:58:09.625 [Test worker] DEBUG org.opensaml.security.credential.criteria.impl.EvaluableCredentialCriteriaRegistry - Registry could not locate evaluable criteria for criteria class org.opensaml.xmlsec.keyinfo.KeyInfoCriterion
14:58:09.625 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.SignatureValidationProvider - Using a validation provider of implementation: org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl
14:58:09.625 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl - Attempting to validate signature using key from supplied credential
14:58:09.625 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl - Accessing XMLSignature object
14:58:09.625 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl - Validating signature with signature algorithm URI: http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.625 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl - Validation credential key algorithm 'RSA', key instance class 'sun.security.rsa.RSAPublicKeyImpl'
14:58:09.625 [Test worker] DEBUG org.apache.xml.security.signature.XMLSignature - signatureMethodURI = http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.625 [Test worker] DEBUG org.apache.xml.security.signature.XMLSignature - jceSigAlgorithm    = SHA256withRSA
14:58:09.625 [Test worker] DEBUG org.apache.xml.security.signature.XMLSignature - jceSigProvider     = SunRsaSign
14:58:09.625 [Test worker] DEBUG org.apache.xml.security.signature.XMLSignature - PublicKey = Sun RSA public key, 2048 bits
  modulus: 25409001569407320402992327456599511303046965827839653537313879273027955865433938733047037388815128097764533867659212832635690728020101473558560315590934171262282215955012999389503251062865574615704014877183939321223079350541464518027587342863878028505664860264864491413758595130241238766362021563537894060926110000330000990214933127033043056963154461834274926812879668190210521141425303407377106747804550651424123127470386775870707236879745743422634455392899770298698797995056445492806348467827850219542255778189316692044951036809291341632411491288418684597146455913595550326580755206352251180719749329896142448943311
  public exponent: 65537
14:58:09.625 [Test worker] DEBUG org.apache.xml.security.utils.SignerOutputStream - Canonicalized SignedInfo:
14:58:09.625 [Test worker] DEBUG org.apache.xml.security.utils.SignerOutputStream - <ds:SignedInfo xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
<ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"></ds:CanonicalizationMethod>
<ds:SignatureMethod Algorithm="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256"></ds:SignatureMethod>
<ds:Reference URI="#some-assertion-id">
<ds:Transforms>
<ds:Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"></ds:Transform>
<ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"></ds:Transform>
</ds:Transforms>
<ds:DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256"></ds:DigestMethod>
<ds:DigestValue>nGlEDqmmC82Q0S5qSPL3851rmZK+EJdqHWyabsV77oQ=</ds:DigestValue>
</ds:Reference>
</ds:SignedInfo>
14:58:09.626 [Test worker] WARN org.apache.xml.security.signature.XMLSignature - Signature verification failed.
14:58:09.626 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl - Signature cryptographic validation not successful
14:58:09.626 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine - Signature validation using candidate validation credential failed
org.opensaml.xmlsec.signature.support.SignatureException: Signature cryptographic validation not successful
	at org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl.validate(ApacheSantuarioSignatureValidationProviderImpl.java:79)
	at org.opensaml.xmlsec.signature.support.SignatureValidator.validate(SignatureValidator.java:54)
	at org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine.verifySignature(BaseSignatureTrustEngine.java:242)
	at org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine.validate(BaseSignatureTrustEngine.java:198)
	at org.opensaml.xmlsec.signature.support.impl.ExplicitKeySignatureTrustEngine.doValidate(ExplicitKeySignatureTrustEngine.java:109)
	at org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine.validate(BaseSignatureTrustEngine.java:105)
	at org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine.validate(BaseSignatureTrustEngine.java:62)
	at uk.gov.ida.saml.security.SignatureValidator.validate(SignatureValidator.java:48)
	at uk.gov.ida.saml.security.MetadataBackedSignatureValidatorTest.shouldFailValidationIfKeyInfoNotPresentInMetadata(MetadataBackedSignatureValidatorTest.java:69)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.mockito.internal.runners.JUnit45AndHigherRunnerImpl.run(JUnit45AndHigherRunnerImpl.java:37)
	at org.mockito.runners.MockitoJUnitRunner.run(MockitoJUnitRunner.java:62)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.runTestClass(JUnitTestClassExecuter.java:114)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.execute(JUnitTestClassExecuter.java:57)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassProcessor.processTestClass(JUnitTestClassProcessor.java:66)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:51)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)
	at com.sun.proxy.$Proxy1.processTestClass(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:109)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:146)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:128)
	at org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:404)
	at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)
	at org.gradle.internal.concurrent.StoppableExecutorImpl$1.run(StoppableExecutorImpl.java:46)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)
	at java.lang.Thread.run(Thread.java:748)
14:58:09.626 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine - Failed to verify signature and/or establish trust using any KeyInfo-derived credentials
14:58:09.626 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.ExplicitKeySignatureTrustEngine - Attempting to verify signature using trusted credentials
14:58:09.626 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.SignatureValidationProvider - Using a validation provider of implementation: org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl
14:58:09.626 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl - Attempting to validate signature using key from supplied credential
14:58:09.626 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl - Accessing XMLSignature object
14:58:09.626 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl - Validating signature with signature algorithm URI: http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.626 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl - Validation credential key algorithm 'RSA', key instance class 'sun.security.rsa.RSAPublicKeyImpl'
14:58:09.626 [Test worker] DEBUG org.apache.xml.security.signature.XMLSignature - signatureMethodURI = http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.626 [Test worker] DEBUG org.apache.xml.security.signature.XMLSignature - jceSigAlgorithm    = SHA256withRSA
14:58:09.626 [Test worker] DEBUG org.apache.xml.security.signature.XMLSignature - jceSigProvider     = SunRsaSign
14:58:09.626 [Test worker] DEBUG org.apache.xml.security.signature.XMLSignature - PublicKey = Sun RSA public key, 2048 bits
  modulus: 25998853806074907922736536937144192810524126200249845203941498583957653002742012081024851371701765572997964410773213417627351163207763916839110493186842727422105108695847327425148517951272422220366166787137233228070807559064518855586460848701406111149789270506162893565711430566183449983164245901187970559589037577615433138971451632097660130400984021863805390812022721378617499178820332971373486312850645816708350643062789774826141511451391051956832621350686324922826347973370110492133155768037641842259670336438666133242469461046538870604952985498558023280525040790594650803517622806143906741297205357832508919936977
  public exponent: 65537
14:58:09.626 [Test worker] DEBUG org.apache.xml.security.utils.SignerOutputStream - Canonicalized SignedInfo:
14:58:09.626 [Test worker] DEBUG org.apache.xml.security.utils.SignerOutputStream - <ds:SignedInfo xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
<ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"></ds:CanonicalizationMethod>
<ds:SignatureMethod Algorithm="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256"></ds:SignatureMethod>
<ds:Reference URI="#some-assertion-id">
<ds:Transforms>
<ds:Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"></ds:Transform>
<ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"></ds:Transform>
</ds:Transforms>
<ds:DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256"></ds:DigestMethod>
<ds:DigestValue>nGlEDqmmC82Q0S5qSPL3851rmZK+EJdqHWyabsV77oQ=</ds:DigestValue>
</ds:Reference>
</ds:SignedInfo>
14:58:09.627 [Test worker] WARN org.apache.xml.security.signature.XMLSignature - Signature verification failed.
14:58:09.627 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl - Signature cryptographic validation not successful
14:58:09.627 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine - Signature validation using candidate validation credential failed
org.opensaml.xmlsec.signature.support.SignatureException: Signature cryptographic validation not successful
	at org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl.validate(ApacheSantuarioSignatureValidationProviderImpl.java:79)
	at org.opensaml.xmlsec.signature.support.SignatureValidator.validate(SignatureValidator.java:54)
	at org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine.verifySignature(BaseSignatureTrustEngine.java:242)
	at org.opensaml.xmlsec.signature.support.impl.ExplicitKeySignatureTrustEngine.doValidate(ExplicitKeySignatureTrustEngine.java:119)
	at org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine.validate(BaseSignatureTrustEngine.java:105)
	at org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine.validate(BaseSignatureTrustEngine.java:62)
	at uk.gov.ida.saml.security.SignatureValidator.validate(SignatureValidator.java:48)
	at uk.gov.ida.saml.security.MetadataBackedSignatureValidatorTest.shouldFailValidationIfKeyInfoNotPresentInMetadata(MetadataBackedSignatureValidatorTest.java:69)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.mockito.internal.runners.JUnit45AndHigherRunnerImpl.run(JUnit45AndHigherRunnerImpl.java:37)
	at org.mockito.runners.MockitoJUnitRunner.run(MockitoJUnitRunner.java:62)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.runTestClass(JUnitTestClassExecuter.java:114)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.execute(JUnitTestClassExecuter.java:57)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassProcessor.processTestClass(JUnitTestClassProcessor.java:66)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:51)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)
	at com.sun.proxy.$Proxy1.processTestClass(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:109)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:146)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:128)
	at org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:404)
	at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)
	at org.gradle.internal.concurrent.StoppableExecutorImpl$1.run(StoppableExecutorImpl.java:46)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)
	at java.lang.Thread.run(Thread.java:748)
14:58:09.627 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.SignatureValidationProvider - Using a validation provider of implementation: org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl
14:58:09.627 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl - Attempting to validate signature using key from supplied credential
14:58:09.627 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl - Accessing XMLSignature object
14:58:09.627 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl - Validating signature with signature algorithm URI: http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.627 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl - Validation credential key algorithm 'RSA', key instance class 'sun.security.rsa.RSAPublicKeyImpl'
14:58:09.627 [Test worker] DEBUG org.apache.xml.security.signature.XMLSignature - signatureMethodURI = http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.627 [Test worker] DEBUG org.apache.xml.security.signature.XMLSignature - jceSigAlgorithm    = SHA256withRSA
14:58:09.627 [Test worker] DEBUG org.apache.xml.security.signature.XMLSignature - jceSigProvider     = SunRsaSign
14:58:09.627 [Test worker] DEBUG org.apache.xml.security.signature.XMLSignature - PublicKey = Sun RSA public key, 2048 bits
  modulus: 28467384286610047790193967127304893209875662073359073774942581887283294160411802792536000169074125867401657852845534832793769124538137509051085458992249703565905800716923469070088999833187597827249635751958059531826825548351550672656743291446712694950734859083390405057337382681249786253663803850894222495451772846819106909725348681532555575251254532621460955520037451236754600370663610020100071967450597633410807407856885679555171801752996449368937848292397495047606491311420123124369147269540780582967348884118030902273439053917167556571322555439984456875509620738152097423039916831980190525678318992037010963562067
  public exponent: 65537
14:58:09.627 [Test worker] DEBUG org.apache.xml.security.utils.SignerOutputStream - Canonicalized SignedInfo:
14:58:09.627 [Test worker] DEBUG org.apache.xml.security.utils.SignerOutputStream - <ds:SignedInfo xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
<ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"></ds:CanonicalizationMethod>
<ds:SignatureMethod Algorithm="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256"></ds:SignatureMethod>
<ds:Reference URI="#some-assertion-id">
<ds:Transforms>
<ds:Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"></ds:Transform>
<ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"></ds:Transform>
</ds:Transforms>
<ds:DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256"></ds:DigestMethod>
<ds:DigestValue>nGlEDqmmC82Q0S5qSPL3851rmZK+EJdqHWyabsV77oQ=</ds:DigestValue>
</ds:Reference>
</ds:SignedInfo>
14:58:09.628 [Test worker] WARN org.apache.xml.security.signature.XMLSignature - Signature verification failed.
14:58:09.628 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl - Signature cryptographic validation not successful
14:58:09.628 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine - Signature validation using candidate validation credential failed
org.opensaml.xmlsec.signature.support.SignatureException: Signature cryptographic validation not successful
	at org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl.validate(ApacheSantuarioSignatureValidationProviderImpl.java:79)
	at org.opensaml.xmlsec.signature.support.SignatureValidator.validate(SignatureValidator.java:54)
	at org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine.verifySignature(BaseSignatureTrustEngine.java:242)
	at org.opensaml.xmlsec.signature.support.impl.ExplicitKeySignatureTrustEngine.doValidate(ExplicitKeySignatureTrustEngine.java:119)
	at org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine.validate(BaseSignatureTrustEngine.java:105)
	at org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine.validate(BaseSignatureTrustEngine.java:62)
	at uk.gov.ida.saml.security.SignatureValidator.validate(SignatureValidator.java:48)
	at uk.gov.ida.saml.security.MetadataBackedSignatureValidatorTest.shouldFailValidationIfKeyInfoNotPresentInMetadata(MetadataBackedSignatureValidatorTest.java:69)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.mockito.internal.runners.JUnit45AndHigherRunnerImpl.run(JUnit45AndHigherRunnerImpl.java:37)
	at org.mockito.runners.MockitoJUnitRunner.run(MockitoJUnitRunner.java:62)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.runTestClass(JUnitTestClassExecuter.java:114)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.execute(JUnitTestClassExecuter.java:57)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassProcessor.processTestClass(JUnitTestClassProcessor.java:66)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:51)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)
	at com.sun.proxy.$Proxy1.processTestClass(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:109)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:146)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:128)
	at org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:404)
	at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)
	at org.gradle.internal.concurrent.StoppableExecutorImpl$1.run(StoppableExecutorImpl.java:46)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)
	at java.lang.Thread.run(Thread.java:748)
14:58:09.628 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.ExplicitKeySignatureTrustEngine - Failed to verify signature using either KeyInfo-derived or directly trusted credentials
14:58:09.630 [Test worker] DEBUG org.opensaml.core.xml.io.AbstractXMLObjectUnmarshaller - Ignoring unknown attribute Format
14:58:09.630 [Test worker] DEBUG org.opensaml.core.xml.io.AbstractXMLObjectUnmarshaller - Ignoring unknown attribute SPNameQualifier
14:58:09.632 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Beginning refresh of metadata from 'metadata'
14:58:09.632 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Processing new metadata from 'metadata'
14:58:09.632 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Unmarshalling metadata from 'metadata'
14:58:09.633 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Starting to unmarshall Apache XML-Security-based SignatureImpl element
14:58:09.633 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Constructing Apache XMLSignature object
14:58:09.633 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Signature", "")
14:58:09.633 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:SignedInfo", "")
14:58:09.633 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:SignatureMethod", "")
14:58:09.633 [Test worker] DEBUG org.apache.xml.security.algorithms.SignatureAlgorithm - Create URI "http://www.w3.org/2001/04/xmldsig-more#rsa-sha256" class "class org.apache.xml.security.algorithms.implementations.SignatureBaseRSA$SignatureRSASHA256"
14:58:09.633 [Test worker] DEBUG org.apache.xml.security.algorithms.JCEMapper - Request for URI http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.633 [Test worker] DEBUG org.apache.xml.security.algorithms.implementations.SignatureBaseRSA - Created SignatureRSA using SHA256withRSA
14:58:09.633 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:KeyInfo", "")
14:58:09.633 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Adding canonicalization and signing algorithms, and HMAC output length to Signature
14:58:09.633 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Adding KeyInfo to Signature
14:58:09.634 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Preprocessing metadata from 'metadata'
14:58:09.635 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Releasing cached DOM for metadata from 'metadata'
14:58:09.635 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Post-processing metadata from 'metadata'
14:58:09.635 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Computing expiration time for metadata from 'metadata'
14:58:09.635 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Expiration of metadata from 'metadata' will occur at 2018-04-03T13:59:49.632Z
14:58:09.635 [Test worker] INFO org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: New metadata successfully loaded for 'metadata'
14:58:09.635 [Test worker] INFO org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Next refresh cycle for metadata provider 'metadata' will occur on '2018-04-03T14:03:09.635Z' ('2018-04-03T15:03:09.635+01:00' local time)
14:58:09.636 [Test worker] DEBUG org.opensaml.saml.common.SAMLObjectSupport - Examining signed object for content references with exclusive canonicalization transform
14:58:09.636 [Test worker] DEBUG org.opensaml.saml.common.SAMLObjectSupport - Saw exclusive transform, declaring non-visible namespaces on signed object
14:58:09.636 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureMarshaller - Starting to marshall {http://www.w3.org/2000/09/xmldsig#}Signature
14:58:09.636 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureMarshaller - Creating XMLSignature object
14:58:09.636 [Test worker] DEBUG org.apache.xml.security.algorithms.SignatureAlgorithm - Create URI "http://www.w3.org/2001/04/xmldsig-more#rsa-sha256" class "class org.apache.xml.security.algorithms.implementations.SignatureBaseRSA$SignatureRSASHA256"
14:58:09.636 [Test worker] DEBUG org.apache.xml.security.algorithms.JCEMapper - Request for URI http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.636 [Test worker] DEBUG org.apache.xml.security.algorithms.implementations.SignatureBaseRSA - Created SignatureRSA using SHA256withRSA
14:58:09.636 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureMarshaller - Adding content to XMLSignature.
14:58:09.636 [Test worker] DEBUG org.apache.xml.security.transforms.Transforms - Transforms.addTransform(http://www.w3.org/2000/09/xmldsig#enveloped-signature)
14:58:09.636 [Test worker] DEBUG org.apache.xml.security.transforms.Transform - Create URI "http://www.w3.org/2000/09/xmldsig#enveloped-signature" class "class org.apache.xml.security.transforms.implementations.TransformEnvelopedSignature"
14:58:09.636 [Test worker] DEBUG org.apache.xml.security.transforms.Transform - The NodeList is null
14:58:09.636 [Test worker] DEBUG org.apache.xml.security.transforms.Transforms - Transforms.addTransform(http://www.w3.org/2000/09/xmldsig#enveloped-signature)
14:58:09.636 [Test worker] DEBUG org.apache.xml.security.transforms.Transforms - Transforms.addTransform(http://www.w3.org/2001/10/xml-exc-c14n#)
14:58:09.636 [Test worker] DEBUG org.apache.xml.security.transforms.Transform - Create URI "http://www.w3.org/2001/10/xml-exc-c14n#" class "class org.apache.xml.security.transforms.implementations.TransformC14NExclusive"
14:58:09.636 [Test worker] DEBUG org.apache.xml.security.transforms.Transform - The NodeList is null
14:58:09.636 [Test worker] DEBUG org.apache.xml.security.transforms.Transforms - Transforms.addTransform(http://www.w3.org/2001/10/xml-exc-c14n#)
14:58:09.636 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Transform", "null")
14:58:09.636 [Test worker] DEBUG org.opensaml.saml.common.SAMLObjectContentReference - Adding list of inclusive namespaces for signature exclusive canonicalization transform
14:58:09.637 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureMarshaller - Creating Signature DOM element
14:58:09.637 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.Signer - Using a signer of implemenation: org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignerProviderImpl
14:58:09.637 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignerProviderImpl - Computing signature over XMLSignature object
14:58:09.637 [Test worker] DEBUG org.apache.xml.security.algorithms.JCEMapper - Request for URI http://www.w3.org/2001/04/xmlenc#sha256
14:58:09.637 [Test worker] DEBUG org.apache.xml.security.utils.resolver.ResourceResolver - I was asked to create a ResourceResolver and got 0
14:58:09.637 [Test worker] DEBUG org.apache.xml.security.utils.resolver.ResourceResolver - check resolvability by class org.apache.xml.security.utils.resolver.ResourceResolver
14:58:09.637 [Test worker] DEBUG org.apache.xml.security.utils.resolver.implementations.ResolverFragment - State I can resolve reference: "#some-assertion-id"
14:58:09.637 [Test worker] DEBUG org.apache.xml.security.utils.resolver.implementations.ResolverFragment - Try to catch an Element with ID some-assertion-id and Element was [saml2:Assertion: null]
14:58:09.637 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Transform", "null")
14:58:09.637 [Test worker] DEBUG org.apache.xml.security.transforms.Transforms - Perform the (0)th http://www.w3.org/2000/09/xmldsig#enveloped-signature transform
14:58:09.637 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Transform", "null")
14:58:09.637 [Test worker] DEBUG org.apache.xml.security.transforms.Transforms - Perform the (1)th http://www.w3.org/2001/10/xml-exc-c14n# transform
14:58:09.637 [Test worker] DEBUG org.apache.xml.security.utils.DigesterOutputStream - Pre-digested input:
14:58:09.637 [Test worker] DEBUG org.apache.xml.security.utils.DigesterOutputStream - <saml2:Assertion xmlns:saml2="urn:oasis:names:tc:SAML:2.0:assertion" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" ID="some-assertion-id" IssueInstant="2018-04-03T13:58:09.636Z" Version="2.0" xsi:type="saml2:AssertionType"><saml2:Issuer>a-test-entity</saml2:Issuer><saml2:Subject xsi:type="saml2:SubjectType"><saml2:NameID Format="urn:oasis:names:tc:SAML:2.0:nameid-format:persistent"></saml2:NameID><saml2:SubjectConfirmation Method="urn:oasis:names:tc:SAML:2.0:cm:bearer" xsi:type="saml2:SubjectConfirmationType"><saml2:SubjectConfirmationData InResponseTo="default-request-id" NotOnOrAfter="2018-04-03T14:13:09.636Z" Recipient="https://signin.service.gov.uk" xsi:type="saml2:SubjectConfirmationDataType"></saml2:SubjectConfirmationData></saml2:SubjectConfirmation></saml2:Subject><saml2:Conditions xsi:type="saml2:ConditionsType"><saml2:AudienceRestriction xsi:type="saml2:AudienceRestrictionType"><saml2:Audience>https://signin.service.gov.uk</saml2:Audience></saml2:AudienceRestriction></saml2:Conditions></saml2:Assertion>
14:58:09.637 [Test worker] DEBUG org.apache.xml.security.utils.SignerOutputStream - Canonicalized SignedInfo:
14:58:09.637 [Test worker] DEBUG org.apache.xml.security.utils.SignerOutputStream - <ds:SignedInfo xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
<ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"></ds:CanonicalizationMethod>
<ds:SignatureMethod Algorithm="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256"></ds:SignatureMethod>
<ds:Reference URI="#some-assertion-id">
<ds:Transforms>
<ds:Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"></ds:Transform>
<ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"></ds:Transform>
</ds:Transforms>
<ds:DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256"></ds:DigestMethod>
<ds:DigestValue>/bfmW9ATLW31ohW+DwFzJosZo5p5mpjgL6+ayj1nKWA=</ds:DigestValue>
</ds:Reference>
</ds:SignedInfo>
14:58:09.640 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Beginning refresh of metadata from 'metadata'
14:58:09.640 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Processing new metadata from 'metadata'
14:58:09.640 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Unmarshalling metadata from 'metadata'
14:58:09.640 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Starting to unmarshall Apache XML-Security-based SignatureImpl element
14:58:09.640 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Constructing Apache XMLSignature object
14:58:09.640 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Signature", "")
14:58:09.640 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:SignedInfo", "")
14:58:09.640 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:SignatureMethod", "")
14:58:09.640 [Test worker] DEBUG org.apache.xml.security.algorithms.SignatureAlgorithm - Create URI "http://www.w3.org/2001/04/xmldsig-more#rsa-sha256" class "class org.apache.xml.security.algorithms.implementations.SignatureBaseRSA$SignatureRSASHA256"
14:58:09.640 [Test worker] DEBUG org.apache.xml.security.algorithms.JCEMapper - Request for URI http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.640 [Test worker] DEBUG org.apache.xml.security.algorithms.implementations.SignatureBaseRSA - Created SignatureRSA using SHA256withRSA
14:58:09.640 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:KeyInfo", "")
14:58:09.640 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Adding canonicalization and signing algorithms, and HMAC output length to Signature
14:58:09.640 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Adding KeyInfo to Signature
14:58:09.642 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Preprocessing metadata from 'metadata'
14:58:09.642 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Releasing cached DOM for metadata from 'metadata'
14:58:09.642 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Post-processing metadata from 'metadata'
14:58:09.642 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Computing expiration time for metadata from 'metadata'
14:58:09.642 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Expiration of metadata from 'metadata' will occur at 2018-04-03T13:59:49.640Z
14:58:09.642 [Test worker] INFO org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: New metadata successfully loaded for 'metadata'
14:58:09.642 [Test worker] INFO org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Next refresh cycle for metadata provider 'metadata' will occur on '2018-04-03T14:03:09.642Z' ('2018-04-03T15:03:09.642+01:00' local time)
14:58:09.642 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Transform", "null")
14:58:09.642 [Test worker] DEBUG org.opensaml.saml.security.impl.SAMLSignatureProfileValidator - Saw Enveloped signature transform
14:58:09.642 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Transform", "null")
14:58:09.642 [Test worker] DEBUG org.opensaml.saml.security.impl.SAMLSignatureProfileValidator - Saw Exclusive C14N signature transform
14:58:09.642 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine - Performing signature algorithm whitelist/blacklist validation using params from CriteriaSet
14:58:09.643 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.SignatureAlgorithmValidator - Validating SignedInfo/SignatureMethod/@Algorithm against whitelist/blacklist: http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.643 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.SignatureAlgorithmValidator - Validating algorithm URI against whitelist and blacklist: algorithm: http://www.w3.org/2001/04/xmldsig-more#rsa-sha256, whitelist: [http://www.w3.org/2001/04/xmldsig-more#rsa-sha512, http://www.w3.org/2000/09/xmldsig#sha1, http://www.w3.org/2001/04/xmlenc#sha512, http://www.w3.org/2001/04/xmldsig-more#rsa-sha256, http://www.w3.org/2001/04/xmlenc#sha256, http://www.w3.org/2000/09/xmldsig#rsa-sha1], blacklist: []
14:58:09.643 [Test worker] DEBUG org.opensaml.xmlsec.algorithm.AlgorithmSupport - Saw non-null algorithm blacklist: []
14:58:09.643 [Test worker] DEBUG org.opensaml.xmlsec.algorithm.AlgorithmSupport - Algorithm passed blacklist validation: http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.643 [Test worker] DEBUG org.opensaml.xmlsec.algorithm.AlgorithmSupport - Saw non-null algorithm whitelist: [http://www.w3.org/2001/04/xmldsig-more#rsa-sha512, http://www.w3.org/2000/09/xmldsig#sha1, http://www.w3.org/2001/04/xmlenc#sha512, http://www.w3.org/2001/04/xmldsig-more#rsa-sha256, http://www.w3.org/2001/04/xmlenc#sha256, http://www.w3.org/2000/09/xmldsig#rsa-sha1]
14:58:09.643 [Test worker] DEBUG org.opensaml.xmlsec.algorithm.AlgorithmSupport - Algorithm passed whitelist validation: http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.643 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.SignatureAlgorithmValidator - Validating SignedInfo/Reference/DigestMethod/@Algorithm against whitelist/blacklist: http://www.w3.org/2001/04/xmlenc#sha256
14:58:09.643 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.SignatureAlgorithmValidator - Validating algorithm URI against whitelist and blacklist: algorithm: http://www.w3.org/2001/04/xmlenc#sha256, whitelist: [http://www.w3.org/2001/04/xmldsig-more#rsa-sha512, http://www.w3.org/2000/09/xmldsig#sha1, http://www.w3.org/2001/04/xmlenc#sha512, http://www.w3.org/2001/04/xmldsig-more#rsa-sha256, http://www.w3.org/2001/04/xmlenc#sha256, http://www.w3.org/2000/09/xmldsig#rsa-sha1], blacklist: []
14:58:09.643 [Test worker] DEBUG org.opensaml.xmlsec.algorithm.AlgorithmSupport - Saw non-null algorithm blacklist: []
14:58:09.643 [Test worker] DEBUG org.opensaml.xmlsec.algorithm.AlgorithmSupport - Algorithm passed blacklist validation: http://www.w3.org/2001/04/xmlenc#sha256
14:58:09.643 [Test worker] DEBUG org.opensaml.xmlsec.algorithm.AlgorithmSupport - Saw non-null algorithm whitelist: [http://www.w3.org/2001/04/xmldsig-more#rsa-sha512, http://www.w3.org/2000/09/xmldsig#sha1, http://www.w3.org/2001/04/xmlenc#sha512, http://www.w3.org/2001/04/xmldsig-more#rsa-sha256, http://www.w3.org/2001/04/xmlenc#sha256, http://www.w3.org/2000/09/xmldsig#rsa-sha1]
14:58:09.643 [Test worker] DEBUG org.opensaml.xmlsec.algorithm.AlgorithmSupport - Algorithm passed whitelist validation: http://www.w3.org/2001/04/xmlenc#sha256
14:58:09.643 [Test worker] DEBUG org.opensaml.saml.security.impl.MetadataCredentialResolver - Resolving credentials from metadata using entityID: https://signin.service.gov.uk, role: {urn:oasis:names:tc:SAML:2.0:metadata}SPSSODescriptor, protocol: null, usage: SIGNING
14:58:09.643 [Test worker] DEBUG org.opensaml.saml.security.impl.MetadataCredentialResolver - Retrieving role descriptor metadata for entity 'https://signin.service.gov.uk' in role '{urn:oasis:names:tc:SAML:2.0:metadata}SPSSODescriptor' for protocol 'null'
14:58:09.643 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractBatchMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Resolved 1 candidates via EntityIdCriterion: EntityIdCriterion [id=https://signin.service.gov.uk]
14:58:09.643 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Attempting to filter candidate EntityDescriptors via resolved Predicates
14:58:09.643 [Test worker] DEBUG net.shibboleth.utilities.java.support.resolver.CriterionPredicateRegistry - Registry did not locate Predicate implementation registered for Criterion class org.opensaml.core.criterion.EntityIdCriterion
14:58:09.643 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: After predicate filtering 1 EntityDescriptors remain
14:58:09.643 [Test worker] DEBUG org.opensaml.saml.security.impl.MetadataCredentialResolver - Found no cached credentials in KeyDescriptor object metadata, resolving from KeyInfo
14:58:09.643 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Found 1 key names: [signing_one]
14:58:09.643 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Processing KeyInfo child with QName: {http://www.w3.org/2000/09/xmldsig#}KeyName
14:58:09.643 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.RSAKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}KeyName, skipping
14:58:09.643 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.DSAKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}KeyName, skipping
14:58:09.643 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.DEREncodedKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}KeyName, skipping
14:58:09.643 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}KeyName, skipping
14:58:09.643 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - KeyName signing_one did not independently produce a credential based on any registered providers
14:58:09.643 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Processing KeyInfo child with QName: {http://www.w3.org/2000/09/xmldsig#}X509Data
14:58:09.643 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.RSAKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}X509Data, skipping
14:58:09.643 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.DSAKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}X509Data, skipping
14:58:09.643 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.DEREncodedKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}X509Data, skipping
14:58:09.643 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Processing KeyInfo child {http://www.w3.org/2000/09/xmldsig#}X509Data with provider org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider
14:58:09.643 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider - Attempting to extract credential from an X509Data
14:58:09.643 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider - Found 1 X509Certificates
14:58:09.643 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider - Found 0 X509CRLs
14:58:09.643 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider - Single certificate was present, treating as end-entity certificate
14:58:09.643 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Credentials successfully extracted from child {http://www.w3.org/2000/09/xmldsig#}X509Data by provider org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider
14:58:09.643 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - A total of 1 credentials were resolved
14:58:09.643 [Test worker] DEBUG org.opensaml.security.credential.criteria.impl.EvaluableCredentialCriteriaRegistry - Registry could not locate evaluable criteria for criteria class org.opensaml.xmlsec.keyinfo.KeyInfoCriterion
14:58:09.643 [Test worker] DEBUG org.opensaml.saml.security.impl.MetadataCredentialResolver - Found no cached credentials in KeyDescriptor object metadata, resolving from KeyInfo
14:58:09.643 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Found 1 key names: [signing_two]
14:58:09.643 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Processing KeyInfo child with QName: {http://www.w3.org/2000/09/xmldsig#}KeyName
14:58:09.643 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.RSAKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}KeyName, skipping
14:58:09.643 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.DSAKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}KeyName, skipping
14:58:09.643 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.DEREncodedKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}KeyName, skipping
14:58:09.643 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}KeyName, skipping
14:58:09.643 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - KeyName signing_two did not independently produce a credential based on any registered providers
14:58:09.643 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Processing KeyInfo child with QName: {http://www.w3.org/2000/09/xmldsig#}X509Data
14:58:09.643 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.RSAKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}X509Data, skipping
14:58:09.643 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.DSAKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}X509Data, skipping
14:58:09.643 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Provider org.opensaml.xmlsec.keyinfo.impl.provider.DEREncodedKeyValueProvider doesn't handle objects of type {http://www.w3.org/2000/09/xmldsig#}X509Data, skipping
14:58:09.643 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Processing KeyInfo child {http://www.w3.org/2000/09/xmldsig#}X509Data with provider org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider
14:58:09.643 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider - Attempting to extract credential from an X509Data
14:58:09.643 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider - Found 1 X509Certificates
14:58:09.643 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider - Found 0 X509CRLs
14:58:09.643 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider - Single certificate was present, treating as end-entity certificate
14:58:09.643 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - Credentials successfully extracted from child {http://www.w3.org/2000/09/xmldsig#}X509Data by provider org.opensaml.xmlsec.keyinfo.impl.provider.InlineX509DataProvider
14:58:09.644 [Test worker] DEBUG org.opensaml.xmlsec.keyinfo.impl.BasicProviderKeyInfoCredentialResolver - A total of 1 credentials were resolved
14:58:09.644 [Test worker] DEBUG org.opensaml.security.credential.criteria.impl.EvaluableCredentialCriteriaRegistry - Registry could not locate evaluable criteria for criteria class org.opensaml.xmlsec.keyinfo.KeyInfoCriterion
14:58:09.644 [Test worker] DEBUG org.opensaml.security.credential.criteria.impl.EvaluableCredentialCriteriaRegistry - Registry could not locate evaluable criteria for criteria class org.opensaml.xmlsec.signature.support.SignatureValidationParametersCriterion
14:58:09.644 [Test worker] DEBUG org.opensaml.security.credential.criteria.impl.EvaluableCredentialCriteriaRegistry - Registry located evaluable criteria class org.opensaml.security.credential.criteria.impl.EvaluableKeyAlgorithmCredentialCriterion for criteria class org.opensaml.security.criteria.KeyAlgorithmCriterion
14:58:09.644 [Test worker] DEBUG org.opensaml.security.credential.criteria.impl.EvaluableCredentialCriteriaRegistry - Registry could not locate evaluable criteria for criteria class org.opensaml.saml.criterion.EntityRoleCriterion
14:58:09.644 [Test worker] DEBUG org.opensaml.security.credential.criteria.impl.EvaluableCredentialCriteriaRegistry - Registry located evaluable criteria class org.opensaml.security.credential.criteria.impl.EvaluableEntityIDCredentialCriterion for criteria class org.opensaml.core.criterion.EntityIdCriterion
14:58:09.644 [Test worker] DEBUG org.opensaml.security.credential.criteria.impl.EvaluableCredentialCriteriaRegistry - Registry located evaluable criteria class org.opensaml.security.credential.criteria.impl.EvaluableUsageCredentialCriterion for criteria class org.opensaml.security.criteria.UsageCriterion
14:58:09.644 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine - Attempting to verify signature and establish trust using KeyInfo-derived credentials
14:58:09.644 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine - Signature contained no KeyInfo element, could not resolve verification credentials
14:58:09.644 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine - Failed to verify signature and/or establish trust using any KeyInfo-derived credentials
14:58:09.644 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.ExplicitKeySignatureTrustEngine - Attempting to verify signature using trusted credentials
14:58:09.644 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.SignatureValidationProvider - Using a validation provider of implementation: org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl
14:58:09.644 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl - Attempting to validate signature using key from supplied credential
14:58:09.644 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl - Accessing XMLSignature object
14:58:09.644 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl - Validating signature with signature algorithm URI: http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.644 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl - Validation credential key algorithm 'RSA', key instance class 'sun.security.rsa.RSAPublicKeyImpl'
14:58:09.644 [Test worker] DEBUG org.apache.xml.security.signature.XMLSignature - signatureMethodURI = http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.644 [Test worker] DEBUG org.apache.xml.security.signature.XMLSignature - jceSigAlgorithm    = SHA256withRSA
14:58:09.644 [Test worker] DEBUG org.apache.xml.security.signature.XMLSignature - jceSigProvider     = SunRsaSign
14:58:09.644 [Test worker] DEBUG org.apache.xml.security.signature.XMLSignature - PublicKey = Sun RSA public key, 2048 bits
  modulus: 28467384286610047790193967127304893209875662073359073774942581887283294160411802792536000169074125867401657852845534832793769124538137509051085458992249703565905800716923469070088999833187597827249635751958059531826825548351550672656743291446712694950734859083390405057337382681249786253663803850894222495451772846819106909725348681532555575251254532621460955520037451236754600370663610020100071967450597633410807407856885679555171801752996449368937848292397495047606491311420123124369147269540780582967348884118030902273439053917167556571322555439984456875509620738152097423039916831980190525678318992037010963562067
  public exponent: 65537
14:58:09.644 [Test worker] DEBUG org.apache.xml.security.utils.SignerOutputStream - Canonicalized SignedInfo:
14:58:09.644 [Test worker] DEBUG org.apache.xml.security.utils.SignerOutputStream - <ds:SignedInfo xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
<ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"></ds:CanonicalizationMethod>
<ds:SignatureMethod Algorithm="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256"></ds:SignatureMethod>
<ds:Reference URI="#some-assertion-id">
<ds:Transforms>
<ds:Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"></ds:Transform>
<ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"></ds:Transform>
</ds:Transforms>
<ds:DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256"></ds:DigestMethod>
<ds:DigestValue>/bfmW9ATLW31ohW+DwFzJosZo5p5mpjgL6+ayj1nKWA=</ds:DigestValue>
</ds:Reference>
</ds:SignedInfo>
14:58:09.644 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine - Signature validation using candidate validation credential failed
org.opensaml.xmlsec.signature.support.SignatureException: Unable to evaluate key against signature
	at org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl.validate(ApacheSantuarioSignatureValidationProviderImpl.java:75)
	at org.opensaml.xmlsec.signature.support.SignatureValidator.validate(SignatureValidator.java:54)
	at org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine.verifySignature(BaseSignatureTrustEngine.java:242)
	at org.opensaml.xmlsec.signature.support.impl.ExplicitKeySignatureTrustEngine.doValidate(ExplicitKeySignatureTrustEngine.java:119)
	at org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine.validate(BaseSignatureTrustEngine.java:105)
	at org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine.validate(BaseSignatureTrustEngine.java:62)
	at uk.gov.ida.saml.security.SignatureValidator.validate(SignatureValidator.java:48)
	at uk.gov.ida.saml.security.MetadataBackedSignatureValidatorTest.shouldNotAcceptMissignedAssertions(MetadataBackedSignatureValidatorTest.java:161)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.mockito.internal.runners.JUnit45AndHigherRunnerImpl.run(JUnit45AndHigherRunnerImpl.java:37)
	at org.mockito.runners.MockitoJUnitRunner.run(MockitoJUnitRunner.java:62)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.runTestClass(JUnitTestClassExecuter.java:114)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.execute(JUnitTestClassExecuter.java:57)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassProcessor.processTestClass(JUnitTestClassProcessor.java:66)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:51)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)
	at com.sun.proxy.$Proxy1.processTestClass(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:109)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:146)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:128)
	at org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:404)
	at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)
	at org.gradle.internal.concurrent.StoppableExecutorImpl$1.run(StoppableExecutorImpl.java:46)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.apache.xml.security.signature.XMLSignatureException: Signature length not correct: got 128 but was expecting 256
	at org.apache.xml.security.algorithms.implementations.SignatureBaseRSA.engineVerify(SignatureBaseRSA.java:92)
	at org.apache.xml.security.algorithms.SignatureAlgorithm.verify(SignatureAlgorithm.java:301)
	at org.apache.xml.security.signature.XMLSignature.checkSignatureValue(XMLSignature.java:759)
	at org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl.validate(ApacheSantuarioSignatureValidationProviderImpl.java:70)
	... 55 common frames omitted
Caused by: java.security.SignatureException: Signature length not correct: got 128 but was expecting 256
	at sun.security.rsa.RSASignature.engineVerify(RSASignature.java:189)
	at java.security.Signature$Delegate.engineVerify(Signature.java:1223)
	at java.security.Signature.verify(Signature.java:656)
	at org.apache.xml.security.algorithms.implementations.SignatureBaseRSA.engineVerify(SignatureBaseRSA.java:90)
	... 58 common frames omitted
14:58:09.645 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.SignatureValidationProvider - Using a validation provider of implementation: org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl
14:58:09.645 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl - Attempting to validate signature using key from supplied credential
14:58:09.645 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl - Accessing XMLSignature object
14:58:09.645 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl - Validating signature with signature algorithm URI: http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.645 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl - Validation credential key algorithm 'RSA', key instance class 'sun.security.rsa.RSAPublicKeyImpl'
14:58:09.645 [Test worker] DEBUG org.apache.xml.security.signature.XMLSignature - signatureMethodURI = http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.645 [Test worker] DEBUG org.apache.xml.security.signature.XMLSignature - jceSigAlgorithm    = SHA256withRSA
14:58:09.645 [Test worker] DEBUG org.apache.xml.security.signature.XMLSignature - jceSigProvider     = SunRsaSign
14:58:09.645 [Test worker] DEBUG org.apache.xml.security.signature.XMLSignature - PublicKey = Sun RSA public key, 2048 bits
  modulus: 25998853806074907922736536937144192810524126200249845203941498583957653002742012081024851371701765572997964410773213417627351163207763916839110493186842727422105108695847327425148517951272422220366166787137233228070807559064518855586460848701406111149789270506162893565711430566183449983164245901187970559589037577615433138971451632097660130400984021863805390812022721378617499178820332971373486312850645816708350643062789774826141511451391051956832621350686324922826347973370110492133155768037641842259670336438666133242469461046538870604952985498558023280525040790594650803517622806143906741297205357832508919936977
  public exponent: 65537
14:58:09.645 [Test worker] DEBUG org.apache.xml.security.utils.SignerOutputStream - Canonicalized SignedInfo:
14:58:09.645 [Test worker] DEBUG org.apache.xml.security.utils.SignerOutputStream - <ds:SignedInfo xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
<ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"></ds:CanonicalizationMethod>
<ds:SignatureMethod Algorithm="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256"></ds:SignatureMethod>
<ds:Reference URI="#some-assertion-id">
<ds:Transforms>
<ds:Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"></ds:Transform>
<ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"></ds:Transform>
</ds:Transforms>
<ds:DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256"></ds:DigestMethod>
<ds:DigestValue>/bfmW9ATLW31ohW+DwFzJosZo5p5mpjgL6+ayj1nKWA=</ds:DigestValue>
</ds:Reference>
</ds:SignedInfo>
14:58:09.646 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine - Signature validation using candidate validation credential failed
org.opensaml.xmlsec.signature.support.SignatureException: Unable to evaluate key against signature
	at org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl.validate(ApacheSantuarioSignatureValidationProviderImpl.java:75)
	at org.opensaml.xmlsec.signature.support.SignatureValidator.validate(SignatureValidator.java:54)
	at org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine.verifySignature(BaseSignatureTrustEngine.java:242)
	at org.opensaml.xmlsec.signature.support.impl.ExplicitKeySignatureTrustEngine.doValidate(ExplicitKeySignatureTrustEngine.java:119)
	at org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine.validate(BaseSignatureTrustEngine.java:105)
	at org.opensaml.xmlsec.signature.support.impl.BaseSignatureTrustEngine.validate(BaseSignatureTrustEngine.java:62)
	at uk.gov.ida.saml.security.SignatureValidator.validate(SignatureValidator.java:48)
	at uk.gov.ida.saml.security.MetadataBackedSignatureValidatorTest.shouldNotAcceptMissignedAssertions(MetadataBackedSignatureValidatorTest.java:161)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.mockito.internal.runners.JUnit45AndHigherRunnerImpl.run(JUnit45AndHigherRunnerImpl.java:37)
	at org.mockito.runners.MockitoJUnitRunner.run(MockitoJUnitRunner.java:62)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.runTestClass(JUnitTestClassExecuter.java:114)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.execute(JUnitTestClassExecuter.java:57)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassProcessor.processTestClass(JUnitTestClassProcessor.java:66)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:51)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)
	at com.sun.proxy.$Proxy1.processTestClass(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:109)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:146)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:128)
	at org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:404)
	at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)
	at org.gradle.internal.concurrent.StoppableExecutorImpl$1.run(StoppableExecutorImpl.java:46)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.apache.xml.security.signature.XMLSignatureException: Signature length not correct: got 128 but was expecting 256
	at org.apache.xml.security.algorithms.implementations.SignatureBaseRSA.engineVerify(SignatureBaseRSA.java:92)
	at org.apache.xml.security.algorithms.SignatureAlgorithm.verify(SignatureAlgorithm.java:301)
	at org.apache.xml.security.signature.XMLSignature.checkSignatureValue(XMLSignature.java:759)
	at org.opensaml.xmlsec.signature.support.provider.ApacheSantuarioSignatureValidationProviderImpl.validate(ApacheSantuarioSignatureValidationProviderImpl.java:70)
	... 55 common frames omitted
Caused by: java.security.SignatureException: Signature length not correct: got 128 but was expecting 256
	at sun.security.rsa.RSASignature.engineVerify(RSASignature.java:189)
	at java.security.Signature$Delegate.engineVerify(Signature.java:1223)
	at java.security.Signature.verify(Signature.java:656)
	at org.apache.xml.security.algorithms.implementations.SignatureBaseRSA.engineVerify(SignatureBaseRSA.java:90)
	... 58 common frames omitted
14:58:09.646 [Test worker] DEBUG org.opensaml.xmlsec.signature.support.impl.ExplicitKeySignatureTrustEngine - Failed to verify signature using either KeyInfo-derived or directly trusted credentials
14:58:09.650 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Starting to unmarshall Apache XML-Security-based SignatureImpl element
14:58:09.650 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Constructing Apache XMLSignature object
14:58:09.650 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Signature", "")
14:58:09.650 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:SignedInfo", "")
14:58:09.650 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:SignatureMethod", "")
14:58:09.650 [Test worker] DEBUG org.apache.xml.security.algorithms.SignatureAlgorithm - Create URI "http://www.w3.org/2000/09/xmldsig#rsa-sha1" class "class org.apache.xml.security.algorithms.implementations.SignatureBaseRSA$SignatureRSASHA1"
14:58:09.650 [Test worker] DEBUG org.apache.xml.security.algorithms.JCEMapper - Request for URI http://www.w3.org/2000/09/xmldsig#rsa-sha1
14:58:09.650 [Test worker] DEBUG org.apache.xml.security.algorithms.implementations.SignatureBaseRSA - Created SignatureRSA using SHA1withRSA
14:58:09.650 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Adding canonicalization and signing algorithms, and HMAC output length to Signature
14:58:09.650 [Test worker] DEBUG org.opensaml.core.xml.io.AbstractXMLObjectUnmarshaller - Ignoring unknown attribute Format
14:58:09.650 [Test worker] DEBUG org.opensaml.core.xml.io.AbstractXMLObjectUnmarshaller - Ignoring unknown attribute SPNameQualifier
14:58:09.651 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Beginning refresh of metadata from 'metadata'
14:58:09.652 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Processing new metadata from 'metadata'
14:58:09.652 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Unmarshalling metadata from 'metadata'
14:58:09.652 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Starting to unmarshall Apache XML-Security-based SignatureImpl element
14:58:09.652 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Constructing Apache XMLSignature object
14:58:09.652 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Signature", "")
14:58:09.652 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:SignedInfo", "")
14:58:09.652 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:SignatureMethod", "")
14:58:09.652 [Test worker] DEBUG org.apache.xml.security.algorithms.SignatureAlgorithm - Create URI "http://www.w3.org/2001/04/xmldsig-more#rsa-sha256" class "class org.apache.xml.security.algorithms.implementations.SignatureBaseRSA$SignatureRSASHA256"
14:58:09.652 [Test worker] DEBUG org.apache.xml.security.algorithms.JCEMapper - Request for URI http://www.w3.org/2001/04/xmldsig-more#rsa-sha256
14:58:09.652 [Test worker] DEBUG org.apache.xml.security.algorithms.implementations.SignatureBaseRSA - Created SignatureRSA using SHA256withRSA
14:58:09.652 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:KeyInfo", "")
14:58:09.652 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Adding canonicalization and signing algorithms, and HMAC output length to Signature
14:58:09.652 [Test worker] DEBUG org.opensaml.xmlsec.signature.impl.SignatureUnmarshaller - Adding KeyInfo to Signature
14:58:09.655 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Preprocessing metadata from 'metadata'
14:58:09.655 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Releasing cached DOM for metadata from 'metadata'
14:58:09.655 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Post-processing metadata from 'metadata'
14:58:09.655 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Computing expiration time for metadata from 'metadata'
14:58:09.655 [Test worker] DEBUG org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Expiration of metadata from 'metadata' will occur at 2018-04-03T13:59:49.651Z
14:58:09.655 [Test worker] INFO org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: New metadata successfully loaded for 'metadata'
14:58:09.655 [Test worker] INFO org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver - Metadata Resolver StringBackedMetadataResolver arbitrary id: Next refresh cycle for metadata provider 'metadata' will occur on '2018-04-03T14:03:09.655Z' ('2018-04-03T15:03:09.655+01:00' local time)
14:58:09.655 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Reference", "")
14:58:09.655 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Transforms", "")
14:58:09.655 [Test worker] DEBUG org.apache.xml.security.utils.ElementProxy - setElement("ds:Transform", "")
14:58:09.656 [Test worker] ERROR org.opensaml.saml.security.impl.SAMLSignatureProfileValidator - Error obtaining transform instance
org.apache.xml.security.transforms.TransformationException: Unknown transformation. No handler installed for URI http://www.w3.org/2000/09/xmldsig#invalid
	at org.apache.xml.security.transforms.Transforms.item(Transforms.java:328)
	at org.opensaml.saml.security.impl.SAMLSignatureProfileValidator.validateTransforms(SAMLSignatureProfileValidator.java:228)
	at org.opensaml.saml.security.impl.SAMLSignatureProfileValidator.validateSignatureImpl(SAMLSignatureProfileValidator.java:92)
	at org.opensaml.saml.security.impl.SAMLSignatureProfileValidator.validate(SAMLSignatureProfileValidator.java:64)
	at uk.gov.ida.saml.security.SignatureValidator.validate(SignatureValidator.java:29)
	at uk.gov.ida.saml.security.MetadataBackedSignatureValidatorTest.validateAuthnRequestFile(MetadataBackedSignatureValidatorTest.java:267)
	at uk.gov.ida.saml.security.MetadataBackedSignatureValidatorTest.shouldNotValidateSignatureInvalidEnvelopeTransform(MetadataBackedSignatureValidatorTest.java:252)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.ExpectException.evaluate(ExpectException.java:19)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.mockito.internal.runners.JUnit45AndHigherRunnerImpl.run(JUnit45AndHigherRunnerImpl.java:37)
	at org.mockito.runners.MockitoJUnitRunner.run(MockitoJUnitRunner.java:62)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.runTestClass(JUnitTestClassExecuter.java:114)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.execute(JUnitTestClassExecuter.java:57)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassProcessor.processTestClass(JUnitTestClassProcessor.java:66)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:51)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)
	at com.sun.proxy.$Proxy1.processTestClass(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:109)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:146)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:128)
	at org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:404)
	at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)
	at org.gradle.internal.concurrent.StoppableExecutorImpl$1.run(StoppableExecutorImpl.java:46)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.apache.xml.security.transforms.InvalidTransformException: Unknown transformation. No handler installed for URI http://www.w3.org/2000/09/xmldsig#invalid
	at org.apache.xml.security.transforms.Transform.<init>(Transform.java:157)
	at org.apache.xml.security.transforms.Transforms.item(Transforms.java:326)
	... 55 common frames omitted
]]></system-out>
  <system-err><![CDATA[]]></system-err>
</testsuite>
